"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["50385"],{1099:function(s,e,n){n.r(e);var i=n(85893),r=n(50065),l=n(95895);function o(s){let e=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",h3:"h3",code:"code",pre:"pre",span:"span",h4:"h4",ol:"ol",li:"li"},(0,r.ah)(),s.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.h1,{id:"introduction-to-quantization-and-dequantization",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#introduction-to-quantization-and-dequantization",children:"#"}),"Introduction to Quantization and Dequantization"]}),"\n",(0,i.jsx)(l.Z,{}),"\n",(0,i.jsx)(e.p,{children:"In order to help you better understand the quantize and dequantize pre-processing provided by the DSP sample package, this article analyzes the CPU and DSP reference implementations based on the algorithm principles, and performs consistency checks and performance evaluations on the CPU and DSP reference implementations."}),"\n",(0,i.jsxs)(e.h2,{id:"principle-introduction",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#principle-introduction",children:"#"}),"Principle Introduction"]}),"\n",(0,i.jsxs)(e.h3,{id:"quantization-and-dequantization",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#quantization-and-dequantization",children:"#"}),"Quantization and Dequantization"]}),"\n",(0,i.jsxs)(e.p,{children:["For the introduction, formulas and reference implementation of quantization and dequantization, please refer to the introduction of ",(0,i.jsx)(e.code,{children:"model quantization"})," in the ",(0,i.jsx)(e.a,{href:"/3.0.22/en/guide/key_concept.html",children:"Key Concepts"})," chapter."]}),"\n",(0,i.jsxs)(e.h2,{id:"cpu-reference-implementation",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#cpu-reference-implementation",children:"#"}),"CPU Reference Implementation"]}),"\n",(0,i.jsxs)(e.h3,{id:"quantification",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#quantification",children:"#"}),"Quantification"]}),"\n",(0,i.jsx)(e.pre,{className:"code",children:(0,i.jsx)(e.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(e.code,{className:"language-c",meta:"",children:[(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"static"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"float32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"_round"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"float32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" input) {"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"std::fesetround(FE_TONEAREST)"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"float32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" result "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"nearbyintf(input)"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" result;"})]}),"\n",(0,i.jsx)(e.span,{className:"line line-number",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,i.jsx)(e.span,{className:"line line-number"}),"\n",(0,i.jsx)(e.span,{className:"line line-number",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"/**"})}),"\n",(0,i.jsx)(e.span,{className:"line line-number",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * quantize reference implementation"})}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"@param"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"out"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"] dst: dst data"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"@param"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"in"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"] src: src size"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"@param"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"in"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"] scale: scale value"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"@param"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"in"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"] zero_point: zero_point value"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"@param"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"in"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"] size: data size"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"@return"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" 0 if success, return defined error code otherwise"})]}),"\n",(0,i.jsx)(e.span,{className:"line line-number",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" */"})}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"static"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"void"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"quantize_ref"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"int8_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"dst"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"float32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"src"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"float32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" scale"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"                         "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"float32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" zero_point"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"float32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" min"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"float32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" max"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"                         "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" size) {"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" i "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"; i "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" size; "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"++"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"i) {"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"float32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" value "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"_round(src[i] "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" scale "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"+"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" zero_point)"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    value "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"std::min(std::max(value"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" min)"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" max)"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    dst[i] "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" static_cast"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<int8_t>"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(value);"})]}),"\n",(0,i.jsx)(e.span,{className:"line line-number",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,i.jsx)(e.span,{className:"line line-number",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n"]})})}),"\n",(0,i.jsxs)(e.h3,{id:"dequantization",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#dequantization",children:"#"}),"Dequantization"]}),"\n",(0,i.jsx)(e.pre,{className:"code",children:(0,i.jsx)(e.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(e.code,{className:"language-c",meta:"",children:[(0,i.jsx)(e.span,{className:"line line-number",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"/**"})}),"\n",(0,i.jsx)(e.span,{className:"line line-number",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * dequantize reference implementation"})}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"@param"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"out"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"] dst: dst data"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"@param"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"in"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"] src: src size"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"@param"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"in"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"] scale: scale value"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"@param"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"in"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"] zero_point: zero_point value"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"@param"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"in"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"] type: data type"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"@param"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"["}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"in"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"] size: data size"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"@return"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" 0 if success, return defined error code otherwise"})]}),"\n",(0,i.jsx)(e.span,{className:"line line-number",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:" */"})}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"static"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"void"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"dequantize_ref"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"float32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"dst"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"void"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"src"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"float32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" scale"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"                           "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" zero_point"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" size"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"uint8_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" type) {"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" (type "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" HB_DSP_TENSOR_TYPE_S32) {"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"ptr "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" static_cast"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<int32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"*>"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(src);"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" i "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"; i "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" size; "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"++"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"i) {"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" data_diff{ptr[i] "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" zero_point};"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      dst[i] "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" static_cast"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"float32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(data_diff) "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" scale;"})]}),"\n",(0,i.jsx)(e.span,{className:"line line-number",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  } "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"else"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" (type "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" HB_DSP_TENSOR_TYPE_S8) {"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" i "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"; i "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" size; "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"++"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"i) {"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"int8_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"ptr "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" static_cast"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<int8_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"*>"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(src);"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" data_diff{("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:")(ptr[i]) "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" zero_point};"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      dst[i] "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" static_cast"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"float32_t"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(data_diff) "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" scale;"})]}),"\n",(0,i.jsx)(e.span,{className:"line line-number",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  } "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"else"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"LOGE("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Unsupported data type: {}"'}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" static_cast"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<int32_t>"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"(type))"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,i.jsx)(e.span,{className:"line line-number",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,i.jsx)(e.span,{className:"line line-number",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n"]})})}),"\n",(0,i.jsxs)(e.h2,{id:"dsp-optimization-acceleration",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#dsp-optimization-acceleration",children:"#"}),"DSP Optimization Acceleration"]}),"\n",(0,i.jsxs)(e.h3,{id:"dsp-acceleration-ideas",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#dsp-acceleration-ideas",children:"#"}),"DSP Acceleration Ideas"]}),"\n",(0,i.jsxs)(e.h4,{id:"vectorized",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#vectorized",children:"#"}),"Vectorized"]}),"\n",(0,i.jsx)(e.p,{children:"Quantize/dequantize both calculate data continuously, which is very suitable for SIMD vector optimization."}),"\n",(0,i.jsxs)(e.h4,{id:"block-strategy",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#block-strategy",children:"#"}),"Block strategy"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"J6 DSP has two 256kB TCMs, and the actual available space is about 210KB. Each tile is as large as possible without exceeding the total available space. Quantize mainly considers input and output, and the ratio is 4:1. Dequantize also mainly considers input and output, and the ratio is 1:4;"}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"At the same time, because quantize is a linear calculation, and the output is smaller than the output data size, you can consider using inplace (using the same tile for input and output to further increase the available tile)."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.h3,{id:"dsp-optimization-implementation",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#dsp-optimization-implementation",children:"#"}),"DSP Optimization Implementation"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"quantize SIMD computing."}),"\n"]}),"\n",(0,i.jsx)(e.pre,{className:"code",children:(0,i.jsx)(e.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(e.code,{className:"language-c",meta:"",children:[(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"#define"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"QUANTIZE_PROCESS"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"                                                       \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_LAN_2XF32_IP"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(input1"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" al_px"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" INPUT);                                      \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_LAN_2XF32_IP"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(input2"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" al_px"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" INPUT);                                      \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"  /* Compute: input * (1/scale) + offset + 0.5f */"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"                             \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  xb_vecN_2xf32 hfvec1 "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" v_zero_point_0;                                       \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  xb_vecN_2xf32 hfvec2 "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" v_zero_point_1;                                       \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_MULAN_2XF32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(hfvec1"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" input1"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" v_scale_0);                                  \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_MULAN_2XF32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(hfvec2"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" input2"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" v_scale_1);                                  \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"  /* Round and Clamp the vectors to U8/S8 range */"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"                             \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  xb_vecN_2x32v hvec1 "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_TRUNCN_2XF32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(                                      \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_MAXN_2XF32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_MINN_2XF32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_FIRINTN_2XF32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(hfvec1)"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" max)"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" min)"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"); \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  xb_vecN_2x32v hvec2 "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_TRUNCN_2XF32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(                                      \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_MAXN_2XF32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_MINN_2XF32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_FIRINTN_2XF32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(hfvec2)"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" max)"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" min)"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"); \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  xb_vecNx16 output "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_MOVNX16_FROMN_2X32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(                                  \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_SELN_2X32I"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(hvec2"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" hvec1"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" IVP_SELI_8B_EXTRACT_1_OF_2_OFF_0));		   \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"	  "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_SANX8S_IP"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(output"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" al_pz"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" OUTPUT);"})]}),"\n"]})})}),"\n",(0,i.jsxs)(e.ol,{start:"2",children:["\n",(0,i.jsx)(e.li,{children:"dequantize SIMD Computing."}),"\n"]}),"\n",(0,i.jsx)(e.pre,{className:"code",children:(0,i.jsx)(e.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(e.code,{className:"language-c",meta:"",children:[(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"#define"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"DEQUANTIZE_PROCESS_INT8"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"                                              \\"})]}),"\n",(0,i.jsx)(e.span,{className:"line line-number",children:(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  xb_vecNx16 input1;                                                         \\"})}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_LANX8S_IP"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(input1"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" al_px"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" INPUT);                                       \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  input1 "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_SUBNX16"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(input1"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" v_zero_point);                                \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  xb_vecN_2x32v ll"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" lh;                                                      \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  ll "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_UNPKSNX16_L"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(input1);                                              \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  lh "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_UNPKSNX16_H"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(input1);                                              \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  xb_vecN_2xf32 output1 "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_MULN_2XF32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_FLOATN_2X32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(ll"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:")"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" v_scale_0); \\"})]}),"\n",(0,i.jsxs)(e.span,{className:"line line-number",children:[(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  xb_vecN_2xf32 output2 "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_MULN_2XF32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"IVP_FLOATN_2X32"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(lh"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:")"}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" v_scale_1);"})]}),"\n"]})})}),"\n",(0,i.jsxs)(e.ol,{start:"3",children:["\n",(0,i.jsxs)(e.li,{children:["For the framework part, please refer to the introduction of ping pong IDMA implementation in the ",(0,i.jsx)(e.a,{href:"/3.0.22/en/guide/ucp/plugin/dsp_develop/dsp_develop.html#dsp_develop_softmax",children:"DSP Operator"})," section."]}),"\n"]}),"\n",(0,i.jsxs)(e.h2,{id:"consistency-check",children:[(0,i.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#consistency-check",children:"#"}),"Consistency Check"]}),"\n",(0,i.jsx)(e.p,{children:"Compare the calculated results with the CPU reference implementation, and pass the verification if they are consistent"})]})}function t(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,r.ah)(),s.components);return e?(0,i.jsx)(e,Object.assign({},s,{children:(0,i.jsx)(o,s)})):o(s)}e.default=t,t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["3.0.22%2Fen%2Fguide%2Fucp%2Fplugin%2Fdsp_develop%2Fdsp_sample%2Fquantize_dequantize.mdx"]={toc:[{id:"principle-introduction",text:"Principle Introduction",depth:2},{id:"quantization-and-dequantization",text:"Quantization and Dequantization",depth:3},{id:"cpu-reference-implementation",text:"CPU Reference Implementation",depth:2},{id:"quantification",text:"Quantification",depth:3},{id:"dequantization",text:"Dequantization",depth:3},{id:"dsp-optimization-acceleration",text:"DSP Optimization Acceleration",depth:2},{id:"dsp-acceleration-ideas",text:"DSP Acceleration Ideas",depth:3},{id:"vectorized",text:"Vectorized",depth:4},{id:"block-strategy",text:"Block strategy",depth:4},{id:"dsp-optimization-implementation",text:"DSP Optimization Implementation",depth:3},{id:"consistency-check",text:"Consistency Check",depth:2}],title:"Introduction to Quantization and Dequantization",frontmatter:{}}},95895:function(s,e,n){n(39710);var i=n(85893),r=n(67294),l=n(45687);n(20388);let o={"zh-CN":s=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${s.minutes>=1?`${Math.ceil(s.minutes)} \u{5206}\u{949F}`:"\u5C0F\u4E8E 1 \u5206\u949F"}`,"en-US":s=>`Estimated reading time: ${s.minutes>=1?`${Math.ceil(s.minutes)} minutes`:"less than 1 minute"}`};function t(s,e,n){let i=Object.keys(o).includes(e)?e:n;return o[i](s)}e.Z=s=>{let{defaultLocale:e="en-US"}=s,n=(0,l.Vi)().page.readingTimeData,o=(0,l.Jr)(),c=(0,l.e7)(),[a,h]=(0,r.useState)(t(n,o,e));return(0,r.useEffect)(()=>{h(t(n,o,e))},[o,n]),(0,i.jsx)("span",{"data-dark":String(c),className:"rp-reading-time",children:a})}}}]);