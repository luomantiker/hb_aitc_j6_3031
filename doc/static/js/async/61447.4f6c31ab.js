"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["61447"],{54097:function(s,e,n){n.r(e);var a=n(85893),i=n(50065),l=n(95895);function r(s){let e=Object.assign({h1:"h1",a:"a",p:"p",code:"code",ul:"ul",li:"li",span:"span",math:"math",semantics:"semantics",mrow:"mrow",mi:"mi",mo:"mo",mn:"mn",annotation:"annotation"},(0,i.ah)(),s.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.h1,{id:"dynamic-input-introduction",children:[(0,a.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#dynamic-input-introduction",children:"#"}),"Dynamic input Introduction"]}),"\n",(0,a.jsx)(l.Z,{}),"\n",(0,a.jsxs)(e.p,{children:["When the model input tensor properties ",(0,a.jsx)(e.code,{children:"validShape"})," or ",(0,a.jsx)(e.code,{children:"stride"})," contains ",(0,a.jsx)(e.code,{children:"-1"}),", it means that the model input is dynamic and you need to fill in the dynamic dimension according to the actual input."]}),"\n",(0,a.jsxs)(e.p,{children:["The following rules should be followed when filling in ",(0,a.jsx)(e.code,{children:"stride"}),":"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:["Make sure the filled value satisfies ",(0,a.jsxs)(e.span,{className:"katex",children:[(0,a.jsx)(e.span,{className:"katex-mathml",children:(0,a.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(e.semantics,{children:[(0,a.jsxs)(e.mrow,{children:[(0,a.jsx)(e.mi,{children:"s"}),(0,a.jsx)(e.mi,{children:"t"}),(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mi,{children:"d"}),(0,a.jsx)(e.mi,{children:"e"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mi,{children:"d"}),(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"}),(0,a.jsx)(e.mo,{children:">"}),(0,a.jsx)(e.mo,{children:"="}),(0,a.jsx)(e.mi,{children:"s"}),(0,a.jsx)(e.mi,{children:"t"}),(0,a.jsx)(e.mi,{children:"r"}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mi,{children:"d"}),(0,a.jsx)(e.mi,{children:"e"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mi,{children:"d"}),(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mo,{children:"+"}),(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"}),(0,a.jsx)(e.mo,{children:"\u2217"}),(0,a.jsx)(e.mi,{children:"v"}),(0,a.jsx)(e.mi,{children:"a"}),(0,a.jsx)(e.mi,{children:"l"}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mi,{children:"d"}),(0,a.jsx)(e.mi,{children:"S"}),(0,a.jsx)(e.mi,{children:"h"}),(0,a.jsx)(e.mi,{children:"a"}),(0,a.jsx)(e.mi,{children:"p"}),(0,a.jsx)(e.mi,{children:"e"}),(0,a.jsx)(e.mi,{mathvariant:"normal",children:"."}),(0,a.jsx)(e.mi,{children:"d"}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mi,{children:"m"}),(0,a.jsx)(e.mi,{children:"e"}),(0,a.jsx)(e.mi,{children:"n"}),(0,a.jsx)(e.mi,{children:"s"}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mi,{children:"o"}),(0,a.jsx)(e.mi,{children:"n"}),(0,a.jsx)(e.mi,{children:"S"}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mi,{children:"z"}),(0,a.jsx)(e.mi,{children:"e"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"["}),(0,a.jsx)(e.mi,{children:"i"}),(0,a.jsx)(e.mi,{children:"d"}),(0,a.jsx)(e.mi,{children:"x"}),(0,a.jsx)(e.mo,{children:"+"}),(0,a.jsx)(e.mn,{children:"1"}),(0,a.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(e.annotation,{encoding:"application/x-tex",children:"stride[idx] >= stride[idx+1] * validShape.dimensionSize[idx+1]"})]})})}),(0,a.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"s"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"mclose",children:"]"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(e.span,{className:"mrel",children:">="}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"s"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"t"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"+"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mclose",children:"]"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"\u2217"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"v"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"a"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"ha"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"p"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,a.jsx)(e.span,{className:"mord",children:"."}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"im"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"e"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"n"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"s"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"o"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"n"}),(0,a.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"ze"}),(0,a.jsx)(e.span,{className:"mopen",children:"["}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"i"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,a.jsx)(e.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(e.span,{className:"mbin",children:"+"}),(0,a.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(e.span,{className:"base",children:[(0,a.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(e.span,{className:"mord",children:"1"}),(0,a.jsx)(e.span,{className:"mclose",children:"]"})]})]})]}),", where ",(0,a.jsx)(e.code,{children:"idx"})," represents the current dimension."]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:["For ",(0,a.jsx)(e.code,{children:"stride"})," of Y and UV inputs, due to some hardware constraints, dynamic dimensions need to ensure 32-alignment, which means you need to align the input according to ",(0,a.jsx)(e.code,{children:"stride"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"For example, the model has three inputs:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"input_y"})," : validShape = [1,-1,-1,1]\uFF0Cstride = [-1,-1,1,1]"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"input_uv"})," : validShape = [1,-1,-1,2]\uFF0Cstride = [-1,-1,2,1]"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"input_roi"})," : validShape = [1,4]\uFF0Cstride = [16,4]"]}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"input_y"})," and ",(0,a.jsx)(e.code,{children:"input_uv"})," are dynamic inputs, and are Y and UV inputs. Assume that the actually inputs: ",(0,a.jsx)(e.code,{children:"input_y"}),"'s ",(0,a.jsx)(e.code,{children:"validShape"})," = [1,220,220,1], ",(0,a.jsx)(e.code,{children:"input_uv"}),"'s ",(0,a.jsx)(e.code,{children:"validShape"})," = [1,110,110,2]. ",(0,a.jsx)(e.code,{children:"stride"})," is calculated as follows to ensure that the dynamic dimension is aligned to 32, where ",(0,a.jsx)(e.code,{children:"ALIGN_32"})," represents 32-byte alignment:"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"input_y"})," :"]}),"\n",(0,a.jsx)(e.p,{children:"stride[3] = 1;"}),"\n",(0,a.jsx)(e.p,{children:"stride[2] = 1;"}),"\n",(0,a.jsx)(e.p,{children:"stride[1] = ALIGN_32(stride[2] * validShape.dimensionSize[2]) = ALIGN_32(1 * 220) = 224;"}),"\n",(0,a.jsx)(e.p,{children:"stride[0] = ALIGN_32(stride[1] * validShape.dimensionSize[1]) = ALIGN_32(224 * 220) = 49280;"}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.code,{children:"input_uv"})," :"]}),"\n",(0,a.jsx)(e.p,{children:"stride[3] = 1;"}),"\n",(0,a.jsx)(e.p,{children:"stride[2] = 2;"}),"\n",(0,a.jsx)(e.p,{children:"stride[1] = ALIGN_32(stride[2] * validShape.dimensionSize[2]) = ALIGN_32(2 * 110) = 224;"}),"\n",(0,a.jsx)(e.p,{children:"stride[0] = ALIGN_32(stride[1] * validShape.dimensionSize[1]) = ALIGN_32(224 * 110) = 24640;"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:["You need to set the following properties when preparing the input, and align the input data according to ",(0,a.jsx)(e.code,{children:"stride"}),":"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"input_y"})," : validShape = [1,220,220,1]\uFF0Cstride = [49280,224,1,1]"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"input_uv"})," : validShape = [1,110,110,2]\uFF0Cstride = [24640,224,2,1]"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"input_roi"})," : validShape = [1,4]\uFF0Cstride = [16,4]"]}),"\n"]})]})}function m(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,i.ah)(),s.components);return e?(0,a.jsx)(e,Object.assign({},s,{children:(0,a.jsx)(r,s)})):r(s)}e.default=m,m.__RSPRESS_PAGE_META={},m.__RSPRESS_PAGE_META["3.0.22%2Fen%2Fguide%2Fucp%2Fruntime%2Fbpu_sdk_api%2Fdynamic_input_introduction.mdx"]={toc:[],title:"Dynamic input Introduction",frontmatter:{}}},95895:function(s,e,n){n(39710);var a=n(85893),i=n(67294),l=n(45687);n(20388);let r={"zh-CN":s=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${s.minutes>=1?`${Math.ceil(s.minutes)} \u{5206}\u{949F}`:"\u5C0F\u4E8E 1 \u5206\u949F"}`,"en-US":s=>`Estimated reading time: ${s.minutes>=1?`${Math.ceil(s.minutes)} minutes`:"less than 1 minute"}`};function m(s,e,n){let a=Object.keys(r).includes(e)?e:n;return r[a](s)}e.Z=s=>{let{defaultLocale:e="en-US"}=s,n=(0,l.Vi)().page.readingTimeData,r=(0,l.Jr)(),d=(0,l.e7)(),[c,h]=(0,i.useState)(m(n,r,e));return(0,i.useEffect)(()=>{h(m(n,r,e))},[r,n]),(0,a.jsx)("span",{"data-dark":String(d),className:"rp-reading-time",children:c})}}}]);