"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["27483"],{61160:function(e,n,i){e.exports=i.p+"static/image/yuv420p.6b426e71.png"},68804:function(e,n,i){e.exports=i.p+"static/image/yuv420sp.3a95cbdb.png"},68313:function(e,n,i){e.exports=i.p+"static/image/yuv_common_format.e0e86ac1.png"},84933:function(e,n,i){i.r(n);var a=i(85893),s=i(50065),r=i(95895),t=i(68313),o=i(61160),l=i(68804);function c(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",h3:"h3",img:"img",ul:"ul",li:"li",code:"code",pre:"pre",span:"span"},(0,s.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.h1,{id:"common-image-format",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#common-image-format",children:"#"}),"Common Image Format"]}),"\n",(0,a.jsx)(r.Z,{}),"\n",(0,a.jsxs)(n.h2,{id:"introduction",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#introduction",children:"#"}),"Introduction"]}),"\n",(0,a.jsx)(n.p,{children:"With the development of artificial intelligence, deep neural networks \u201Cblossom\u201D in the field of vision.\nIn order to fulfill the needs of different scenarios, we are exposed to a variety of image data formats.\nThis subsection provides a detailed introduction to several image data formats commonly used in deep learning scenarios: RGB, BGR, YUV, NV12 and Gray."}),"\n",(0,a.jsxs)(n.h2,{id:"rgb",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#rgb",children:"#"}),"RGB"]}),"\n",(0,a.jsx)(n.p,{children:"RGB, a common color image format. Each pixel point of the image stores the luminance values (0 ~ 255, UINT8) for the red (Red), green (Green), and blue (Blue) color channels."}),"\n",(0,a.jsx)(n.p,{children:"Based on this, if recorded as (R, G, B), then (255,0,0), (0,255,0), (0,0,255) can represent the purest red, green, and blue, respectively.\nIf the values of the three RGB channels are all 0, the black color is obtained; if the values of the three channels are all maxed out at 255, the white color is obtained."}),"\n",(0,a.jsx)(n.p,{children:"RGB can represent up to 256x256x256\u224816.77 million colors, which is far more than the human eye can perceive (about 10 million), so RGB is used in a wide variety of display fields and is closely related to daily life."}),"\n",(0,a.jsx)(n.p,{children:"However, RGB has a feature that each pixel must store the R, G, and B channel values at the same time, i.e., each pixel needs 3 bytes of storage space, which is very unfriendly to the storage and transmission of video scenes, and will take up a lot of space and bandwidth."}),"\n",(0,a.jsxs)(n.h2,{id:"bgr",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#bgr",children:"#"}),"BGR"]}),"\n",(0,a.jsx)(n.p,{children:"The BGR image format is similar to RGB, except that the red, green and blue channels are arranged in a different order.\nIn the RGB format, the channel order of pixel points is red, green, and blue, while in the BGR format, the channel order of pixel points is blue, green, and red."}),"\n",(0,a.jsx)(n.p,{children:"The BGR format is commonly used in computer vision libraries such as OpenCV and is the default image format for some software and hardware, with which it has better compatibility."}),"\n",(0,a.jsx)(n.p,{children:"BGR, like RGB, has a large amount of data and is not suitable for the storage and transmission of video scenes.\nTherefore, we also need other image formats to replace RGB/BGR for video."}),"\n",(0,a.jsxs)(n.h2,{id:"yuv",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#yuv",children:"#"}),"YUV"]}),"\n",(0,a.jsxs)(n.h3,{id:"introduction-1",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#introduction-1",children:"#"}),"Introduction"]}),"\n",(0,a.jsx)(n.p,{children:"YUV, a color image format, where Y denotes Luminance, which is used to specify the brightness of a pixel (which can be interpreted as the degree of black and white),\nand U and V denote Chrominance or Chroma, which are used to specify the color of a pixel, and each of these values is expressed using UINT8, as shown below."}),"\n",(0,a.jsx)(n.p,{children:"The YUV format uses luminance-chrominance separation, which means that only U and V are involved in the color representation, which is different from RGB."}),"\n",(0,a.jsx)(n.p,{children:"Even without the U and V components, we can \u201Crecognize\u201D the basic content of an image based on the Y component alone, except that it is presented as a black and white image.\nAnd the U and V components give color to these basics, and the black and white image evolves into a color image.\nThis means that we can minimize the sampling of the U and V components while retaining the Y-component information in order to minimize the amount of data, which is of great benefit to the storage and transmission of video data, which is why YUV is more suitable for the video processing field compared to RGB."}),"\n",(0,a.jsxs)(n.h3,{id:"yuv-common-format",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#yuv-common-format",children:"#"}),"YUV Common Format"]}),"\n",(0,a.jsx)(n.p,{children:"According to research, the human eye is more sensitive to luminance information than color information.\nYUV downsampling is based on the characteristics of the human eye, the human eye is relatively insensitive to the color information for compressed sampling, to get a relatively small file for playback and transmission.\nAccording to the percentage of Y and UV, the three commonly used YUV formats are: YUV444, YUV422, and YUV420."}),"\n",(0,a.jsx)(n.p,{children:"Three graphs are used to visualize the percentage of Y and UV for different acquisition methods."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"yuv_common_format",src:t})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"YUV444: Each Y component corresponds to a pair of UV components, occupying 3 bytes per pixel (Y + U + V = 8 + 8 + 8 = 24bits)."}),"\n",(0,a.jsx)(n.li,{children:"YUV422: Every two Y components share a pair of UV components, occupying 2 bytes per pixel (Y + 0.5U + 0.5V = 8 + 4 + 4 = 16bits)\u3002"}),"\n",(0,a.jsx)(n.li,{children:"YUV420: Every four Y components share a pair of UV components, occupying 1.5 bytes per pixel (Y + 0.25U + 0.25V = 8 + 2 + 2 = 12bits)."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"At this point to understand the 4 in YUV4xx, this 4, in fact, expresses the maximum sharing unit! That is, up to 4 Y's share a pair of UV's."}),"\n",(0,a.jsxs)(n.h3,{id:"yuv420-in-detail",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#yuv420-in-detail",children:"#"}),"YUV420 in Detail"]}),"\n",(0,a.jsx)(n.p,{children:"In YUV420, a pixel point corresponds to a Y and a small 4X4 square corresponds to a U and V. Each pixel occupies 1.5 bytes.\nYUV420 can also be categorized into two formats, YUV420P and YUV420SP, based on different UV component arrangements."}),"\n",(0,a.jsx)(n.p,{children:"The YUV420P is arranged as shown below by storing the U first and then the V:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"YUV420P",src:o})}),"\n",(0,a.jsx)(n.p,{children:"YUV420SP is stored alternately with UV and UV, arranged as shown below:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"YUV420SP",src:l})}),"\n",(0,a.jsxs)(n.p,{children:["At this point, I believe you can understand why the length of YUV420 data in memory is ",(0,a.jsx)(n.code,{children:"width * height * 3 / 2"}),"."]}),"\n",(0,a.jsxs)(n.h2,{id:"nv12",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#nv12",children:"#"}),"NV12"]}),"\n",(0,a.jsx)(n.p,{children:"The NV12 image format belongs to the YUV420SP format in the YUV color space, where every four Y components share a set of U and V components, with Y stored consecutively and U and V stored crosswise."}),"\n",(0,a.jsx)(n.p,{children:"NV12 has half the amount of data of formats such as RGB/BGR while maintaining the image brightness information, which can reduce the time for the model to load the input data, so the embedded side usually selects the NV12 image as the image data input during deployment."}),"\n",(0,a.jsxs)(n.h2,{id:"gray",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#gray",children:"#"}),"Gray"]}),"\n",(0,a.jsx)(n.p,{children:"Gray image format, also known as grayscale image format, is a single-channel image format.\nIn a Gray image, each pixel contains only one luminance value, and each value is represented using the UINT8 type, which is an integer between 0 and 255.\nThis brightness value indicates how bright or dark each pixel in the image, with larger values indicating brighter pixels and smaller values indicating darker pixels."}),"\n",(0,a.jsx)(n.p,{children:"Gray image format is also a common format for other color image formats (such as RGB, YUV, etc.) when converting to a single-channel image, which contains only the luminance information of the image, and the image data is relatively small.\nTherefore, for some scenes that are less sensitive to image color information, it still has important application value."}),"\n",(0,a.jsxs)(n.h2,{id:"convert-between-image-formats",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#convert-between-image-formats",children:"#"}),"Convert between image formats"]}),"\n",(0,a.jsx)(n.p,{children:"In terms of image acquisition and display, RGB is mainly used, but in terms of image storage, processing and transmission, YUV is selected. In a complete application scenario, different image formats may need to be used."}),"\n",(0,a.jsx)(n.p,{children:"How to realize the conversion between image formats? Can be simply understood that there is a \u201Cstandard\u201D, based on this standard, through certain mathematical operations can be completed between different image formats.\nThe following computer vision library opencv encapsulated function as an example, see how to realize the image format conversion:"}),"\n",(0,a.jsx)(n.pre,{className:"code",children:(0,a.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,a.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,a.jsxs)(n.span,{className:"line line-number",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" cv2"})]}),"\n"]})})}),"\n",(0,a.jsx)(n.pre,{className:"code",children:(0,a.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,a.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,a.jsx)(n.span,{className:"line line-number",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Read images, opencv reads images in BGR format by default"})}),"\n",(0,a.jsxs)(n.span,{className:"line line-number",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"bgr_img "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" cv2"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"imread"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'example.jpg'"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n",(0,a.jsxs)(n.span,{className:"line line-number",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"cv2"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"imwrite"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'bgr_image.jpg'"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", bgr_img)"})]}),"\n",(0,a.jsx)(n.span,{className:"line line-number"}),"\n",(0,a.jsx)(n.span,{className:"line line-number",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Convert BGR format to RGB format"})}),"\n",(0,a.jsxs)(n.span,{className:"line line-number",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"rgb_img "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" cv2"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"cvtColor"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(bgr_img, cv2.COLOR_BGR2RGB)"})]}),"\n",(0,a.jsxs)(n.span,{className:"line line-number",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"cv2"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"imwrite"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'rgb_image.jpg'"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", rgb_img)"})]}),"\n",(0,a.jsx)(n.span,{className:"line line-number"}),"\n",(0,a.jsx)(n.span,{className:"line line-number",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Convert BGR format to YUV444 format"})}),"\n",(0,a.jsxs)(n.span,{className:"line line-number",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"yuv_img "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" cv2"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"cvtColor"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(bgr_img, cv2.COLOR_BGR2YUV)"})]}),"\n",(0,a.jsxs)(n.span,{className:"line line-number",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"cv2"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"imwrite"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'yuv_image.jpg'"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", yuv_img)"})]}),"\n",(0,a.jsx)(n.span,{className:"line line-number"}),"\n",(0,a.jsx)(n.span,{className:"line line-number",children:(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Convert BGR format to GRAY format"})}),"\n",(0,a.jsxs)(n.span,{className:"line line-number",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"gray_img "}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" cv2"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"cvtColor"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(bgr_img, cv2.COLOR_BGR2GRAY)"})]}),"\n",(0,a.jsxs)(n.span,{className:"line line-number",children:[(0,a.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"cv2"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"imwrite"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'gray_image.jpg'"}),(0,a.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", gray_img)"})]}),"\n"]})})}),"\n",(0,a.jsxs)(n.p,{children:["We provide in the OE package between the common image format conversion source code (eg: RGB2NV12, BGR2RGB, etc.),\nimage processing commonly used transformer description of the document please refer to the user manual ",(0,a.jsx)(n.a,{href:"/3.0.22/en/guide/ptq/ptq_appendix/transformer.html",children:"Image Processing Transformer"})," ,\nThe corresponding source code is located under the ",(0,a.jsx)(n.code,{children:"samples/ai_toolchain/horizon_model_convert_sample/01_common/python/data"})," path of the OE development kit."]}),"\n",(0,a.jsx)(n.p,{children:"Different image formats have different performances and advantages and disadvantages, and in practice, you can personalize the selection of image formats according to your needs."}),"\n",(0,a.jsxs)(n.h2,{id:"reference-links",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#reference-links",children:"#"}),"Reference Links"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://blog.csdn.net/onion2007/article/details/46805335",target:"_blank",rel:"noopener noreferrer",children:"https://blog.csdn.net/onion2007/article/details/46805335"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/538058910",target:"_blank",rel:"noopener noreferrer",children:"https://zhuanlan.zhihu.com/p/538058910"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/248116694",target:"_blank",rel:"noopener noreferrer",children:"https://zhuanlan.zhihu.com/p/248116694"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://blog.csdn.net/zego_0616/article/details/126658494",target:"_blank",rel:"noopener noreferrer",children:"https://blog.csdn.net/zego_0616/article/details/126658494"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://blog.csdn.net/luoyingxing/article/details/108516163",target:"_blank",rel:"noopener noreferrer",children:"https://blog.csdn.net/luoyingxing/article/details/108516163"})}),"\n"]}),"\n"]})]})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,a.jsx)(n,Object.assign({},e,{children:(0,a.jsx)(c,e)})):c(e)}n.default=h,h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["3.0.22%2Fen%2Fguide%2Fappendix%2Fcommunity_articles%2Fcommon_image_format.mdx"]={toc:[{id:"introduction",text:"Introduction",depth:2},{id:"rgb",text:"RGB",depth:2},{id:"bgr",text:"BGR",depth:2},{id:"yuv",text:"YUV",depth:2},{id:"introduction-1",text:"Introduction",depth:3},{id:"yuv-common-format",text:"YUV Common Format",depth:3},{id:"yuv420-in-detail",text:"YUV420 in Detail",depth:3},{id:"nv12",text:"NV12",depth:2},{id:"gray",text:"Gray",depth:2},{id:"convert-between-image-formats",text:"Convert between image formats",depth:2},{id:"reference-links",text:"Reference Links",depth:2}],title:"Common Image Format",frontmatter:{}}},95895:function(e,n,i){i(39710);var a=i(85893),s=i(67294),r=i(45687);i(20388);let t={"zh-CN":e=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${e.minutes>=1?`${Math.ceil(e.minutes)} \u{5206}\u{949F}`:"\u5C0F\u4E8E 1 \u5206\u949F"}`,"en-US":e=>`Estimated reading time: ${e.minutes>=1?`${Math.ceil(e.minutes)} minutes`:"less than 1 minute"}`};function o(e,n,i){let a=Object.keys(t).includes(n)?n:i;return t[a](e)}n.Z=e=>{let{defaultLocale:n="en-US"}=e,i=(0,r.Vi)().page.readingTimeData,t=(0,r.Jr)(),l=(0,r.e7)(),[c,h]=(0,s.useState)(o(i,t,n));return(0,s.useEffect)(()=>{h(o(i,t,n))},[t,i]),(0,a.jsx)("span",{"data-dark":String(l),className:"rp-reading-time",children:c})}}}]);