"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["4741"],{74458:function(e,n,r){e.exports=r.p+"static/image/model_prepare.5dfa8a28.png"},13890:function(e,n,r){r.r(n);var t=r(85893),o=r(50065),s=r(95895),i=r(74458);function l(e){let n=Object.assign({h1:"h1",a:"a",p:"p",table:"table",thead:"thead",tr:"tr",th:"th",strong:"strong",tbody:"tbody",td:"td",ul:"ul",li:"li",code:"code",div:"div"},(0,o.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h1,{id:"prepare-floating-point-model",children:[(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#prepare-floating-point-model",children:"#"}),"Prepare Floating-point Model"]}),"\n",(0,t.jsx)(s.Z,{}),"\n",(0,t.jsxs)(n.p,{children:["Before you read this section, we recommend that you read ",(0,t.jsx)(n.a,{href:"/3.0.22/en/guide/appendix/supported_op_list/onnx_operator_support_list.html",children:"Toolchain Operator Support Constraint List-ONNX Operator Support List"})," section for an understanding of the operators and constraints supported by Horizon Robotics.\nOr, after you export your ONNX model, you can first refer to the ",(0,t.jsx)(n.a,{href:"/3.0.22/en/guide/ptq/ptq_usage/check_model.html",children:"Check the Model"})," section to check that the model can be deployed with Horizon support for normal conversion."]}),"\n",(0,t.jsx)(n.p,{children:"A floating-point model trained on an open source DL framework is the input to the conversion tool, which currently supports the following DL frameworks:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"FRAMEWORK"})}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"HORIZON'S TOOLCHAIN"})})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Caffe"}),(0,t.jsx)(n.td,{children:"Supported"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"PyTorch"}),(0,t.jsx)(n.td,{children:"Supported (convert into ONNX)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"TensorFlow"}),(0,t.jsx)(n.td,{children:"Supported (convert into ONNX)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"TensorFlow Lite"}),(0,t.jsx)(n.td,{children:"Supported (convert into ONNX)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"PaddlePaddle"}),(0,t.jsx)(n.td,{children:"Supported (convert into ONNX)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Others"}),(0,t.jsx)(n.td,{children:"Contact Horizon"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"As shown above, the caffemodel exported from Caffe framework can be supported directly, While the models trained from the rest frameworks must be first converted into ONNX before using the conversion tool. Presently Horizon supports ONNX opset10-19."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"For the Caffe model, you can first evaluate the floating-point model accuracy, confirm the correct model weights and structure."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"For the ONNX model, you need to preform the model inference using HBRuntime to verify the inference results\nare consistent between ONNX and the original DL framework model(i.e., make sure the model is legal)."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)("img",{src:i,width:"1000"}),"\n",(0,t.jsx)(n.p,{children:"There are standard solutions to convert models of different frameworks into ONNX, refer to the following:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Pytorch2Onnx: PyTorch's official API can support exporting models into ONNX models."}),"\n",(0,t.jsxs)(n.p,{children:["Click here to see more: ",(0,t.jsx)(n.a,{href:"https://pytorch.org/tutorials/advanced/super_resolution_with_onnxruntime.html",target:"_blank",rel:"noopener noreferrer",children:"https://pytorch.org/tutorials/advanced/super_resolution_with_onnxruntime.html"})," ."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Tensorflow2Onnx: Conversion based on the onnx/tensorflow-onnx of the ONNX community."}),"\n",(0,t.jsxs)(n.p,{children:["Click here to see more: ",(0,t.jsx)(n.a,{href:"https://github.com/onnx/tensorflow-onnx",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/onnx/tensorflow-onnx"})," ."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["TensorflowLite2Onnx: Conversion based on the open-source tool ",(0,t.jsx)(n.code,{children:"tflite2onnx"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Click here to see more: ",(0,t.jsx)(n.a,{href:"https://github.com/zhenhuaw-me/tflite2onnx",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/zhenhuaw-me/tflite2onnx"})," ."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"PaddlePaddle2Onnx: PaddlePaddle's official API can support exporting models into ONNX models."}),"\n",(0,t.jsxs)(n.p,{children:["Click here to see more: ",(0,t.jsx)(n.a,{href:"https://www.paddlepaddle.org.cn/documentation/docs/en/api/paddle/onnx/export_en.html",target:"_blank",rel:"noopener noreferrer",children:"https://www.paddlepaddle.org.cn/documentation/docs/en/api/paddle/onnx/export_en.html"})," ."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["More solutions to convert models of other frameworks into ONNX, you can click ",(0,t.jsx)(n.a,{href:"https://github.com/onnx/tutorials#converting-to-onnx-format",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/onnx/tutorials#converting-to-onnx-format"})," ."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,t.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,t.jsx)(n.div,{className:"rspress-directive-content",children:(0,t.jsxs)(n.p,{children:["Original model limitations: ir_version\u22649, 10\u2264opset=\u226419, for the correspondence between ir_version and onnx version, please refer to ",(0,t.jsx)(n.a,{href:"https://github.com/onnx/onnx/blob/main/docs/Versioning.md",target:"_blank",rel:"noopener noreferrer",children:"onnx official documentation"}),"."]})})]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(l,e)})):l(e)}n.default=d,d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["3.0.22%2Fen%2Fguide%2Fptq%2Fptq_usage%2Fmodel_prepare.mdx"]={toc:[],title:"Prepare Floating-point Model",frontmatter:{}}},95895:function(e,n,r){r(39710);var t=r(85893),o=r(67294),s=r(45687);r(20388);let i={"zh-CN":e=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${e.minutes>=1?`${Math.ceil(e.minutes)} \u{5206}\u{949F}`:"\u5C0F\u4E8E 1 \u5206\u949F"}`,"en-US":e=>`Estimated reading time: ${e.minutes>=1?`${Math.ceil(e.minutes)} minutes`:"less than 1 minute"}`};function l(e,n,r){let t=Object.keys(i).includes(n)?n:r;return i[t](e)}n.Z=e=>{let{defaultLocale:n="en-US"}=e,r=(0,s.Vi)().page.readingTimeData,i=(0,s.Jr)(),d=(0,s.e7)(),[c,a]=(0,o.useState)(l(r,i,n));return(0,o.useEffect)(()=>{a(l(r,i,n))},[i,r]),(0,t.jsx)("span",{"data-dark":String(d),className:"rp-reading-time",children:c})}}}]);