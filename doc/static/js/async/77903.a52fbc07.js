"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["77903"],{71158:function(e,n,s){e.exports=s.p+"static/image/yolov5.dccd8fd0.png"},73282:function(e,n,s){s.r(n);var r=s(85893),i=s(50065),t=s(95895),o=s(71158);function l(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",code:"code",h3:"h3",h4:"h4",table:"table",thead:"thead",tr:"tr",th:"th",strong:"strong",tbody:"tbody",td:"td",div:"div",ol:"ol",li:"li",ul:"ul",em:"em",pre:"pre",span:"span"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"common-algorithm-model-samples",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#common-algorithm-model-samples",children:"#"}),"Common Algorithm Model Samples"]}),"\n",(0,r.jsx)(t.Z,{}),"\n",(0,r.jsxs)(n.h2,{id:"sample-location",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#sample-location",children:"#"}),"Sample Location"]}),"\n",(0,r.jsxs)(n.p,{children:["The common algorithmic model samples are located at ",(0,r.jsx)(n.code,{children:"02_preq_examples/"}),", ",(0,r.jsx)(n.code,{children:"03_classification/"}),", ",(0,r.jsx)(n.code,{children:"04_detection/"})," and ",(0,r.jsx)(n.code,{children:"07_segmentation/"})," folders in the ",(0,r.jsx)(n.code,{children:"horizon_model_convert_sample"})," path."]}),"\n",(0,r.jsxs)(n.h3,{id:"prepare_ptq_dataset",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#prepare_ptq_dataset",children:"#"}),"Prepare Datasets"]}),"\n",(0,r.jsxs)(n.h4,{id:"dataset-download-address",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#dataset-download-address",children:"#"}),"Dataset Download Address"]}),"\n",(0,r.jsx)(n.p,{children:"The dataset can be downloaded from the following address."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Dataset"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Address"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ImageNet"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://www.image-net.org/download.php",target:"_blank",rel:"noopener noreferrer",children:"https://www.image-net.org/download.php"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"COCO"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://cocodataset.org/",target:"_blank",rel:"noopener noreferrer",children:"https://cocodataset.org/"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"VOC"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.a,{href:"http://host.robots.ox.ac.uk/pascal/VOC/",target:"_blank",rel:"noopener noreferrer",children:"http://host.robots.ox.ac.uk/pascal/VOC/"})," (need to download both versions 2007 and 2012)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cityscapes"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://github.com/mcordts/cityscapesScripts",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/mcordts/cityscapesScripts"})})]})]})]}),"\n","\n",(0,r.jsxs)(n.h4,{id:"ptq_dataset_structure",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#ptq_dataset_structure",children:"#"}),"Dataset Reference Structure"]}),"\n",(0,r.jsx)(n.p,{children:"To facilitate your subsequent steps, after the dataset has been downloaded, you need to process the evaluation dataset according to the structure suggested by Horizon below."}),"\n",(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Dataset"}),(0,r.jsx)("td",{children:"Description"})]})}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"ImageNet Dataset"}),(0,r.jsxs)("td",{children:[(0,r.jsxs)(n.p,{children:["We recommend that you unzip the downloaded dataset into the following structure. Please contact Horizon if you encounter any problems during data preparation. ",(0,r.jsx)("br",{})]}),(0,r.jsx)("pre",{children:(0,r.jsx)(n.p,{children:"imagenet/\n\u251C\u2500\u2500 calibration_data\n\u2502   \u251C\u2500\u2500 ILSVRC2012_val_00000001.JPEG\n\u2502   \u251C\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 ILSVRC2012_val_00000100.JPEG\n\u251C\u2500\u2500 ILSVRC2017_val.txt\n\u251C\u2500\u2500 val\n\u2502   \u251C\u2500\u2500 ILSVRC2012_val_00000001.JPEG\n\u2502   \u251C\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 ILSVRC2012_val_00050000.JPEG\n\u2514\u2500\u2500 val.txt"})})]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"COCO Dataset"}),(0,r.jsxs)("td",{children:[(0,r.jsxs)(n.p,{children:["We recommend that you unzip the downloaded dataset into the following structure. Please contact Horizon if you encounter any problems during data preparation. ",(0,r.jsx)("br",{})]}),(0,r.jsx)("pre",{children:(0,r.jsx)(n.p,{children:"coco/\n\u251C\u2500\u2500 calibration_data\n\u2502   \u251C\u2500\u2500 COCO_val2014_000000181007.jpg\n\u2502   \u251C\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 COCO_val2014_000000181739.jpg\n\u2514\u2500\u2500 coco_val2017\n\u251C\u2500\u2500 annotations\n\u2502   \u251C\u2500\u2500 instances_train2017.json\n\u2502   \u2514\u2500\u2500 instances_val2017.json\n\u2514\u2500\u2500 images\n\u251C\u2500\u2500 000000000139.jpg\n\u251C\u2500\u2500 000000000285.jpg\n\u251C\u2500\u2500 ...\n\u251C\u2500\u2500 000000581615.jpg\n\u2514\u2500\u2500 000000581781.jpg"})})]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"VOC Dataset"}),(0,r.jsxs)("td",{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)("span",{style:{color:"red"},children:"Attention"}),(0,r.jsx)("br",{}),"\nPlease note that the VOC2012 directory currently stores two datasets, VOC2007 and VOC2012, so please follow the directory structure below for the evaluation dataset. Please contact Horizon if you encounter any problems during data preparation.",(0,r.jsx)("br",{})]}),(0,r.jsx)("pre",{children:(0,r.jsx)(n.p,{children:"VOCdevkit/\n\u2514\u2500\u2500 VOC2012\n\u251C\u2500\u2500 Annotations\n\u2502   \u251C\u2500\u2500 2007_000027.xml\n\u2502   \u251C\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 2012_004331.xml\n\u251C\u2500\u2500 ImageSets\n\u2502   \u251C\u2500\u2500 Action\n\u2502   \u2502   \u251C\u2500\u2500 jumping_train.txt\n\u2502   \u2502   \u251C\u2500\u2500 jumping_trainval.txt\n\u2502   \u2502   \u251C\u2500\u2500 jumping_val.txt\n\u2502   \u2502   \u251C\u2500\u2500 ...\n\u2502   \u2502   \u251C\u2500\u2500 val.txt\n\u2502   \u2502   \u251C\u2500\u2500 walking_train.txt\n\u2502   \u2502   \u251C\u2500\u2500 walking_trainval.txt\n\u2502   \u2502   \u2514\u2500\u2500 walking_val.txt\n\u2502   \u251C\u2500\u2500 Layout\n\u2502   \u2502   \u251C\u2500\u2500 train.txt\n\u2502   \u2502   \u251C\u2500\u2500 trainval.txt\n\u2502   \u2502   \u2514\u2500\u2500 val.txt\n\u2502   \u251C\u2500\u2500 Main\n\u2502   \u2502   \u251C\u2500\u2500 aeroplane_train.txt\n\u2502   \u2502   \u251C\u2500\u2500 aeroplane_trainval.txt\n\u2502   \u2502   \u251C\u2500\u2500 aeroplane_val.txt\n\u2502   \u2502   \u251C\u2500\u2500 ...\n\u2502   \u2502   \u251C\u2500\u2500 train.txt\n\u2502   \u2502   \u251C\u2500\u2500 train_val.txt\n\u2502   \u2502   \u251C\u2500\u2500 trainval.txt\n\u2502   \u2502   \u251C\u2500\u2500 tvmonitor_train.txt\n\u2502   \u2502   \u251C\u2500\u2500 tvmonitor_trainval.txt\n\u2502   \u2502   \u251C\u2500\u2500 tvmonitor_val.txt\n\u2502   \u2502   \u2514\u2500\u2500 val.txt\n\u2502   \u2514\u2500\u2500 Segmentation\n\u2502       \u251C\u2500\u2500 train.txt\n\u2502       \u251C\u2500\u2500 trainval.txt\n\u2502       \u2514\u2500\u2500 val.txt\n\u251C\u2500\u2500 JPEGImages\n\u2502   \u251C\u2500\u2500 2007_000027.jpg\n\u2502   \u251C\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 2012_004331.jpg\n\u251C\u2500\u2500 SegmentationClass\n\u2502   \u251C\u2500\u2500 2007_000032.png\n\u2502   \u251C\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 2011_003271.png\n\u251C\u2500\u2500 SegmentationObject\n\u2502   \u251C\u2500\u2500 2007_000032.png\n\u2502   \u251C\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 2011_003271.png\n\u2514\u2500\u2500 train.txt"})})]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Cityscapes Dataset"}),(0,r.jsxs)("td",{children:[(0,r.jsxs)(n.p,{children:["We recommend that you unzip the downloaded dataset into the following structure. Please contact Horizon if you encounter any problems during data preparation.",(0,r.jsx)("br",{})]}),(0,r.jsx)("pre",{children:(0,r.jsx)(n.p,{children:"cityscapes/\n\u251C\u2500\u2500 cityscapes_calibration_data\n\u2502   \u251C\u2500\u2500 aachen_000000_000019_leftImg8bit.png\n\u2502   \u251C\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 aachen_000099_000019_leftImg8bit.png\n\u251C\u2500\u2500 gtFine\n\u2502   \u251C\u2500\u2500 test\n\u2502   \u2502   \u251C\u2500\u2500 berlin\n\u2502   \u2502   \u251C\u2500\u2500 ...\n\u2502   \u2502   \u2514\u2500\u2500 munich\n\u2502   \u251C\u2500\u2500 train\n\u2502   \u2502   \u251C\u2500\u2500 aachen\n\u2502   \u2502   \u251C\u2500\u2500 ...\n\u2502   \u2502   \u2514\u2500\u2500 zurich\n\u2502   \u2514\u2500\u2500 val\n\u2502       \u251C\u2500\u2500 frankfurt\n\u2502       \u251C\u2500\u2500 lindau\n\u2502       \u2514\u2500\u2500 munster\n\u251C\u2500\u2500 leftImg8bit\n\u2502   \u251C\u2500\u2500 test\n\u2502   \u2502   \u251C\u2500\u2500 berlin\n\u2502   \u2502   \u251C\u2500\u2500 ...\n\u2502   \u2502   \u2514\u2500\u2500 munich\n\u2502   \u251C\u2500\u2500 train\n\u2502   \u2502   \u251C\u2500\u2500 aachen\n\u2502   \u2502   \u251C\u2500\u2500 ...\n\u2502   \u2502   \u2514\u2500\u2500 zurich\n\u2502   \u2514\u2500\u2500 val\n\u2502       \u251C\u2500\u2500 frankfurt\n\u2502       \u251C\u2500\u2500 lindau\n\u2502       \u2514\u2500\u2500 munster\n\u251C\u2500\u2500 license.txt\n\u2514\u2500\u2500 README"})})]})]})]})]}),"\n",(0,r.jsxs)(n.h2,{id:"prepare_ptq_model",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#prepare_ptq_model",children:"#"}),"Prepare Models"]}),"\n",(0,r.jsx)(n.p,{children:"When using the model conversion sample package, please prepare the corresponding floating-point model first."}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive info",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Note"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["If you need to do this process in the sample folder, you need to execute the ",(0,r.jsx)(n.code,{children:"00_init.sh"})," script in the folder first to get the corresponding original model and dataset."]})})]}),"\n",(0,r.jsx)(n.p,{children:"Sources and modifications (if any) of the original models, please refer to below subsections."}),"\n",(0,r.jsxs)(n.h3,{id:"mobilenetv1",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#mobilenetv1",children:"#"}),"MobileNetv1"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/shicai/MobileNet-Caffe",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/shicai/MobileNet-Caffe"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"3fd6889ec48bda46451d67274144e2a8"}),(0,r.jsx)(n.td,{children:"mobilenet.caffemodel"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"8922f90f629d428fecf866e798ac7c08"}),(0,r.jsx)(n.td,{children:"mobilenet_deploy.prototxt"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"mobilenetv2",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#mobilenetv2",children:"#"}),"MobileNetv2"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/shicai/MobileNet-Caffe",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/shicai/MobileNet-Caffe"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"54aab8425ea068d472e8e4015f22360c"}),(0,r.jsx)(n.td,{children:"mobilenet_v2.caffemodel"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"13101ee86ab6d217d5fd6ed46f7a4faa"}),(0,r.jsx)(n.td,{children:"mobilenet_v2_deploy.prototxt"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"resnet50",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#resnet50",children:"#"}),"ResNet50"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://pytorch.org/vision/main/models/generated/torchvision.models.resnet50.html",target:"_blank",rel:"noopener noreferrer",children:"https://pytorch.org/vision/main/models/generated/torchvision.models.resnet50.html"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ebaeb70c972d1a3e6eb06c0e1541eeb4"}),(0,r.jsx)(n.td,{children:"resnet50.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"googlenet",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#googlenet",children:"#"}),"GoogleNet"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/GoogleNet",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/GoogleNet"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"f107ae6806ea1016afbc718210b7a617"}),(0,r.jsx)(n.td,{children:"googlenet.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"efficientnet_lite01234",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#efficientnet_lite01234",children:"#"}),"EfficientNet_Lite0/1/2/3/4"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To quickly start running samples and avoid the risks caused by third party tools, we strongly recommend using the off-the-shelf ONNX model in the ",(0,r.jsx)(n.strong,{children:"model_zoo/mapper/"})," directory in Horizon model release package.\nIf you are interested in reproducing the model conversion process of tflite2onnx, you can still try using the below 3rd-party tool, however, we do not guarantee the quality and success of the conversion."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: obtain the TAR package from ",(0,r.jsx)(n.a,{href:"https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/tensorflow/tpu/tree/master/models/official/efficientnet/lite"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum of the converted ONNX models in Horizon model_zoo:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"001a329bd367fbec22b415c7a33d7bdb"}),(0,r.jsx)(n.td,{children:"efficientnet_lite0_fp32.onnx"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1205e95aea66650c71292bde236d55a9"}),(0,r.jsx)(n.td,{children:"efficientnet_lite1_fp32.onnx"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"474741c15494b79a89fe51d89e0c43c7"}),(0,r.jsx)(n.td,{children:"efficientnet_lite2_fp32.onnx"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"550455b41848d333f8359279c89a6bae"}),(0,r.jsx)(n.td,{children:"efficientnet_lite3_fp32.onnx"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"bde7fe57eadb4a30ef76f68da622dcd5"}),(0,r.jsx)(n.td,{children:"efficientnet_lite4_fp32.onnx"})]})]})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Download and get ",(0,r.jsx)(n.code,{children:".tflite"})," from the TAR package, and then convert it to an ONNX model using the tflite2onnx tool (",(0,r.jsx)(n.a,{href:"https://pypi.org/project/tflite2onnx/",target:"_blank",rel:"noopener noreferrer",children:"https://pypi.org/project/tflite2onnx/"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Note that model layouts may vary by tflite2onnx version. If the input layout of the converted ONNX model is NHWC, when building, the configure ",(0,r.jsx)(n.code,{children:"input_layout_train"})," of the EfficientNet_Lite0/1/2/3/4 should be NHWC."]}),"\n",(0,r.jsxs)(n.h3,{id:"vargconvnet",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#vargconvnet",children:"#"}),"Vargconvnet"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/VargConvNet",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/VargConvNet"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"e21b8db17916f9046253bbe0bb8de3ef"}),(0,r.jsx)(n.td,{children:"vargconvnet.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"efficientnasnet_m",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#efficientnasnet_m",children:"#"}),"Efficientnasnet_m"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/EfficientnasNet",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/EfficientnasNet"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"fc36c052c6f034c0b64a6197b91b0c62"}),(0,r.jsx)(n.td,{children:"efficientnasnet-m.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"efficientnasnet_s",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#efficientnasnet_s",children:"#"}),"Efficientnasnet_s"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/EfficientnasNet",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/EfficientnasNet"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"e2744bd748f4265f4488676835a6ca24"}),(0,r.jsx)(n.td,{children:"efficientnasnet-s.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"resnet18",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#resnet18",children:"#"}),"ResNet18"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://pytorch.org/vision/main/models/generated/torchvision.models.resnet18.html",target:"_blank",rel:"noopener noreferrer",children:"https://pytorch.org/vision/main/models/generated/torchvision.models.resnet18.html"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"62de4ff68317c65ab4bb6a451e719e6d"}),(0,r.jsx)(n.td,{children:"resnet18.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"yolov2_darknet19",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#yolov2_darknet19",children:"#"}),"YOLOv2_Darknet19"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["To quickly start running samples and avoid the risks caused by third party tools, we strongly recommend using the off-the-shelf Caffe model in the ",(0,r.jsx)(n.strong,{children:"model_zoo/mapper/"})," directory in Horizon model release package. If you are interested in reproducing the model conversion process of darknet2caffe, you can still try using the below 3rd-party tool, however, we do not guarantee the quality and success of the conversion."]}),"\n",(0,r.jsxs)(n.li,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Dequantize"})," node from the hbm model."]}),"\n"]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["To get YOLOv2_Darknet19, first download the .cfg and .weight files of YOLOv2 608x608 from YOLO's official website (",(0,r.jsx)(n.a,{href:"https://pjreddie.com/darknet/yolo/",target:"_blank",rel:"noopener noreferrer",children:"https://pjreddie.com/darknet/yolo/"}),") and convert it to a Caffe model using the ",(0,r.jsx)(n.em,{children:"darknet2caffe"})," conversion tool (",(0,r.jsx)(n.a,{href:"https://github.com/xingyanan/darknet2caffe",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/xingyanan/darknet2caffe"}),")."]}),"\n"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive info",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Note"}),(0,r.jsxs)(n.div,{className:"rspress-directive-content",children:[(0,r.jsxs)(n.p,{children:["As this conversion tool is a simplified version, you should modify the .prototxt file generated by this tool before the conversion, change the ",(0,r.jsx)(n.code,{children:"'Reshape'"})," layer to ",(0,r.jsx)(n.code,{children:"'Passthrough'"})," layer, and then add an ",(0,r.jsx)(n.code,{children:"NCHW2NHWC Permute"})," operation to the output node."]}),(0,r.jsxs)(n.p,{children:["For details about the parameters of the modified ",(0,r.jsx)(n.code,{children:"Passthrough"})," layer, refer to the ",(0,r.jsx)(n.code,{children:"yolov2.prototxt"})," sample."]})]})]}),"\n",(0,r.jsx)(n.p,{children:"2.md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"7aa7a6764401cebf58e73e72fcbd2a45"}),(0,r.jsx)(n.td,{children:"yolov2.caffemodel"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"72e9a51c1e284e4b66e69f72ca9214c8"}),(0,r.jsx)(n.td,{children:"yolov2_transposed.prototxt"})]})]})]}),"\n",(0,r.jsxs)(n.h3,{id:"yolov3_darknet53",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#yolov3_darknet53",children:"#"}),"YOLOv3_Darknet53"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Dequantize"})," node from the hbm model."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"YOLOv3_Darknet53 model:"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["URL: ",(0,r.jsx)(n.a,{href:"https://github.com/ChenYingpeng/caffe-yolov3/",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/ChenYingpeng/caffe-yolov3/"})," ."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"caffemodel"})," file can be downloaded from the Baidu Cloud URL provided in the README.md file in GitHub, in which you should add an ",(0,r.jsx)(n.code,{children:"NCHW2NHWC Permute"})," operation to the output node."]}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"935af6e1530af5c0017b3674adce95e9"}),(0,r.jsx)(n.td,{children:"yolov3_transposed.prototxt"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"9a0f09c850656913ec27a6da06d9f9cc"}),(0,r.jsx)(n.td,{children:"yolov3.caffemodel"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"yolov5x",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#yolov5x",children:"#"}),"YOLOv5x"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Dequantize"})," node from the hbm model."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["YOLOv5x model: Download the corresponding pt file from ",(0,r.jsx)(n.a,{href:"https://github.com/ultralytics/yolov5/releases/tag/v2.0",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/ultralytics/yolov5/releases/tag/v2.0"})]}),"\n"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Important"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["When cloning the source code, be sure to use ",(0,r.jsx)("span",{style:{color:"red"},children:"[v2.0]"})," tags, otherwise the conversion may fail."]})})]}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2e296b5e31bf1e1b6b8ea4bf36153ea5"}),(0,r.jsx)(n.td,{children:"yolov5l.pt"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"16150e35f707a2f07e7528b89c032308"}),(0,r.jsx)(n.td,{children:"yolov5m.pt"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"42c681cf466c549ff5ecfe86bcc491a0"}),(0,r.jsx)(n.td,{children:"yolov5s.pt"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"069a6baa2a741dec8a2d44a9083b6d6e"}),(0,r.jsx)(n.td,{children:"yolov5x.pt"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["To better adapt to post-processing code, before exporting the ONNX model, we modified the code at Github as follows (for more code details see: ",(0,r.jsx)(n.a,{href:"https://github.com/ultralytics/yolov5/blob/v2.0/models/yolo.py",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/ultralytics/yolov5/blob/v2.0/models/yolo.py"}),"):"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"forward"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"x"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# x = x.copy()  # for profiling"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    z "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" []  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# inference output"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    self"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"training "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" self"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"export"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" i "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"in"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"range"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(self.nl):"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        x"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"i"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" self"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"m"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"i"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"](x[i])"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# conv"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        bs"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" _"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ny"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" nx "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" x"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"i"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"shape  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# x(bs,255,20,20) to x(bs,3,20,20,85)"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"#  x[i] = x[i].view(bs, self.na, self.no, ny, nx).permute(0, 1, 3, 4, 2).contiguous()"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        x"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"i"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" x"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"i"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"permute"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"contiguous"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n"]})})}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive info",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Note"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["Remove the ",(0,r.jsx)(n.code,{children:"reshape"})," from 4D to 5D at the end of each output branch (i.e., not splitting the channel from 255 to 3x85), then convert the layout from NHWC to NCHW before dumping."]})})]}),"\n",(0,r.jsx)(n.p,{children:"The bottom left image displays the visualization of a certain output node before modifying the model, while the bottom right image displays the visualization of the corresponding output node after the modification."}),"\n",(0,r.jsx)("img",{src:o,height:"600",width:"600"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["After download, perform the pt to ONNX file conversion using the script ",(0,r.jsx)(n.a,{href:"https://github.com/ultralytics/yolov5/blob/v2.0/models/export.py",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/ultralytics/yolov5/blob/v2.0/models/export.py"})," ."]}),"\n"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsxs)(n.div,{className:"rspress-directive-content",children:[(0,r.jsx)(n.p,{children:"When using the export.py script:"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Because Horizon algorithm toolchain only supports ONNX opset ",(0,r.jsx)("span",{style:{color:"red"},children:"[10]"})," ~ ",(0,r.jsx)("span",{style:{color:"red"},children:"[19]"}),", please modify the ",(0,r.jsx)(n.code,{children:"opset_version"})," parameter in the ",(0,r.jsx)(n.code,{children:"torch.onnx.export"})," as per the version you use."]}),"\n",(0,r.jsxs)(n.li,{children:["Change the default input name parameter in the ",(0,r.jsx)(n.code,{children:"torch.onnx.export"})," from ",(0,r.jsx)(n.code,{children:"'image'"})," into ",(0,r.jsx)(n.code,{children:"'data'"})," to keep it consistent with that of in the YOLOv5s sample in the model conversion sample package."]}),"\n",(0,r.jsxs)(n.li,{children:["Change the default data input size in the ",(0,r.jsx)(n.code,{children:"parser.add_argument"})," from 640x640 to 672x672 as in the YOLOv5x sample in the model conversion sample package."]}),"\n"]})]})]}),"\n",(0,r.jsxs)(n.h3,{id:"ssd_mobilenetv1",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#ssd_mobilenetv1",children:"#"}),"SSD_MobileNetv1"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Dequantize"})," node from the hbm model."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["SSD_MobileNetv1 model: Obtain the Caffe model from URL: ",(0,r.jsx)(n.a,{href:"https://github.com/chuanqi305/MobileNet-SSD",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/chuanqi305/MobileNet-SSD"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"bbcb3b6a0afe1ec89e1288096b5b8c66"}),(0,r.jsx)(n.td,{children:"mobilenet_iter_73000.caffemodel"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"3c230e4415195a50c6248be80c49882d"}),(0,r.jsx)(n.td,{children:"MobileNetSSD_deploy.prototxt"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"efficientdetd0",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#efficientdetd0",children:"#"}),"Efficientdetd0"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Dequantize"})," node from the hbm model."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/EfficientDet",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/EfficientDet"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ec4129c4b300cd04f1e8f71e0fe54ca5"}),(0,r.jsx)(n.td,{children:"efficientdet_nhwc.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"centernet_resnet101",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#centernet_resnet101",children:"#"}),"CenterNet_Resnet101"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsxs)(n.div,{className:"rspress-directive-content",children:[(0,r.jsx)(n.p,{children:"To achieve optimal on-board performance:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"We put the maxpool and sigmoid nodes into the model and specify them to be compiled as BPU nodes for reducing the amount of computation during post-processing."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["We modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Dequantize"})," node from the hbm model."]}),"\n"]}),"\n"]})]})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Centernet",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Centernet"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"db195ff784792f475e573c5126401d2a"}),(0,r.jsx)(n.td,{children:"centernet_resnet101_coco_modify.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"fcos_efficientnetb0",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#fcos_efficientnetb0",children:"#"}),"Fcos_efficientnetb0"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"This model is a trained model using the PTQ method."}),"\n",(0,r.jsxs)(n.li,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Dequantize"})," node from the hbm model."]}),"\n"]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/blob/master/Fcos_Efficientnetb0",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/blob/master/Fcos_Efficientnetb0"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"9f9a1fe8508e2bd068e70146eb559b4f"}),(0,r.jsx)(n.td,{children:"fcos_efficientnetb0.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"yolov4",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#yolov4",children:"#"}),"Yolov4"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Dequantize"})," node from the hbm model."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/YoloV4",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/YoloV4"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"aaa3c3e5e4c4c1d4830b6501b1720e4d"}),(0,r.jsx)(n.td,{children:"yolov4_efficientnetb0.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"yolov3_vargdarknet",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#yolov3_vargdarknet",children:"#"}),"YOLOv3_VargDarknet"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Dequantize"})," node from the hbm model."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"YOLOv3_VargDarknet model"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["URL: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Yolov3_VargDarknet",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Yolov3_VargDarknet"})," . The model file can be downloaded from the Baidu Cloud URL provided in the README.md file in GitHub."]}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"fd4e46bc7c9798b51778d3aa09c5053a"}),(0,r.jsx)(n.td,{children:"yolov3_vargdarknet53.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"fcos_resnet50",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#fcos_resnet50",children:"#"}),"Fcos_resnet50"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Dequantize"})," node from the hbm model."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Fcos_Resnet50",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Fcos_Resnet50"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"0218942777615fac2f54cefdac4fbfa7"}),(0,r.jsx)(n.td,{children:"fcos_resnet50.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"fcos_resnext101",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#fcos_resnext101",children:"#"}),"Fcos_resnext101"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Dequantize"})," node from the hbm model."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Fcos_Resnext101",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/Fcos_Resnext101"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"4b80efd22448021721ac5a860909c59f"}),(0,r.jsx)(n.td,{children:"fcos_resnext101.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"unet_mobilenet",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#unet_mobilenet",children:"#"}),"Unet_mobilenet"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Dequantize"})," node from the hbm model."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/MobilenetUnet",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/MobilenetUnet"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"21c6c645ebca92befbebc8c39d385c1e"}),(0,r.jsx)(n.td,{children:"tf_unet_trained.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"deeplabv3plus_efficientnetb0",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#deeplabv3plus_efficientnetb0",children:"#"}),"DeeplabV3plus_efficientnetb0"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Reshape"})," and ",(0,r.jsx)(n.code,{children:"Cast"})," node from the hbm model."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/DeeplabV3Plus",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/DeeplabV3Plus"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"cf3a683f31b4b0ebe090647729f869d9"}),(0,r.jsx)(n.td,{children:"deeplabv3plus_efficientnetb0.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"fastscnn_efficientnetb0",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#fastscnn_efficientnetb0",children:"#"}),"Fastscnn_efficientnetb0"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Reshape"})," and ",(0,r.jsx)(n.code,{children:"Cast"})," node from the hbm model."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/FastSCNN",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/FastSCNN"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"c1ace8f08a9c7b9c91509fa68327d0c8"}),(0,r.jsx)(n.td,{children:"fastscnn_efficientnetb0.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"deeplabv3plus_dilation1248",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#deeplabv3plus_dilation1248",children:"#"}),"Deeplabv3plus_dilation1248"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Transpose"})," node from the hbm model."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/DeeplabV3Plus",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/DeeplabV3Plus"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ad002e572cbb49e1e99d893aac69f3e3"}),(0,r.jsx)(n.td,{children:"deeplabv3_cityscapes_dila1248_permute.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"deeplabv3plus_efficientnetm1",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#deeplabv3plus_efficientnetm1",children:"#"}),"Deeplabv3plus_efficientnetm1"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Reshape"}),", ",(0,r.jsx)(n.code,{children:"Cast"}),", and ",(0,r.jsx)(n.code,{children:"Transpose"})," node from the hbm model."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/DeeplabV3Plus",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/DeeplabV3Plus"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"0a1dfd01e173c68630d9e8dc1a6036fe"}),(0,r.jsx)(n.td,{children:"deeplabv3plus_efficientnetm1.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"deeplabv3plus_efficientnetm2",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#deeplabv3plus_efficientnetm2",children:"#"}),"Deeplabv3plus_efficientnetm2"]}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["To achieve optimal on-board performance, we modified the ",(0,r.jsx)(n.code,{children:"remove_node_type"})," parameter in the YAML file used for hbm model compilation and removed the ",(0,r.jsx)(n.code,{children:"Reshape"}),", ",(0,r.jsx)(n.code,{children:"Cast"}),", and ",(0,r.jsx)(n.code,{children:"Transpose"})," node from the hbm model."]})})]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["model source: ",(0,r.jsx)(n.a,{href:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/DeeplabV3Plus",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/HorizonRobotics-Platform/ModelZoo/tree/master/DeeplabV3Plus"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"md5sum code:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"md5sum"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"File"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"c11a2673c4b3cf6e5d7bf1a051925d38"}),(0,r.jsx)(n.td,{children:"deeplabv3plus_efficientnetm2.onnx"})]})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"demo-of-algorithm-model-samples",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#demo-of-algorithm-model-samples",children:"#"}),"Demo Of Algorithm Model Samples"]}),"\n",(0,r.jsxs)(n.p,{children:["Taking the ",(0,r.jsx)(n.code,{children:"Resnet50"})," model as an example, This section illustrates the steps of floating-point to fixed-point model conversion by using the scripts in ",(0,r.jsx)(n.code,{children:"03_classification/03_resnet50/"}),"."]}),"\n",(0,r.jsxs)(n.h3,{id:"docker-container-prep",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#docker-container-prep",children:"#"}),"Docker Container Prep"]}),"\n",(0,r.jsxs)(n.p,{children:["First complete the docker installation and configuration and enter the docker container accoridng to ",(0,r.jsx)(n.a,{href:"/3.0.22/en/guide/env_install.html",children:"Docker Container Deployment"})," ."]}),"\n",(0,r.jsxs)(n.h3,{id:"obtain-the-original-model-and-calibration-dataset",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#obtain-the-original-model-and-calibration-dataset",children:"#"}),"Obtain The Original Model And Calibration Dataset"]}),"\n",(0,r.jsxs)(n.p,{children:["Execute ",(0,r.jsx)(n.code,{children:"00_init.sh"})," in the ",(0,r.jsx)(n.code,{children:"03_classification/03_resnet50/"})," folder to obtain the model and calibration dataset needed for the current sample."]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-bash",meta:"",children:[(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# 1. Enter the folder the demo script resides"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"samples/ai_toolchain/horizon_model_convert_sample/03_classification/03_resnet50/"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# 2. Execute the script to obtain the original model and calibration dataset"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"sh"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"00"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"_init.sh"})]}),"\n"]})})}),"\n",(0,r.jsxs)(n.h3,{id:"check-if-the-model-is-executable",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#check-if-the-model-is-executable",children:"#"}),"Check If the Model is Executable"]}),"\n",(0,r.jsx)(n.p,{children:"1.Run the script as follows:"}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-bash",meta:"",children:[(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Execute model checking"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"sh"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"01"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"_check.sh"})]}),"\n"]})})}),"\n",(0,r.jsx)(n.p,{children:"2.Output the model inspection result:"}),"\n",(0,r.jsxs)(n.p,{children:["Use the ",(0,r.jsx)(n.code,{children:"hb_compile"})," tool to check whether the model can be supported by Horizon ASIC."]}),"\n","\n",(0,r.jsxs)(n.h3,{id:"prepare-calibration-dataset",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#prepare-calibration-dataset",children:"#"}),"Prepare Calibration Dataset"]}),"\n",(0,r.jsxs)(n.p,{children:["Run the ",(0,r.jsx)(n.code,{children:"02_preprocess.sh"})," script in the same directory, as follows:"]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-bash",meta:"",children:[(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Convert the images in 01_common/data/imagenet/calibration_data"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# to: ./calibration_data_rgb_f32"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"sh"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"02"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"_preprocess.sh"})]}),"\n"]})})}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive info",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Note"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["We extracted 100 images from the ImageNet dataset and use them as a calibration dataset. Before calibration, we pre-processed the data and convert ",(0,r.jsx)(n.strong,{children:"short size resize/crop size/NHWC to NCHW/to rgb"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"hb_compile"})," tool will load data from the converted binary data, the format of the pre-processed binary data file is ",(0,r.jsx)(n.a,{href:"https://numpy.org/devdocs/reference/generated/numpy.lib.format.html#npy-format",target:"_blank",rel:"noopener noreferrer",children:"npy"}),", the dtype is ",(0,r.jsx)(n.code,{children:"unit8"}),"."]}),"\n"]})})]}),"\n",(0,r.jsxs)(n.h3,{id:"building-models",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#building-models",children:"#"}),"Building Models"]}),"\n",(0,r.jsxs)(n.p,{children:["Run the ",(0,r.jsx)(n.code,{children:"03_build.sh"})," script in the same directory, as follows:"]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-shell",meta:"",children:[(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"sh"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"03"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"_build.sh"})]}),"\n"]})})}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive info",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Note"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["The above script uses the ",(0,r.jsx)(n.code,{children:"hb_compile"})," tool to convert the model. The most important thing to focus on is the conversion configuration file, refer to ",(0,r.jsx)(n.a,{href:"/3.0.22/en/guide/ptq/ptq_tool/hb_compile/convert.html",children:"Model Quantized Compilation"})," section."]})})]}),"\n",(0,r.jsx)(n.p,{children:"The output of the above script is as follows:"}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-bash",meta:"",children:[(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ls"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"model_output"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"cat"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"resnet50_224x224_nv12.hbm"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"resnet50_224x224_nv12_calibrated_model.onnx"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"resnet50_224x224_nv12_ptq_model.onnx"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"resnet50_224x224_nv12_optimized_float_model.onnx"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"resnet50_224x224_nv12_original_float_model.onnx"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"resnet50_224x224_nv12_quantized_model.bc"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"resnet50_224x224_nv12.html"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"resnet50_224x224_nv12.json"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"resnet50_224x224_nv12_quant_info.json"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"resnet50_224x224_nv12_advice.json"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"resnet50_224x224_nv12_node_info.csv"})}),"\n"]})})}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive info",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Note"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.p,{children:["For now you ONLY need to focus on the ",(0,r.jsx)(n.strong,{children:"resnet50_224x224_nv12.hbm"})," file."]})})]}),"\n",(0,r.jsxs)(n.h3,{id:"single-image-inference",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#single-image-inference",children:"#"}),"Single Image Inference"]}),"\n",(0,r.jsxs)(n.p,{children:["Run the ",(0,r.jsx)(n.code,{children:"04_inference.sh"})," script to inference a single image, as follows:"]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-bash",meta:"",children:[(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"sh"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"04"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"_inference.sh"})]}),"\n"]})})}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive info",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Note"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["As image ",(0,r.jsx)(n.strong,{children:"pre-processing"}),", model data ",(0,r.jsx)(n.strong,{children:"post-processing"})," are required in the image inference, we offered a Python sample script, please refer to ",(0,r.jsx)(n.code,{children:"sh 04_inference.sh"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["This script is to perform the inference against a single image and verify whether the inference result meets the expectations. If you want to perform accuracy evaluation, refer to the script ",(0,r.jsx)(n.code,{children:"05_evaluate.sh"}),"."]}),"\n"]})})]}),"\n",(0,r.jsxs)(n.h3,{id:"accuracy-evaluation",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#accuracy-evaluation",children:"#"}),"Accuracy Evaluation"]}),"\n",(0,r.jsxs)(n.p,{children:["Run the ",(0,r.jsx)(n.code,{children:"05_evaluate.sh"})," script to evaluate the accuracy, as follows:"]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-bash",meta:"",children:[(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" PARALLEL_PROCESS_NUM"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"${parallel_process_num}"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"sh"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"05"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"_evaluate.sh"})]}),"\n"]})})}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive info",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Note"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["As image ",(0,r.jsx)(n.strong,{children:"pre-processing"}),", model data ",(0,r.jsx)(n.strong,{children:"post-processing"})," are required in accuracy evaluation, awe offered a Python sample script, please refer to ",(0,r.jsx)(n.code,{children:"sh 05_evaluate.sh"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["To accelerate the evaluation, you can adjust the number of concurrent processes by using the ",(0,r.jsx)(n.code,{children:"-p"})," option; meanwhile, pay attention to the memory usage. When the value of the ",(0,r.jsx)(n.code,{children:"-p"})," option is set to 0 or left unfilled, the fixed-point models in the CPU environment will be processed by 10 processes, while other scenarios using 1 process."]}),"\n"]})})]}),"\n",(0,r.jsxs)(n.h2,{id:"faq",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#faq",children:"#"}),"FAQ"]}),"\n",(0,r.jsxs)(n.h3,{id:"why-is-the-reproduced-accuracy-slightly-different-from-the-indicators-in-the-documentation",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#why-is-the-reproduced-accuracy-slightly-different-from-the-indicators-in-the-documentation",children:"#"}),"Why is the reproduced accuracy slightly different from the indicators in the documentation?"]}),"\n",(0,r.jsx)(n.p,{children:"There are two possible reasons:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"There may be minor differences in calculation methods when in different server environments, which can cause small data fluctuations in the accuracy of the compiled fixed-point ONNX models in different server environments when compared with the documentation."}),"\n",(0,r.jsx)(n.li,{children:"The different versions of third-party libraries such as OpenCV and NumPy, which may produce different results after pre-processing, and this may also lead to slight data fluctuations in reproduced accuracy when compared with the documentation."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"No need to worry much about this situation, the records provided in the documentation is only for reference, and it is ok that your reproduced accuracy is slightly different from those in documents."}),"\n",(0,r.jsxs)(n.h3,{id:"why-is-the-fixed-point-model-accuracy-not-aligned-with-the-on-board-accuracy-of-the-hbm-file-in-the-ai_benchmark-example",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#why-is-the-fixed-point-model-accuracy-not-aligned-with-the-on-board-accuracy-of-the-hbm-file-in-the-ai_benchmark-example",children:"#"}),"Why is the fixed-point model accuracy not aligned with the on-board accuracy of the hbm file in the ai_benchmark example?"]}),"\n",(0,r.jsx)(n.p,{children:"In the standard delivery, when adding the example, we have already aligned the fixed-point model accuracy with the hbm on-board accuracy in the ai_benchmark example."}),"\n",(0,r.jsx)(n.p,{children:"If you find any unaligned accuracy, we recommend you first checking the model input for consistency."}),"\n",(0,r.jsx)(n.p,{children:"When executing the fixed-point model evaluation script, you use the dataset of image type, while for the hbm model used on board, you use the binary dataset converted by the hb_eval_preprocess tool."}),"\n",(0,r.jsx)(n.p,{children:"Based on this, if the dataset you used on-board is not generated by using the above methods, we recommend that you first use our data preprocessing tool (i.e., hb_eval_preprocess) to regenerate the dataset\nneeded for on-board running on the same server that you run the fixed-point model accuracy and rerun the on-board accuracy to ensure the model inputs are consistent."}),"\n",(0,r.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,r.jsx)(n.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsx)(n.p,{children:"Make sure to use the same environment to generate the dataset by using the hb_eval_preprocess tool and to run the fixed-point model accuracy."})})]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(l,e)})):l(e)}n.default=d,d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["3.0.22%2Fen%2Fguide%2Fptq%2Fptq_sample%2Falgorithm_sample.mdx"]={toc:[{id:"sample-location",text:"Sample Location",depth:2},{id:"prepare_ptq_dataset",text:"Prepare Datasets",depth:3},{id:"dataset-download-address",text:"Dataset Download Address",depth:4},{id:"ptq_dataset_structure",text:"Dataset Reference Structure",depth:4},{id:"prepare_ptq_model",text:"Prepare Models",depth:2},{id:"mobilenetv1",text:"MobileNetv1",depth:3},{id:"mobilenetv2",text:"MobileNetv2",depth:3},{id:"resnet50",text:"ResNet50",depth:3},{id:"googlenet",text:"GoogleNet",depth:3},{id:"efficientnet_lite01234",text:"EfficientNet_Lite0/1/2/3/4",depth:3},{id:"vargconvnet",text:"Vargconvnet",depth:3},{id:"efficientnasnet_m",text:"Efficientnasnet_m",depth:3},{id:"efficientnasnet_s",text:"Efficientnasnet_s",depth:3},{id:"resnet18",text:"ResNet18",depth:3},{id:"yolov2_darknet19",text:"YOLOv2_Darknet19",depth:3},{id:"yolov3_darknet53",text:"YOLOv3_Darknet53",depth:3},{id:"yolov5x",text:"YOLOv5x",depth:3},{id:"ssd_mobilenetv1",text:"SSD_MobileNetv1",depth:3},{id:"efficientdetd0",text:"Efficientdetd0",depth:3},{id:"centernet_resnet101",text:"CenterNet_Resnet101",depth:3},{id:"fcos_efficientnetb0",text:"Fcos_efficientnetb0",depth:3},{id:"yolov4",text:"Yolov4",depth:3},{id:"yolov3_vargdarknet",text:"YOLOv3_VargDarknet",depth:3},{id:"fcos_resnet50",text:"Fcos_resnet50",depth:3},{id:"fcos_resnext101",text:"Fcos_resnext101",depth:3},{id:"unet_mobilenet",text:"Unet_mobilenet",depth:3},{id:"deeplabv3plus_efficientnetb0",text:"DeeplabV3plus_efficientnetb0",depth:3},{id:"fastscnn_efficientnetb0",text:"Fastscnn_efficientnetb0",depth:3},{id:"deeplabv3plus_dilation1248",text:"Deeplabv3plus_dilation1248",depth:3},{id:"deeplabv3plus_efficientnetm1",text:"Deeplabv3plus_efficientnetm1",depth:3},{id:"deeplabv3plus_efficientnetm2",text:"Deeplabv3plus_efficientnetm2",depth:3},{id:"demo-of-algorithm-model-samples",text:"Demo Of Algorithm Model Samples",depth:2},{id:"docker-container-prep",text:"Docker Container Prep",depth:3},{id:"obtain-the-original-model-and-calibration-dataset",text:"Obtain The Original Model And Calibration Dataset",depth:3},{id:"check-if-the-model-is-executable",text:"Check If the Model is Executable",depth:3},{id:"prepare-calibration-dataset",text:"Prepare Calibration Dataset",depth:3},{id:"building-models",text:"Building Models",depth:3},{id:"single-image-inference",text:"Single Image Inference",depth:3},{id:"accuracy-evaluation",text:"Accuracy Evaluation",depth:3},{id:"faq",text:"FAQ",depth:2},{id:"why-is-the-reproduced-accuracy-slightly-different-from-the-indicators-in-the-documentation",text:"Why is the reproduced accuracy slightly different from the indicators in the documentation?",depth:3},{id:"why-is-the-fixed-point-model-accuracy-not-aligned-with-the-on-board-accuracy-of-the-hbm-file-in-the-ai_benchmark-example",text:"Why is the fixed-point model accuracy not aligned with the on-board accuracy of the hbm file in the ai_benchmark example?",depth:3}],title:"Common Algorithm Model Samples",frontmatter:{}}},95895:function(e,n,s){s(39710);var r=s(85893),i=s(67294),t=s(45687);s(20388);let o={"zh-CN":e=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${e.minutes>=1?`${Math.ceil(e.minutes)} \u{5206}\u{949F}`:"\u5C0F\u4E8E 1 \u5206\u949F"}`,"en-US":e=>`Estimated reading time: ${e.minutes>=1?`${Math.ceil(e.minutes)} minutes`:"less than 1 minute"}`};function l(e,n,s){let r=Object.keys(o).includes(n)?n:s;return o[r](e)}n.Z=e=>{let{defaultLocale:n="en-US"}=e,s=(0,t.Vi)().page.readingTimeData,o=(0,t.Jr)(),d=(0,t.e7)(),[c,a]=(0,i.useState)(l(s,o,n));return(0,i.useEffect)(()=>{a(l(s,o,n))},[o,s]),(0,r.jsx)("span",{"data-dark":String(d),className:"rp-reading-time",children:c})}}}]);