"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["97980"],{34807:function(e,n,s){e.exports=s.p+"static/image/VP5out_vencode.22bc2d12.png"},40039:function(e,n,s){e.exports=s.p+"static/image/VP5out_vencode_1.e2791662.png"},46805:function(e,n,s){e.exports=s.p+"static/image/VP5out_vencode_2.619777df.png"},70455:function(e,n,s){e.exports=s.p+"static/image/VP5out_vencode_3.12d496c0.png"},1271:function(e,n,s){e.exports=s.p+"static/image/VP5out_vencode_4.81ea400f.png"},48235:function(e,n,s){s.r(n);var r=s(85893),i=s(50065),o=s(95895),l=s(34807),t=s(40039),a=s(46805),c=s(1271),h=s(70455);function d(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",h3:"h3",img:"img",ol:"ol",li:"li",table:"table",thead:"thead",tr:"tr",th:"th",strong:"strong",tbody:"tbody",td:"td",pre:"pre",code:"code",span:"span",h4:"h4"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"video-codec",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#video-codec",children:"#"}),"Video Codec"]}),"\n",(0,r.jsx)(o.Z,{}),"\n",(0,r.jsxs)(n.h2,{id:"principle",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#principle",children:"#"}),"Principle"]}),"\n",(0,r.jsx)(n.p,{children:"The principle of video coding is the elimination of redundant information and compression of video signals to reduce the amount of data and facilitate storage and transmission. The implementation of video coding usually relies on specific video coding standards, such as H.264, H.265, and so on.\nThese standards specify specific coding algorithms and parameters for efficient video compression and transmission."}),"\n",(0,r.jsxs)(n.h3,{id:"video-encoding-principle",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#video-encoding-principle",children:"#"}),"Video Encoding Principle"]}),"\n",(0,r.jsx)(n.p,{children:"Taking the H.265 coding protocol as an example, video coding involves the following key steps:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image",src:l})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Segmentation"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"H.265 first divides the video into a number of sequences, and a sequence is divided into a number of Groups of Picture (GOP), each GOP represents a set of consecutive video frames."}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Spatial prediction"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"H.265 uses spatial prediction to remove redundant information between image blocks.\nAs shown in the figure below, from a spatial point of view, the difference in pixel values between pixel points inside a single video frame is very small.\nFrom a temporal perspective, there are also many identical pixel points between two consecutive video frames."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Spatial Sampling Schematic Image"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Time Sampling Schematic Image"})})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.img,{alt:"image",src:t})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.img,{alt:"image",src:a})})]})})]}),"\n",(0,r.jsx)(n.p,{children:"Predictive coding is a method of data compression based on the statistical properties of an image that utilizes the temporal and spatial correlation of an image to predict the pixels that are currently being coded from the pixel data that has been reconstructed."}),"\n",(0,r.jsx)(n.p,{children:"Intra-frame prediction means that both the pixels used for prediction and the pixels currently being encoded are within the same video frame and are generally in neighboring regions.\nDue to the strong correlation between neighboring pixels, the pixel values are generally very close to each other, and the probability of a mutation is very small, with the\ndifferences all being zero or very small numbers.\nTherefore, what is transmitted after intra-frame prediction coding is the difference between the predicted value and the true value, i.e., the value around 0, which is called the prediction error or residual. This enables compression to be achieved with fewer bits transmitted."}),"\n",(0,r.jsx)(n.p,{children:"H.265 intra-frame predictive coding is done on a block basis, using the rebuilt values of neighboring blocks that have been rebuilt for the block being coded.\nThe prediction component is divided into two, luminance and chrominance, and the corresponding prediction blocks are luminance prediction block and chrominance prediction block,\nrespectively.\nIn order to adapt to the content characteristics of HD video and improve the prediction accuracy, H.265 adopts richer prediction block sizes and prediction modes."}),"\n",(0,r.jsx)("img",{src:h,alt:"VP5out_vencode_3",height:"600",width:"600"}),"\n",(0,r.jsx)(n.p,{children:"Inter-frame prediction means that the pixels used for prediction and the pixels currently being encoded are not in the same video frame, but are generally in adjacent or nearby locations.\nIn general, inter-frame predictive coding provides better compression than intra-frame prediction, mainly because of the very strong correlation between video frames.\nIf the rate of change of moving objects in a video frame is slow, then the pixel differences between video frames are small and the temporal redundancy is very large."}),"\n",(0,r.jsx)(n.p,{children:'The method of inter-frame prediction to evaluate the motion condition of a moving object is motion estimation, and its main idea is to search for a matching block for the prediction block from a given range of the reference frame, and calculate the relative displacement between the matching block and the prediction block, and this relative displacement is the motion vector. After obtaining the motion vector, the prediction needs to be corrected, also known as motion compensation.\nInput the motion vectors into the motion compensation module and "compensate" the reference frame to get the prediction frame of the current encoded frame.\nThe difference between the predicted frame and the current frame is the inter-frame prediction error.'}),"\n",(0,r.jsx)(n.p,{children:"If the inter-frame prediction only uses the previous frame image, it is called forward inter-frame prediction or unidirectional prediction.\nThis predicted frame is also known as a P-frame, and the P-frame can refer to the previous I-frame or P-frame."}),"\n",(0,r.jsx)(n.p,{children:"Inter-frame prediction is bidirectional if it uses not only the previous frame image to predict the current block, but also the subsequent frame image.\nThis prediction frame is also known as the B-frame, which can refer to the preceding I-frame or P-frame and the following P-frame.\nSince P-frames need to refer to previous I-frames or P-frames, and B-frames need to refer to previous I-frames or P-frames and later P-frames, if in a video stream, the B-frame arrives first, and the dependent I-frames and P-frames haven't arrived yet, then the B-frame can't be decoded immediately, so what should be done to ensure the playback order?"}),"\n",(0,r.jsx)(n.p,{children:"Actually, PTS and DTS are generated during video encoding. Typically, after generating an I-frame, the encoder skips backward a few frames and encodes a P-frame using the preceding I-frame as a reference frame, and the frame between the I-frame and the P-frame is encoded as a B-frame.\nThe video frame order of the push stream is already coded at the time of encoding in the dependent order of I-frames, P-frames, and B-frames, and the data is directly decoded upon receipt.\nTherefore, it is not possible to receive B-frames first and then dependent I-frames and P-frames."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsx)(n.tr,{children:(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Schematic Image"})})})}),(0,r.jsx)(n.tbody,{children:(0,r.jsx)(n.tr,{children:(0,r.jsx)(n.td,{children:(0,r.jsx)(n.img,{alt:"image",src:c})})})})]}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"Transformation and quantification"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"In H.265, transform and quantization are used to further compress the data.\nBy transforming the prediction error, the data can be converted from the time domain to the frequency domain for better removal of data redundancy.\nThe transformed data is then quantized to map the data to a lower precision, thus further compressing the data. The process can be referred to the JPEG coding process."}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:"Entropy encoding"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"In the final step of the encoding process, H.265 uses entropy coding to losslessly compress the data.\nThe main purpose of entropy coding is to minimize the redundancy of the coded data in order to improve the data compression efficiency.\nThe process can be referred to JPEG coding process."}),"\n",(0,r.jsxs)(n.h3,{id:"video-decoding-principle",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#video-decoding-principle",children:"#"}),"Video Decoding Principle"]}),"\n",(0,r.jsx)(n.p,{children:"Video decoding refers to the process of converting compressed video data back to the original video format.\nThe process of video decoding is mainly divided into entropy decoding, inverse quantization, inverse transformation, motion compensation and deconvolution, and post-processing, each of which is designed to recover as close as possible to the original video picture from the highly compressed data.\nSince the goal of video encoding is to minimize the file size, the decoding process must perform each step of the encoding process precisely in reverse to recover the video content:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Entropy decoding"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Entropy decoding is the process of converting compressed data back into a more manageable video format. In the process of video encoding, entropy coding techniques such as Hoffman coding or arithmetic coding are usually used to reduce the amount of data. And the purpose of entropy decoding is to recover the symbols used in the video coding\nprocess to prepare for the next step of inverse quantization."}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Inverse quantization"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Inverse quantization is the process of flipping the quantization (the step in the encoding process that reduces the precision of the data in order to achieve space savings) in order to restore the precision of the original data, a step that is critical to restoring image quality."}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"Inverse transform"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Inverse tranform is the process of reversing the changes used in coding (e.g., the Discrete Cosine Transform, DCT) in order to restore the data from the transform domain (e.g., the frequency domain) to the spatial domain (i.e., the original image), and this step is a key step in image reconstruction."}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:"Motion compensation & deblocking"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Run compensation means that, for predicted frames (i.e., frames generated based on the previous/next frame), the complete frame needs to be reconstructed using the run vector data.\nDeconvolution, on the other hand, is the process of removing block artifacts generated during the coding process. These steps are essential to restore smooth and consistent video playback."}),"\n",(0,r.jsxs)(n.ol,{start:"5",children:["\n",(0,r.jsx)(n.li,{children:"Post-processing"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Post-processing, as the final step, involves some techniques to enhance video quality such as denoising, sharpening, etc. This step is optional, and whether or not it is carried out depends on the requirements of video playback and whether or not the hardware capability can support it."}),"\n",(0,r.jsxs)(n.h2,{id:"api-interface",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#api-interface",children:"#"}),"API Interface"]}),"\n",(0,r.jsxs)(n.h3,{id:"video-encoding-interface",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#video-encoding-interface",children:"#"}),"Video Encoding Interface"]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-c",meta:"",children:[(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Get the default parameter for vedio encoding"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPGetDefaultVideoEncParam"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(hbVPVideoEncParam "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"param);"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Create the video encoding context"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPCreateVideoEncContext"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(hbVPVideoContext "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"context"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                                  hbVPVideoEncParam "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"param);"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Release the video encoding context"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPReleaseVideoEncContext"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(hbVPVideoContext context);"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Create video encoding task"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPVideoEncode"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"hbUCPTaskHandle_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"taskHandle"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                        hbVPImage "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"srcImg"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                        hbVPVideoContext context);"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Get the output buffer where the encoding data is stored"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPGetVideoEncOutputBuffer"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(hbVPArray "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"outBuf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                                    "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"hbUCPTaskHandle_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" taskHandle);                             "})]}),"\n"]})})}),"\n",(0,r.jsxs)(n.h3,{id:"video-decoding-interface",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#video-decoding-interface",children:"#"}),"Video Decoding Interface"]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-c",meta:"",children:[(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Get the default parameter for vedio encoding"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPGetDefaultVideoDecParam"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(hbVPVideoDecParam "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"param);"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Create the video encoding context"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPCreateVideoDecContext"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(hbVPVideoContext "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"context"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                                  hbVPVideoDecParam "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"param);"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Release the video encoding context"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPReleaseVideoDecContext"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(hbVPVideoContext context);"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Create video decoding tasks"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPVideoDecode"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"hbUCPTaskHandle_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"taskHandle"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                        hbVPArray "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"srcBuf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                        hbVPVideoContext context);"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Get the output buffer where the encoding data is stored"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPGetVideoDecOutputBuffer"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(hbVPImage "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"outImg"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                                    "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"hbUCPTaskHandle_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" taskHandle);                             "})]}),"\n"]})})}),"\n",(0,r.jsxs)(n.p,{children:["For detailed interface information, please refer to ",(0,r.jsx)(n.a,{href:"/3.0.22/en/guide/ucp/vp/vp7_reference/vp7_function_interface/hbvpvideoencode.html",children:"hbVPVideoEncode"})," and ",(0,r.jsx)(n.a,{href:"/3.0.22/en/guide/ucp/vp/vp7_reference/vp7_function_interface/hbvpvideodecode.html",children:"hbVPVideoDecode"}),"."]}),"\n",(0,r.jsxs)(n.h2,{id:"usage",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#usage",children:"#"}),"Usage"]}),"\n",(0,r.jsxs)(n.h3,{id:"video-encoding-usage",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#video-encoding-usage",children:"#"}),"Video Encoding Usage"]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-c",meta:"",children:[(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Include the header"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"#include"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"hobot/hb_ucp.h"'})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"#include"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"hobot/vp/hb_vp.h"'})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"#include"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"hobot/vp/hb_vp_video_codec.h"'})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// init encoding param"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hbVPVideoEncParam venc_param;"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"venc_param.videoType "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" HB_VP_VIDEO_TYPE_H265;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPGetDefaultVideoEncParam"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"venc_param);"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"venc_param"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"height "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" height;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"venc_param"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"width "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" width;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"venc_param"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"pixelFormat "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" image_format;"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// create video encoding context and the Video Process Unit internally alloc the output buffer"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hbVPVideoContext enc_context{nullptr};"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPCreateVideoEncContext"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"enc_context"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" venc_param)"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// init task handle and schedule param"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"hbUCPTaskHandle_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" task_handle{nullptr};"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hbUCPSchedParam sched_param;"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"HB_UCP_INITIALIZE_SCHED_PARAM"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"sched_param);"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"sched_param.backend "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" HB_UCP_CORE_ANY;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"sched_param.priority "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// init image_buf, alloc memory for image data"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  hbUCPSysMem image_mem;"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPMalloc("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"image_mem"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" yuv_size"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:")"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  hbVPImage image_buf;"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"image_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"imageFormat "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" image_format;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"image_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"imageType "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" image_type;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"image_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"width "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" width;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"image_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"height "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" height;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"image_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"stride "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" stride;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"image_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"uvStride "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" uv_stride;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"image_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dataVirAddr "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"image_mem"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"virAddr;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"image_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dataPhyAddr "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"image_mem"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"phyAddr;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"image_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"uvVirAddr "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" reinterpret_cast"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"<char"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*>"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"image_mem"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"virAddr) "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"+"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" luma_size;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"image_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"uvPhyAddr "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"image_mem"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"phyAddr "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"+"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" luma_size;"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// create video encoding task"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPVideoEncode("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"task_handle"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"image_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" enc_context)"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"//  submit video encoding task"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPSubmitTask(task_handle"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"sched_param)"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// wait for video encoding task done"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPWaitTaskDone(task_handle"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"10"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:")"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// get output buffer from Video Process Unit"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  hbVPArray out_buf;"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPGetVideoEncOutputBuffer("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"out_buf\uFF0Ctask_handle)"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// process h264 or h265 data"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// release task handle and dequeue output buffer from Video Process Unit"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// since the dequeue output buffer process relies on the context,"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// you must call the hbUCPReleaseTask interface before calling the hbVPReleaseJPEGEncContext interface"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPReleaseTask(task_handle)"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// release memory"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPFree"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"image_mem);"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// release encoding context and the Video Process Unit internally release the output buffer"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPReleaseVideoEncContext"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(enc_context);"})]}),"\n"]})})}),"\n",(0,r.jsxs)(n.h3,{id:"video-decoding-usage",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#video-decoding-usage",children:"#"}),"Video Decoding Usage"]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-c",meta:"",children:[(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// Include the header"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"#include"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"hobot/hb_ucp.h"'})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"#include"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"hobot/vp/hb_vp.h"'})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"#include"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"hobot/vp/hb_vp_video_codec.h"'})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// init decoding param"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hbVPVideoDecParam vdec_param;"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"venc_param.videoType "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" HB_VP_VIDEO_TYPE_H265;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPGetDefaultVideoDecParam"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"venc_param);"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"venc_param"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"pixelFormat "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" HB_VP_IMAGE_FORMAT_YUV420;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"venc_param"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"inBufSize "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" height "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" width "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// create video decoding context and the Video Process Unit internally alloc the output buffer"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hbVPVideoContext dec_context{nullptr};"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPCreateVideoDecContext"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dec_context"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" vdec_param)"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// init task handle and schedule param"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"hbUCPTaskHandle_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" task_handle{nullptr};"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hbUCPSchedParam sched_param;"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"HB_UCP_INITIALIZE_SCHED_PARAM"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"sched_param);"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"sched_param.backend "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" HB_UCP_CORE_ANY;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"sched_param.priority "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// alloc larger memory for input"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hbUCPSysMem src_mem;"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"ret "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPMalloc"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(src_mem)"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" param"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"->"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"inBufSize"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// init src_buf, alloc memory for image data"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"memset("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"src_mem"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"virAddr"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"src_mem"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"memSize"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:")"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"fread("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"src_mem"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"virAddr"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" feedSizes"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" inFile)"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "})}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  hbVPArray src_buf;"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"src_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"phyAddr "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"src_mem"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"phyAddr;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"src_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"virAddr "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"src_mem"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"virAddr;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"src_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"memSize "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" feedSize;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"src_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"size "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" feedSize;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"src_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"capacity "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" feedSize;"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// create video decoding task"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPVideoDecode("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"task_handle"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"src_buf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" dec_context)"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"//  submit video decoding task"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPSubmitTask(task_handle"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"sched_param)"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// wait for video decoding task done"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPWaitTaskDone(task_handle"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"10"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:")"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// get output buffer from Video Process Unit"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  hbVPImage out_img;"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPGetVideoDecOutputBuffer("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"out_img\uFF0Ctask_handle)"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// process yuv data"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// release task handle and dequeue output buffer from Video Process Unit"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// since the dequeue output buffer process relies on the context,"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// you must call the hbUCPReleaseTask interface before calling the hbVPReleaseJPEGEncContext interface"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPReleaseTask(task_handle)"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// release memory"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPFree"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"src_mem);"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number"}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// release encoding context and the Video Process Unit internally release the output buffer"})}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPReleaseVideoDecContext"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(dec_context);"})]}),"\n"]})})}),"\n",(0,r.jsxs)(n.h3,{id:"additional-notes",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#additional-notes",children:"#"}),"Additional notes"]}),"\n",(0,r.jsxs)(n.h4,{id:"bit-rate-control-mode",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#bit-rate-control-mode",children:"#"}),"Bit Rate Control Mode"]}),"\n",(0,r.jsx)(n.p,{children:"The encoder supports both H.264 and H.265 standards, offering five bitrate control modes:\nCBR (Constant Bitrate), VBR (Variable Bitrate), AVBR (Adaptive Variable Bitrate), FixQp, and QpMap.\nThese modes ensure flexibility in balancing bitrate stability, image quality, and compression efficiency.\nFor example, CBR maintains a consistent overall bitrate, while VBR focuses on stable image quality.\nFixQp keeps the quantization parameter (QP) fixed for specific frames, and QpMap assigns QP values to\nblocks within frames, with H.265 using 32x32 blocks and H.264 using 16x16. The following explanation\nuses H.265 as an example for rate control settings."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Constant Bit Rate(CBR)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"CBR (Constant Bitrate) refers to maintaining a stable bitrate throughout the encoding process, ensuring that the overall bitrate of the video stream remains constant. The following are the meanings of the parameters used in CBR mode:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Parameter"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Description"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Range of values"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Recommended value"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"intraPeriod"})}),(0,r.jsx)(n.td,{children:"I frame interval"}),(0,r.jsx)(n.td,{children:"[0, 2047]"}),(0,r.jsx)(n.td,{children:"28"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"bitRate"})}),(0,r.jsx)(n.td,{children:"The target average bitrate of the encoded data in kbps"}),(0,r.jsx)(n.td,{children:"[1, 700000]"}),(0,r.jsx)(n.td,{children:"1000"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"frameRate"})}),(0,r.jsx)(n.td,{children:"The target frame rate of the encoded data in fps"}),(0,r.jsx)(n.td,{children:"[1, 240]"}),(0,r.jsx)(n.td,{children:"30"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"initialRcQp"})}),(0,r.jsx)(n.td,{children:"Specify the initial QP value for rate control. If the value is not within the [0,51] range, the encoder will internally determine the initial value"}),(0,r.jsx)(n.td,{children:"[0, 51]"}),(0,r.jsx)(n.td,{children:"63"})]})]})]}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Variable Bit Rate(VBR)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"VBR (Variable Bitrate) dynamically adjusts the bitrate during the encoding process based on the complexity of the scene. In simple scenes, a larger QP (Quantization Parameter) is assigned to achieve higher compression. In complex scenes, a smaller QP is allocated to maintain stable image quality.\nThe following are the meanings of the parameters used in VBR mode:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Parameter"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Description"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Range of values"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Recommended value"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"intraPeriod"})}),(0,r.jsx)(n.td,{children:"I frame interval"}),(0,r.jsx)(n.td,{children:"[0, 2047]"}),(0,r.jsx)(n.td,{children:"28"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"intraQp"})}),(0,r.jsx)(n.td,{children:"A quantization parameter of intra picture"}),(0,r.jsx)(n.td,{children:"[0, 51]"}),(0,r.jsx)(n.td,{children:"30"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"frameRate"})}),(0,r.jsx)(n.td,{children:"The target frame rate of the encoded data in fps"}),(0,r.jsx)(n.td,{children:"[1, 240]"}),(0,r.jsx)(n.td,{children:"30"})]})]})]}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"Average Variable Bit Rate(AVBR)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"AVBR (Adaptive Variable Bitrate) is a strategy that maintains a stable average bitrate throughout\nthe encoding process. It combines the advantages of both CBR and VBR: in simple scenes,\na lower bitrate is allocated, while in complex scenes, enough bitrate is provided to ensure\nimage quality. This ensures that the bitrate is reasonably distributed across different scenes.\nAt the same time, AVBR ensures that the average bitrate approaches the preset target bitrate\nover a certain period, helping to control the output file size.\nAVBR can be viewed as a compromise between CBR and VBR, resulting in a stream with\nrelatively stable bitrate and image quality. The following are the meanings of the parameters used in AVBR mode:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Parameter"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Description"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Range of values"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Recommended value"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"intraPeriod"})}),(0,r.jsx)(n.td,{children:"I frame interval"}),(0,r.jsx)(n.td,{children:"[0, 2047]"}),(0,r.jsx)(n.td,{children:"28"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"bitRate"})}),(0,r.jsx)(n.td,{children:"The target average bitrate of the encoded data in kbps"}),(0,r.jsx)(n.td,{children:"[1, 700000]"}),(0,r.jsx)(n.td,{children:"1000"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"frameRate"})}),(0,r.jsx)(n.td,{children:"The target frame rate of the encoded data in fps"}),(0,r.jsx)(n.td,{children:"[1, 240]"}),(0,r.jsx)(n.td,{children:"30"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"initialRcQp"})}),(0,r.jsx)(n.td,{children:"Specify the initial QP value for rate control. If the value is not within the [0,51] range, the encoder will internally determine the initial value"}),(0,r.jsx)(n.td,{children:"[0, 51]"}),(0,r.jsx)(n.td,{children:"63"})]})]})]}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:"Fix QP"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"In FixQp (Fixed QP) mode, the encoder assigns a fixed Quantization Parameter (QP) value to each I-frame,\nP-frame, and B-frame without making any dynamic adjustments. This mode is typically used in\nscenarios where strict control over image quality and compression ratio is required.\nThe following are the meanings of the parameters used in FixQp mode:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Parameter"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Description"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Range of values"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Recommended value"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"intraPeriod"})}),(0,r.jsx)(n.td,{children:"I frame interval"}),(0,r.jsx)(n.td,{children:"[0, 2047]"}),(0,r.jsx)(n.td,{children:"28"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"frameRate"})}),(0,r.jsx)(n.td,{children:"he target frame rate of the encoded data in fps"}),(0,r.jsx)(n.td,{children:"[1, 240]"}),(0,r.jsx)(n.td,{children:"30"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"qpI"})}),(0,r.jsx)(n.td,{children:"A force picture quantization parameter for I picture"}),(0,r.jsx)(n.td,{children:"[0, 51]"}),(0,r.jsx)(n.td,{children:"0"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"qpP"})}),(0,r.jsx)(n.td,{children:"A force picture quantization parameter for P picture"}),(0,r.jsx)(n.td,{children:"[0, 51]"}),(0,r.jsx)(n.td,{children:"0"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"qpB"})}),(0,r.jsx)(n.td,{children:"A force picture quantization parameter for B picture"}),(0,r.jsx)(n.td,{children:"[0, 51]"}),(0,r.jsx)(n.td,{children:"0"})]})]})]}),"\n",(0,r.jsxs)(n.ol,{start:"5",children:["\n",(0,r.jsx)(n.li,{children:"Qp Map"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The QpMap mode allows different Quantization Parameter (QP) values to be assigned to each macroblock within a frame, enabling more fine-grained control over the bitrate. For H.265 encoding, the size of each macroblock is 32x32. The following are the meanings of the parameters used in QpMap mode:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Parameter"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Description"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Range of values"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Recommended value"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"intraPeriod"})}),(0,r.jsx)(n.td,{children:"I frame interval"}),(0,r.jsx)(n.td,{children:"[0, 2047]"}),(0,r.jsx)(n.td,{children:"28"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"frameRate"})}),(0,r.jsx)(n.td,{children:"The target frame rate of the encoded data in fps"}),(0,r.jsx)(n.td,{children:"[1, 240]"}),(0,r.jsx)(n.td,{children:"30"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"qpMapArray"})}),(0,r.jsx)(n.td,{children:"Specify the qp map. The QP map array should be written a series of 1 byte QP values for each subCTU in raster scan order."}),(0,r.jsx)(n.td,{children:"\u6307\u9488\u5730\u5740"}),(0,r.jsx)(n.td,{children:"-"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"qpMapArrayCount"})}),(0,r.jsx)(n.td,{children:"Specify the qp map number.  It's related with the picture width and height\uFF0C(ALIGN64(width)>>5)*(ALIGN64(height)>>5)"}),(0,r.jsx)(n.td,{children:"[0, 8192x4096/(32x32)]"}),(0,r.jsx)(n.td,{children:"-"})]})]})]}),"\n",(0,r.jsxs)(n.h4,{id:"gop-structure",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#gop-structure",children:"#"}),"GOP Structure"]}),"\n",(0,r.jsx)(n.p,{children:"H.264 and H.265 encoding support the configuration of GOP structures, allowing you to choose from preset GOP structures. Below are the descriptions of the preset GOP structures:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"GopPresetIdx"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"GOP Structure"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Low Delay"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"GOP Size"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Encoding Order"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Description"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"1"})}),(0,r.jsx)(n.td,{children:"I"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"I0-I1-I2-I3,\u2026"}),(0,r.jsx)(n.td,{children:"I-frames only, no cross-referencing"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"2"})}),(0,r.jsx)(n.td,{children:"P"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"I-P0-P1-P2,\u2026"}),(0,r.jsx)(n.td,{children:"Only I-frames and P-frames, and P-frames refer to 2 forward reference frames"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"3"})}),(0,r.jsx)(n.td,{children:"B"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"I-B0-B1-B2,\u2026"}),(0,r.jsx)(n.td,{children:"Only I-frames and B-frames, and B-frames refer to 2 forward reference frames"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"6"})}),(0,r.jsx)(n.td,{children:"PPPP"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"4"}),(0,r.jsx)(n.td,{children:"I-P0-P1-P2-P3,\u2026"}),(0,r.jsx)(n.td,{children:"Only I-frames and P-frames, and P-frames refer to 2 forward reference frames"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"7"})}),(0,r.jsx)(n.td,{children:"BBBB"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"4"}),(0,r.jsx)(n.td,{children:"I-B0-B1-B2-B3,\u2026"}),(0,r.jsx)(n.td,{children:"Only I-frames and B-frames, and B-frames refer to 2 forward reference frames"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"9"})}),(0,r.jsx)(n.td,{children:"P"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"I-P0,\u2026"}),(0,r.jsx)(n.td,{children:"Only I-frames and P-frames, and P-frames refer to 1 forward reference frames"})]})]})]})]})}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(d,e)})):d(e)}n.default=x,x.__RSPRESS_PAGE_META={},x.__RSPRESS_PAGE_META["3.0.22%2Fen%2Fguide%2Fucp%2Fvp%2Fvp5_op%2Fvideo_codec.mdx"]={toc:[{id:"principle",text:"Principle",depth:2},{id:"video-encoding-principle",text:"Video Encoding Principle",depth:3},{id:"video-decoding-principle",text:"Video Decoding Principle",depth:3},{id:"api-interface",text:"API Interface",depth:2},{id:"video-encoding-interface",text:"Video Encoding Interface",depth:3},{id:"video-decoding-interface",text:"Video Decoding Interface",depth:3},{id:"usage",text:"Usage",depth:2},{id:"video-encoding-usage",text:"Video Encoding Usage",depth:3},{id:"video-decoding-usage",text:"Video Decoding Usage",depth:3},{id:"additional-notes",text:"Additional notes",depth:3},{id:"bit-rate-control-mode",text:"Bit Rate Control Mode",depth:4},{id:"gop-structure",text:"GOP Structure",depth:4}],title:"Video Codec",frontmatter:{}}},95895:function(e,n,s){s(39710);var r=s(85893),i=s(67294),o=s(45687);s(20388);let l={"zh-CN":e=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${e.minutes>=1?`${Math.ceil(e.minutes)} \u{5206}\u{949F}`:"\u5C0F\u4E8E 1 \u5206\u949F"}`,"en-US":e=>`Estimated reading time: ${e.minutes>=1?`${Math.ceil(e.minutes)} minutes`:"less than 1 minute"}`};function t(e,n,s){let r=Object.keys(l).includes(n)?n:s;return l[r](e)}n.Z=e=>{let{defaultLocale:n="en-US"}=e,s=(0,o.Vi)().page.readingTimeData,l=(0,o.Jr)(),a=(0,o.e7)(),[c,h]=(0,i.useState)(t(s,l,n));return(0,i.useEffect)(()=>{h(t(s,l,n))},[l,s]),(0,r.jsx)("span",{"data-dark":String(a),className:"rp-reading-time",children:c})}}}]);