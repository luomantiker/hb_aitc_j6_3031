"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["33721"],{11797:function(e,s,n){n.r(s);var i=n(85893),r=n(50065),l=n(95895);function t(e){let s=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",h3:"h3",pre:"pre",code:"code",span:"span",strong:"strong",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,r.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.h1,{id:"hmctapibuild_model",children:[(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#hmctapibuild_model",children:"#"}),"hmct.api.build_model"]}),"\n",(0,i.jsx)(l.Z,{}),"\n",(0,i.jsxs)(s.h2,{id:"interface-description",children:[(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#interface-description",children:"#"}),"Interface Description"]}),"\n",(0,i.jsx)(s.p,{children:"The model conversion function provided by HMCT, inputs an onnx model and outputs the quantized model after model conversion and quantization."}),"\n",(0,i.jsxs)(s.h3,{id:"interface-form",children:[(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#interface-form",children:"#"}),"Interface Form"]}),"\n",(0,i.jsx)(s.pre,{className:"code",children:(0,i.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(s.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"build_model"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"onnx_model"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ModelProto"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"march"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"cali_data"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Union"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Sequence"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"np"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"ndarray"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"],"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Dict"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Sequence"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"np"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"ndarray"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]]],"})]}),"\n",(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"quant_config"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Union"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Dict"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Any"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]]]"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"input_dict"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Dict"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Any"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]]"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"name_prefix"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"verbose"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"bool"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"True"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"->"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ModelProto"})]}),"\n"]})})}),"\n",(0,i.jsxs)(s.h3,{id:"return-value",children:[(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#return-value",children:"#"}),"Return Value"]}),"\n",(0,i.jsx)(s.p,{children:"Output a quantized onnx model that can be used for quantized model accuracy evaluation, as well as compiled into a deployment model via hbdk."}),"\n",(0,i.jsxs)(s.h2,{id:"parameter",children:[(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#parameter",children:"#"}),"Parameter"]}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsxs)("colgroup",{children:[(0,i.jsx)("col",{style:{width:"15%"}}),(0,i.jsx)("col",{style:{width:"20%"}}),(0,i.jsx)("col",{style:{width:"15%"}}),(0,i.jsx)("col",{style:{width:"50%"}})]}),(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(s.strong,{children:"Parameter"})}),(0,i.jsx)("td",{children:(0,i.jsx)(s.strong,{children:"Type"})}),(0,i.jsx)("td",{children:(0,i.jsx)("nobr",{children:(0,i.jsx)(s.strong,{children:"Default Value"})})}),(0,i.jsx)("td",{children:(0,i.jsx)(s.strong,{children:"Description"})})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"onnx_model"}),(0,i.jsx)("td",{children:"ModelProto"}),(0,i.jsx)("td",{children:"Required, no default value"}),(0,i.jsx)("td",{children:"The input onnx model."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"march"}),(0,i.jsx)("td",{children:"str"}),(0,i.jsx)("td",{children:"Required, no default value"}),(0,i.jsx)("td",{children:"Computing platform."})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"cali_data"}),(0,i.jsx)("td",{children:"Union[Sequence[np.ndarray], Dict[str, Sequence[np.ndarray]]]"}),(0,i.jsx)("td",{children:"Required, no default value"}),(0,i.jsxs)("td",{children:[(0,i.jsx)(s.p,{children:"Calibration data:"}),(0,i.jsxs)("ol",{className:"list-decimal pl-5 my-4 leading-7",children:[(0,i.jsx)("li",{children:"Single-input models can specify calibration data via Sequence[np.ndarray];"}),(0,i.jsx)(s.pre,{className:"code",children:(0,i.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(s.code,{className:"language-cpp",meta:"",children:[(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"cali_data "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" [sample0"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sample1"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ...]"})]}),"\n"]})})}),(0,i.jsx)("li",{children:"Multi-input models require calibration data to be specified via Dict[str, Sequence[np.ndarray]]."}),(0,i.jsx)(s.pre,{className:"code",children:(0,i.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(s.code,{className:"language-cpp",meta:"",children:[(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"cali_data "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'input_name0'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:": [sample0"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sample1"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ...], "})]}),"\n",(0,i.jsx)(s.span,{className:"line line-number",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"'input_name1': [sample0, sample1, ...]}"})}),"\n"]})})})]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"quant_config"}),(0,i.jsx)("td",{children:"Optional[Union[str, Dict[str, Any]]]"}),(0,i.jsx)("td",{children:"None"}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(s.p,{children:["Specify quantized configuration parameters, detailed quantized parameter configuration description reference ",(0,i.jsx)("a",{href:"../../ptq/ptq_tool/hb_compile/quant_config.html",children:"The quant_config Introduction"}),"\u3002"]}),(0,i.jsxs)("ol",{className:"list-decimal pl-5 my-4 leading-7",children:[(0,i.jsx)("li",{children:"Use the default quantization method;"}),(0,i.jsx)(s.pre,{className:"code",children:(0,i.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(s.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"quant_config "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"None"})]}),"\n"]})})}),(0,i.jsx)("li",{children:"Quantization parameters can be configured via a json file;"}),(0,i.jsx)(s.pre,{className:"code",children:(0,i.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(s.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"quant_config "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" quant_config_json_file"})]}),"\n"]})})}),(0,i.jsx)("li",{children:"Configure quantization parameters via a dict type."}),(0,i.jsx)(s.pre,{className:"code",children:(0,i.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(s.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"quant_config "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"{"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'node_config'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"{"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv0'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"{"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'qtype'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'int16'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"}}}"})]}),"\n"]})})})]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"input_dict"}),(0,i.jsx)("td",{children:"Optional[Dict[str, Any]]"}),(0,i.jsx)("td",{children:"None"}),(0,i.jsxs)("td",{children:[(0,i.jsx)(s.p,{children:"Modify the converted model inputs according to the specified parameters. Note: The caller needs to ensure that the modifications to the model inputs are legal."}),(0,i.jsxs)("ol",{className:"list-decimal pl-5 my-4 leading-7",children:[(0,i.jsx)("li",{children:"Modify the input_shape of the specified input:"}),(0,i.jsx)(s.pre,{className:"code",children:(0,i.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(s.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"input_dict "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"{"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'input_name0'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"{"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'input_shape'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"[x"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"x"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"x"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"x]"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"}}"})]}),"\n"]})})}),(0,i.jsx)("li",{children:"Modify the batch_size of the specified input:"}),(0,i.jsx)(s.pre,{className:"code",children:(0,i.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(s.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"input_dict "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"{"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'input_name0'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"{"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'input_batch'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"4"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"}}"})]}),"\n"]})})})]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"name_prefix"}),(0,i.jsx)("td",{children:"Optional[str]"}),(0,i.jsx)("td",{children:"None"}),(0,i.jsxs)("td",{children:[(0,i.jsx)(s.p,{children:"Specify the save path for the generated object during the model conversion process."}),(0,i.jsxs)("ol",{className:"list-decimal pl-5 my-4 leading-7",children:[(0,i.jsx)("li",{children:"None, saved in the current directory;"}),(0,i.jsx)("li",{children:"Specify a path relative to the current directory in which to save the generated objects during the conversion process."}),(0,i.jsx)(s.pre,{className:"code",children:(0,i.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(s.code,{className:"language-python",meta:"",children:[(0,i.jsx)(s.span,{className:"line line-number",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Saved in the current directory, saved files are prefixed with temp_;"})}),"\n",(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"name_prefix "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'temp_'"})]}),"\n",(0,i.jsx)(s.span,{className:"line line-number",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Save in the . /tmp01 directory, saved files are prefixed with temp_;"})}),"\n",(0,i.jsxs)(s.span,{className:"line line-number",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"name_prefix "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./tmp01/temp_'"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n"]})})})]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"verbose"}),(0,i.jsx)("td",{children:"Optional[bool]"}),(0,i.jsx)("td",{children:"True"}),(0,i.jsx)("td",{children:"verbose=True/False, specify whether detailed information is printed during the model conversion."})]})]})]}),"\n",(0,i.jsxs)(s.h2,{id:"generator-description",children:[(0,i.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#generator-description",children:"#"}),"Generator Description"]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{align:"left",children:(0,i.jsx)(s.strong,{children:"Generator Name"})}),(0,i.jsx)(s.th,{align:"left",children:(0,i.jsx)(s.strong,{children:"Description"})})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{align:"left",children:"original_float_model.onnx"}),(0,i.jsx)(s.td,{align:"left",children:"The output after the original model conversion, the conversion of this stage includes: opset, ir version conversion, input_shape modification operation."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{align:"left",children:"optimized_float_model.onnx"}),(0,i.jsx)(s.td,{align:"left",children:"The output of the model optimization phase, which consists of conversion such as: constant folding, operator fusion, useless operator removal, operator replacement, and operator splitting."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{align:"left",children:"calibrated_model.onnx"}),(0,i.jsx)(s.td,{align:"left",children:"Output from the model calibration phase, which involves quantization: inserting calibration nodes, counting data distributions, and calculating quantization parameters."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{align:"left",children:"ptq_model.onnx"}),(0,i.jsx)(s.td,{align:"left",children:"Output from the quantization phase of the model, which consists of: tuning and converting the quantization parameters based on the specified march."})]})]})]})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,r.ah)(),e.components);return s?(0,i.jsx)(s,Object.assign({},e,{children:(0,i.jsx)(t,e)})):t(e)}s.default=o,o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["3.0.22%2Fen%2Fguide%2Fadvanced_content%2Fhmct_api_reference%2Fbuild_model.mdx"]={toc:[{id:"interface-description",text:"Interface Description",depth:2},{id:"interface-form",text:"Interface Form",depth:3},{id:"return-value",text:"Return Value",depth:3},{id:"parameter",text:"Parameter",depth:2},{id:"generator-description",text:"Generator Description",depth:2}],title:"hmct.api.build_model",frontmatter:{}}},95895:function(e,s,n){n(39710);var i=n(85893),r=n(67294),l=n(45687);n(20388);let t={"zh-CN":e=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${e.minutes>=1?`${Math.ceil(e.minutes)} \u{5206}\u{949F}`:"\u5C0F\u4E8E 1 \u5206\u949F"}`,"en-US":e=>`Estimated reading time: ${e.minutes>=1?`${Math.ceil(e.minutes)} minutes`:"less than 1 minute"}`};function o(e,s,n){let i=Object.keys(t).includes(s)?s:n;return t[i](e)}s.Z=e=>{let{defaultLocale:s="en-US"}=e,n=(0,l.Vi)().page.readingTimeData,t=(0,l.Jr)(),a=(0,l.e7)(),[c,h]=(0,r.useState)(o(n,t,s));return(0,r.useEffect)(()=>{h(o(n,t,s))},[t,n]),(0,i.jsx)("span",{"data-dark":String(a),className:"rp-reading-time",children:c})}}}]);