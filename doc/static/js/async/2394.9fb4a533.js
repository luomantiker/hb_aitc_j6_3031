"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["2394"],{56626:function(e,s,n){e.exports=n.p+"static/image/layer_details_tab.48f56277.png"},74015:function(e,s,n){e.exports=n.p+"static/image/quickstart.098444f3.png"},26354:function(e,s,n){e.exports=n.p+"static/image/summary_tab.a6fd3dc1.png"},83078:function(e,s,n){e.exports=n.p+"static/image/temporal_statistics_tab.7af0ca52.png"},46194:function(e,s,n){n.r(s);var r=n(85893),i=n(50065),l=n(95895),o=n(26354),t=n(83078),a=n(56626),c=n(74015);function h(e){let s=Object.assign({h1:"h1",a:"a",p:"p",div:"div",h2:"h2",code:"code",strong:"strong",pre:"pre",span:"span",h3:"h3",ul:"ul",li:"li",math:"math",semantics:"semantics",mrow:"mrow",mi:"mi",mo:"mo",annotation:"annotation",img:"img",ol:"ol",h4:"h4"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"algorithm-model-ptq--on-board-deployment-quick-start",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#algorithm-model-ptq--on-board-deployment-quick-start",children:"#"}),"Algorithm Model PTQ + On-board Deployment Quick Start"]}),"\n",(0,r.jsx)(l.Z,{}),"\n",(0,r.jsx)(s.p,{children:"To help you quickly get started, this section introduces the basic workflow of the PTQ scheme using ResNet50 as an example to illustrate the details."}),"\n",(0,r.jsx)(s.p,{children:"The basic workflow is as follows:"}),"\n",(0,r.jsx)("img",{src:c,width:"600"}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(s.div,{className:"rspress-directive-content",children:(0,r.jsxs)(s.p,{children:["Before starting, make sure you have completed the environment installation on both dev PC and dev board by following the section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/env_install.html",children:"Environment Deployment"}),"."]})})]}),"\n",(0,r.jsxs)(s.h2,{id:"floating-point-model-preparation",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#floating-point-model-preparation",children:"#"}),"Floating-point Model Preparation"]}),"\n",(0,r.jsxs)(s.p,{children:["The OE package provides you with rich PTQ model samples under the ",(0,r.jsx)(s.code,{children:"samples/ai_toolchain/horizon_model_convert_sample"})," path.\r\nThe ResNet50 model sample is located under the ",(0,r.jsx)(s.code,{children:"03_classification/03_resnet50"})," path."]}),"\n",(0,r.jsxs)(s.p,{children:["Please first execute the ",(0,r.jsx)(s.code,{children:"00_init.sh"})," script to obtain the corresponding calibration dataset and the original model of the sample.\r\nPlease refer to section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ptq/ptq_sample/algorithm_sample.html#prepare_ptq_model",children:"Prepare Models"})," for their model sources and related instructions."]}),"\n",(0,r.jsxs)(s.p,{children:["If you need to convert a private model, refer to section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ptq/ptq_usage/model_prepare.html",children:"Prepare Floating-point Model Preparation"})," to prepare ",(0,r.jsx)(s.strong,{children:"opset=10-19 onnx models"})," in advance.\r\nThe following table shows reference schemes for converting different frameworks to ONNX model formats."]}),"\n",(0,r.jsxs)("table",{children:[(0,r.jsxs)("colgroup",{children:[(0,r.jsx)("col",{style:{width:"25%"}}),(0,r.jsx)("col",{style:{width:"75%"}})]}),(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(s.strong,{children:"Training Framework"})}),(0,r.jsx)("td",{children:(0,r.jsx)(s.strong,{children:"Reference Scheme"})})]})}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Pytorch"}),(0,r.jsxs)("td",{children:["Export using the ",(0,r.jsx)(s.a,{href:"https://pytorch.org/tutorials/advanced/super_resolution_with_onnxruntime.html",target:"_blank",rel:"noopener noreferrer",children:"Official API"}),"."]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Tensorflow"}),(0,r.jsxs)("td",{children:["Covert using the ",(0,r.jsx)(s.a,{href:"https://github.com/onnx/tensorflow-onnx",target:"_blank",rel:"noopener noreferrer",children:"onnx/tensorflow-onnx Tool"})," of the ONNX community."]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"PaddlePaddle"}),(0,r.jsxs)("td",{children:["Export using the ",(0,r.jsx)(s.a,{href:"https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/onnx/export_cn.html",target:"_blank",rel:"noopener noreferrer",children:"Official API"}),"."]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"MXNet2Onnx"}),(0,r.jsxs)("td",{children:["Export using the ",(0,r.jsx)(s.a,{href:"https://github.com/dotnet/machinelearning/blob/main/test/Microsoft.ML.Tests/OnnxConversionTest.cs",target:"_blank",rel:"noopener noreferrer",children:"Official API"}),"."]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Other frameworks"}),(0,r.jsxs)("td",{children:["Covert using the ",(0,r.jsx)(s.a,{href:"https://github.com/onnx/tutorials#converting-to-onnx-format",target:"_blank",rel:"noopener noreferrer",children:"Reference Scheme"}),"."]})]})]})]}),"\n",(0,r.jsxs)(s.h2,{id:"model-checking",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#model-checking",children:"#"}),"Model Checking"]}),"\n",(0,r.jsx)(s.p,{children:"After the floating-point model is ready, we recommend a quick checking of the model to ensure that it meets the support constraints of the computing platform.\r\nFor the ResNet50 model in ONNX format, we can complete the model checking by typing the following command in the command line:"}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-bash",meta:"",children:[(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hb_compile"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--model"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"resnet50.onnx"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--march"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"nash-e"})]}),"\n"]})})}),"\n",(0,r.jsx)(s.p,{children:"If your model is a multi-input model, you can refer to the following command:"}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-bash",meta:"",children:[(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hb_compile"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--march"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ${march} \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--proto"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ${caffe_proto} \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--model"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ${caffe_model"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"onnx_model} \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--input-shape"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"input.0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"x1x224x224"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"--input-shape"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"input.1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"x1x224x224"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"--input-shape"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"input.2"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"x1x224x224"})]}),"\n"]})})}),"\n",(0,r.jsxs)(s.p,{children:["The main parameters of the ",(0,r.jsx)(s.code,{children:"hb_compile"})," tool are as follows, for more parameter descriptions, refer to section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ptq/ptq_tool/hb_compile/check.html",children:"Model Checking"}),"."]}),"\n",(0,r.jsxs)("table",{children:[(0,r.jsxs)("colgroup",{children:[(0,r.jsx)("col",{style:{width:"25%"}}),(0,r.jsx)("col",{style:{width:"75%"}})]}),(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(s.strong,{children:"Parameter"})}),(0,r.jsx)("td",{children:(0,r.jsx)(s.strong,{children:"Description"})})]})}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(s.code,{children:"--march"})}),(0,r.jsxs)("td",{children:["Used to specify the type of processor to be adapted, for J6E processor, please set to ",(0,r.jsx)("b",{children:"nash-e"}),", for J6M processor, please set to ",(0,r.jsx)("b",{children:"nash-e"}),"."]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(s.code,{children:"--proto"})}),(0,r.jsxs)("td",{children:["This parameter is only valid if model-type specifies Caffe, the value is the name of the ",(0,r.jsx)("b",{children:"prototxt"})," file of the Caffe model. You do not need to specify it if your model is the ONNX model."]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(s.code,{children:"--model"})}),(0,r.jsxs)("td",{children:["When model is a Caffe model, the value is the name of the ",(0,r.jsx)("b",{children:"caffemodel"})," file of the Caffe model. When model is an ONNX model, the value is the ",(0,r.jsx)("b",{children:"ONNX model"})," file name."]})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:["Take the ResNet50 model as an example, you can execute the ",(0,r.jsx)(s.code,{children:"01_check.sh"})," script to quickly complete model checking."]}),"\n",(0,r.jsxs)(s.p,{children:["The main contents of the ",(0,r.jsx)(s.code,{children:"01_check.sh"})," script file are as follows:"]}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-bash",meta:"",children:[(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"set"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-ex"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"$("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"dirname"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" $0)"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"||"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"exit"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"onnx_model"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"../../01_common/model_zoo/mapper/classification/resnet50/resnet50.onnx"'})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"march"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"nash-e"'})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hb_compile"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--model"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ${onnx_model} "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--march"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ${march}"})]}),"\n"]})})}),"\n",(0,r.jsxs)(s.p,{children:["If the model checking fails, confirm the error messages and modification suggestions according to the ",(0,r.jsx)(s.code,{children:"hb_compile.log"})," file printed on the terminal or generated under the current path,\r\nplease refer to section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ptq/ptq_usage/check_model.html",children:"Model Checking"})," for more instructions."]}),"\n",(0,r.jsxs)(s.h2,{id:"model-conversion",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#model-conversion",children:"#"}),"Model Conversion"]}),"\n",(0,r.jsxs)(s.p,{children:["After the model checking passes, you can use the ",(0,r.jsx)(s.code,{children:"hb_compile"})," tool to covert the model, refer to the following command:"]}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-bash",meta:"",children:[(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hb_compile"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-c"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"resnet50_config.yaml"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n"]})})}),"\n",(0,r.jsxs)(s.p,{children:["Among them, ",(0,r.jsx)(s.code,{children:"resnet50_config.yaml"})," is the configuration file corresponding to the model conversion, for details please refer to section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ptq/ptq_tool/hb_compile/convert.html#full_yaml",children:"Configuration File Template"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["In addition, the model quantization of the PTQ scheme also depends on a certain number of pre-processed samples for calibration, which is described in section ",(0,r.jsx)(s.a,{href:"#calibration_data_preprocess",children:"Pre-processing Calibration Data"}),"."]}),"\n",(0,r.jsxs)(s.h3,{id:"yaml_config",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#yaml_config",children:"#"}),"YAML Configuration File"]}),"\n",(0,r.jsxs)(s.p,{children:["The YAML configuration file contains 4 required parameter groups (",(0,r.jsx)(s.code,{children:"model_parameters"}),", ",(0,r.jsx)(s.code,{children:"input_parameters"}),", ",(0,r.jsx)(s.code,{children:"calibration_parameters"}),", ",(0,r.jsx)(s.code,{children:"compiler_parameters"}),") and 1 optional parameter group (",(0,r.jsx)(s.code,{children:"custom_op"}),")."]}),"\n",(0,r.jsxs)(s.p,{children:["Each parameter group contains both required and optional parameters (optional parameters are hidden by default),\r\nyou can refer to section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ptq/ptq_tool/hb_compile/convert.html#config_parameter",children:"Specific Parameter Information"})," for specific requirements and filling methods."]}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive info",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"Note"}),(0,r.jsx)(s.div,{className:"rspress-directive-content",children:(0,r.jsxs)(s.p,{children:["For ONNX model, you should configure the ",(0,r.jsx)(s.code,{children:"onnx_model"})," parameter, instead of configuring the ",(0,r.jsx)(s.code,{children:"caffe_model"})," and ",(0,r.jsx)(s.code,{children:"prototxt"})," parameters in the `model_parameters`` parameter group."]})})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"input_type_rt"})," and ",(0,r.jsx)(s.code,{children:"input_type_train"})," parameters in the ",(0,r.jsx)(s.code,{children:"input_parameters"})," parameter group are used to specify\r\nthe data type (e.g., NV12) that the model will receive when it is actually deployed on the board and the data type (e.g., RGB) for its own training, respectively."]}),"\n",(0,r.jsx)(s.p,{children:"When the two data types are inconsistent, the conversion tool automatically inserts\r\na BPU-accelerated preprocessing node in the frontend of the model to complete the corresponding color space conversion."}),"\n",(0,r.jsxs)(s.p,{children:["Meanwhile, the ",(0,r.jsx)(s.code,{children:"mean_value"}),", ",(0,r.jsx)(s.code,{children:"scale_value"})," and ",(0,r.jsx)(s.code,{children:"std_value"})," parameters in this parameter group can also be used to\r\nconfigure the data normalization operation of the image input model, which will be integrated into the preprocessing node\r\nfor BPU acceleration by the conversion tool after configuration."]}),"\n",(0,r.jsx)(s.p,{children:"The formula for data normalization is as follows:"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.span,{className:"katex",children:[(0,r.jsx)(s.span,{className:"katex-mathml",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"d"}),(0,r.jsx)(s.mi,{children:"a"}),(0,r.jsx)(s.mi,{children:"t"}),(0,r.jsx)(s.mi,{children:"a"}),(0,r.jsx)(s.mi,{mathvariant:"normal",children:"_"}),(0,r.jsx)(s.mi,{children:"n"}),(0,r.jsx)(s.mi,{children:"o"}),(0,r.jsx)(s.mi,{children:"r"}),(0,r.jsx)(s.mi,{children:"m"}),(0,r.jsx)(s.mo,{children:"="}),(0,r.jsx)(s.mo,{stretchy:"false",children:"("}),(0,r.jsx)(s.mi,{children:"d"}),(0,r.jsx)(s.mi,{children:"a"}),(0,r.jsx)(s.mi,{children:"t"}),(0,r.jsx)(s.mi,{children:"a"}),(0,r.jsx)(s.mo,{children:"\u2212"}),(0,r.jsx)(s.mi,{children:"m"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsx)(s.mi,{children:"a"}),(0,r.jsx)(s.mi,{children:"n"}),(0,r.jsx)(s.mi,{mathvariant:"normal",children:"_"}),(0,r.jsx)(s.mi,{children:"v"}),(0,r.jsx)(s.mi,{children:"a"}),(0,r.jsx)(s.mi,{children:"l"}),(0,r.jsx)(s.mi,{children:"u"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsx)(s.mo,{stretchy:"false",children:")"}),(0,r.jsx)(s.mo,{children:"\u2217"}),(0,r.jsx)(s.mi,{children:"s"}),(0,r.jsx)(s.mi,{children:"c"}),(0,r.jsx)(s.mi,{children:"a"}),(0,r.jsx)(s.mi,{children:"l"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsx)(s.mi,{mathvariant:"normal",children:"_"}),(0,r.jsx)(s.mi,{children:"v"}),(0,r.jsx)(s.mi,{children:"a"}),(0,r.jsx)(s.mi,{children:"l"}),(0,r.jsx)(s.mi,{children:"u"}),(0,r.jsx)(s.mi,{children:"e"})]}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"data\\_norm = (data - mean\\_value) * scale\\_value"})]})})}),(0,r.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,r.jsxs)(s.span,{className:"base",children:[(0,r.jsx)(s.span,{className:"strut",style:{height:"1.0044em",verticalAlign:"-0.31em"}}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"d"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"a"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"a"}),(0,r.jsx)(s.span,{className:"mord",style:{marginRight:"0.02778em"},children:"_"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"n"}),(0,r.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"or"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"m"}),(0,r.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,r.jsx)(s.span,{className:"mrel",children:"="}),(0,r.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,r.jsxs)(s.span,{className:"base",children:[(0,r.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,r.jsx)(s.span,{className:"mopen",children:"("}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"d"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"a"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"a"}),(0,r.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,r.jsx)(s.span,{className:"mbin",children:"\u2212"}),(0,r.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,r.jsxs)(s.span,{className:"base",children:[(0,r.jsx)(s.span,{className:"strut",style:{height:"1.06em",verticalAlign:"-0.31em"}}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"m"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"an"}),(0,r.jsx)(s.span,{className:"mord",style:{marginRight:"0.02778em"},children:"_"}),(0,r.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"v"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"a"}),(0,r.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"u"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,r.jsx)(s.span,{className:"mclose",children:")"}),(0,r.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,r.jsx)(s.span,{className:"mbin",children:"\u2217"}),(0,r.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,r.jsxs)(s.span,{className:"base",children:[(0,r.jsx)(s.span,{className:"strut",style:{height:"1.0044em",verticalAlign:"-0.31em"}}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"sc"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"a"}),(0,r.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,r.jsx)(s.span,{className:"mord",style:{marginRight:"0.02778em"},children:"_"}),(0,r.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"v"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"a"}),(0,r.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"u"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"e"})]})]})]})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"cal_data_dir"})," parameter in the ",(0,r.jsx)(s.code,{children:"calibration_parameters"})," parameter group needs to be configured with the path of\r\nthe preprocessed calibration data folder, refer to the section ",(0,r.jsx)(s.a,{href:"#calibration_data_preprocess",children:"Pre-processing Calibration Data"}),"\r\nfor the descriptions of the preprocessing method."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"calibration_data_preprocess",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#calibration_data_preprocess",children:"#"}),"Pre-processing Calibration Data"]}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsx)(s.div,{className:"rspress-directive-content",children:(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Please note that before doing this step, make sure that you have already finished obtaining the calibration\r\ndataset by executing the ",(0,r.jsx)(s.code,{children:"00_init.sh"})," script in the corresponding sample directory."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["If you are currently only concerned with model performance, you do not need to configure ",(0,r.jsx)(s.code,{children:"cal_data_dir"})," parameter in the yaml and skip this subsection.\r\nThe tool will perform pseudo calibration to facilitate quick verification."]}),"\n"]}),"\n"]})})]}),"\n",(0,r.jsx)(s.p,{children:"The calibration data of the PTQ scheme is generally screened from the training set or verification set of about 100 (can be appropriately increased or decreased) typical data, and should avoid very rare and unusual samples, such as solid color images, images without any detection or classification targets, etc."}),"\n",(0,r.jsxs)(s.p,{children:["The filtered calibration data should also needs to be preprocessed in the same way as that before the model inference, and after processing, the data type (",(0,r.jsx)(s.code,{children:"input_type_train"}),"), layout (",(0,r.jsx)(s.code,{children:"input_layout_train"}),") and size (",(0,r.jsx)(s.code,{children:"input_shape"}),") should stay the same as the original model."]}),"\n",(0,r.jsx)(s.p,{children:"For the preprocessing of calibration data, Horizon recommends directly using and modifying the sample code. Take the ResNet50 model as an example, the calibration_transformers function in the preprocess.py file contains the pre-processing transformers for its calibration data, and the processed calibration data is consistent with its YAML configuration file, that is:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"input_type_train"})," : 'rgb'"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"input_layout_train"})," : 'NCHW'"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-python",meta:"",children:[(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"calibration_transformers"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"():"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    transformers "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"PILResizeTransformer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(size"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"short_size),"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"PILCenterCropTransformer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(size"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"crop_size),"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"HWC2CHWTransformer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(),"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"ScaleTransformer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(scale_value"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"255"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"),"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"MeanTransformer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(means"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"np."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"array"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0.485"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0.456"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0.406"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"])),"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"ScaleTransformer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"            scale_value"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"np."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"array"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0.229"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0.224"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0.225"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]))"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ]"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" transformers"})]}),"\n"]})})}),"\n",(0,r.jsxs)(s.p,{children:["Where transformers are defined in ",(0,r.jsx)(s.code,{children:"../../../01_common/python/data/transformer.py"})," file, please refer to section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ptq/ptq_appendix/transformer.html",children:"Image Processing Transformer"}),". You can choose to modify and extend them as needed."]}),"\n",(0,r.jsx)(s.p,{children:"After modifying the preprocess.py file, you can modify and execute the 02_preprocess.sh script to complete the preprocessing of the calibration data."}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-bash",meta:"",children:[(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"bash"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"02"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"_preprocess.sh"})]}),"\n"]})})}),"\n",(0,r.jsx)(s.p,{children:"The main contents of the 02_preprocess.sh script file is as follows:"}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-bash",meta:"",children:[(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"set"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-e"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-v"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"$("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"dirname"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:" $0)"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"||"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"exit"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"python3"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"../../data_preprocess.py"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--src_dir"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"../../01_common/calibration_data/imagenet"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--dst_dir"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"./calibration_data_bgr"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--pic_ext"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:".bgr"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--read_mode"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"PIL"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--saved_data_type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"float32"})]}),"\n"]})})}),"\n",(0,r.jsx)(s.p,{children:"The parameters of the data_preprocess.py file is described as follows:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"src_dir: Path to the raw calibration data."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"dst_dir: Storage path of the processed data, which can be customized."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"pic_ext: File suffix of the processed data, which is mainly used to help remember the data type and can be left unconfigured."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"read_mode: Image reading mode, which can be configured as skimage, opencv or PIL. Note that the format of the image read by skimage is RGB with the data range of 0-1, the format of the image read by opencv is BGR with the data range of 0-255, the format of the image read by PIL is RGB with the data range of 0-255."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"saved_data_type: Type of saved data after processing."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["If you choose to write your own python code to pre-process the calibration data, you can use the ",(0,r.jsx)(s.code,{children:"numpy.save"})," command to save it as a npy file,\r\nwhich will be read by the toolchain calibration based on the ",(0,r.jsx)(s.code,{children:"numpy.load"})," command."]}),"\n",(0,r.jsxs)(s.h3,{id:"quickstart_model_conv",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#quickstart_model_conv",children:"#"}),"Model Conversion"]}),"\n",(0,r.jsx)(s.p,{children:"After preparing the calibration data and YAML configuration file, you can complete the entire process of model parsing, graph optimization, calibration, quantization, and compilation conversion in one command."}),"\n",(0,r.jsxs)(s.p,{children:["For a detailed explanation of the internal process, please refer to section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ptq/ptq_usage/quantize_compile.html#conversion_interpretation",children:"Model Conversion Interpretation"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["After conversion, the following outputs will be saved under the ",(0,r.jsx)(s.code,{children:"working_dir"})," path specified by the YAML file.\r\nFor details, refer to section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ptq/ptq_usage/quantize_compile.html#conversion_output",children:"Interpret Conversion Output"}),"."]}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-text",meta:"",children:[(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"\u251C\u2500\u2500 resnet50_224x224_nv12.html        # Static performance evaluation file (better readability)"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"\u251C\u2500\u2500 resnet50_224x224_nv12.json        # Static performance evaluation file"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"\u251C\u2500\u2500 resnet50_224x224_nv12.hbm         # Models for loading and running on the Horizon computing platform"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"\u251C\u2500\u2500 resnet50_224x224_nv12_calibrated_model.onnx"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"\u251C\u2500\u2500 resnet50_224x224_nv12_ptq_model.onnx"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"\u251C\u2500\u2500 resnet50_224x224_nv12_optimized_float_model.onnx"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"\u251C\u2500\u2500 resnet50_224x224_nv12_original_float_model.onnx"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"\u251C\u2500\u2500 resnet50_224x224_nv12_quant_info.json  # File containing operators calibrated quantization information "})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"\u251C\u2500\u2500 resnet50_224x224_nv12_advice.json  # Results file printed by the Horizon Model Compiler op checker"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"\u251C\u2500\u2500 resnet50_224x224_nv12_node_info.csv  # Results file containing cosine similarity and other information of the operator"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"\u2514\u2500\u2500 resnet50_224x224_nv12_quantized_model.bc"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive info",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"Note"}),(0,r.jsx)(s.div,{className:"rspress-directive-content",children:(0,r.jsxs)(s.p,{children:["If during model conversion there exists a situation of removing nodes at the input/output, the ",(0,r.jsx)(s.strong,{children:"*_quantized_removed_model.bc"})," will also be saved.\r\nIn this scenario, we recommend you to use this HBIR model to compare with the final generated hbm model if you need to do consistency comparison later."]})})]}),"\n",(0,r.jsxs)(s.h2,{id:"fast-performance-verification",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#fast-performance-verification",children:"#"}),"Fast Performance Verification"]}),"\n",(0,r.jsxs)(s.p,{children:["For the ",(0,r.jsx)(s.code,{children:"xxx.hbm"})," model file generated by the conversion, Horizon supports both first estimating the static performance of the BPU part of the model on the dev PC first, and providing an executable tool on the board to quickly evaluate the dynamic performance without any coding."]}),"\n",(0,r.jsxs)(s.p,{children:["For more detailed descriptions and performance tuning recommendations, refer to sections ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ptq/ptq_usage/performance_evaluation.html",children:"Model Performance Analysis"})," and ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/performance_tune.html",children:"Model Performance Optimization"}),"."]}),"\n",(0,r.jsxs)(s.h3,{id:"static-performance-evaluation",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#static-performance-evaluation",children:"#"}),"Static Performance Evaluation"]}),"\n",(0,r.jsxs)(s.p,{children:["As described in section ",(0,r.jsx)(s.a,{href:"#quickstart_model_conv",children:"Model Conversion"}),", after model conversion, HTML and JSON files containing static performance evaluation information for the model will be generated under the ",(0,r.jsx)(s.code,{children:"working_dir"})," path, both with the same content.\r\nBut the HTML file is more readable. The following is the HTML file generated by the ResNet50 model conversion, where:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"The Summary tab provides the performance of the BPU part of the model predicted by the compiler."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"summary_tab",src:o})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"The Temporal Statistics tab provides the bandwidth usage of the model during the inference time of one frame."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"temporal_statistics_tab",src:t})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"In addition, the Layer Details tab provides the computation amount, computation time, data handling time and the active time period of the compiled layer (does not represent the execution time of the layer, usually multiple layers alternate/execute in parallel) of each layer of BPU operators."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"layer_details_tab",src:a})}),"\n"]}),"\n"]}),"\n","\n",(0,r.jsxs)(s.h3,{id:"dynamic-performance-evaluation",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#dynamic-performance-evaluation",children:"#"}),"Dynamic Performance Evaluation"]}),"\n",(0,r.jsx)(s.p,{children:"Once the static performance of the model meets expectations, we can further evaluate the dynamic performance of the model on the board, and the reference method is as follows:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Make sure you have completed the environment deployment of the dev board according to section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/env_install.html",children:"Environment Deployment"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Copy the ",(0,r.jsx)(s.code,{children:"xxx.hbm"})," model generated by the conversion to any path in the ",(0,r.jsx)(s.code,{children:"/userdata"})," folder of the dev board."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Use the ",(0,r.jsx)(s.code,{children:"hrt_model_exec perf"})," tool to quickly evaluate the time consumption and frame rate of the model."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-bash",meta:"",children:[(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Copy the model to the dev board"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"scp"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"model_output/resnet50_224x224_nv12.hbm"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"root@{board_ip}:/userdata"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Log in to the dev board to evaluate the performance"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"ssh"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"root@{board_ip}"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"/userdata"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Evaluate the latency in the single-BPU core single-threaded serial state"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hrt_model_exec"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"perf"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--model_file"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"resnet50_224x224_nv12.hbm"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--thread_num"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--frame_count"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1000"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--input_stride="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"50176,224,1,1;25088,224,2,1"'})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Evaluate the FPS in the dual-BPU cores single-threaded concurrent state"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hrt_model_exec"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"perf"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--model_file"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"resnet50_224x224_nv12.hbm"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--core_id"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--thread_num"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"8"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--frame_count"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1000"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--input_stride="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"50176,224,1,1;25088,224,2,1"'})]}),"\n"]})})}),"\n",(0,r.jsxs)(s.p,{children:["The main parameters of the ",(0,r.jsx)(s.code,{children:"hrt_model_exec"})," tool are described as follows,\r\nrefer to the section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ucp/runtime/tool_introduction/hrt_model_exec.html",children:"hrt_model_exec Tool Introduction"})," for more instructions:"]}),"\n",(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Parameter"}),(0,r.jsx)("td",{children:"Type"}),(0,r.jsx)("td",{children:"Description"})]})}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"model_file"}),(0,r.jsx)("td",{children:"string"}),(0,r.jsx)("td",{children:"[Required] Model file path"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"core_id"}),(0,r.jsx)("td",{children:"int"}),(0,r.jsx)("td",{children:(0,r.jsxs)(s.p,{children:["[Optional] Used to specify the BPU operation core, defaults to 0.",(0,r.jsx)("br",{}),"\r\n0: Arbitrary core, the prediction library will automatically allocate schedules according to the load.",(0,r.jsx)("br",{}),"\r\n1: core0."]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"thread_num"}),(0,r.jsx)("td",{children:"int"}),(0,r.jsx)("td",{children:"[Optional] Number of threads to run the program, optional range [1,8], defaults to 1."})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"frame_count"}),(0,r.jsx)("td",{children:"int"}),(0,r.jsx)("td",{children:"[Optional] Total number of frames the model runs, defaults to 200."})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"profile_path"}),(0,r.jsx)("td",{children:"string"}),(0,r.jsx)("td",{children:"[Optional] Statistical tool log generation path, run to generate profiler.log and profiler.csv, analyze op time and scheduling time consumption."})]})]})]}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive info",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"Note"}),(0,r.jsx)(s.div,{className:"rspress-directive-content",children:(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["If you can't find the ",(0,r.jsx)(s.code,{children:"hrt_model_exec"})," tool on the board side, you can run the ",(0,r.jsx)(s.code,{children:"install.sh"})," script under the ",(0,r.jsx)(s.code,{children:"package/board"})," path in the OE package again."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["When evaluating Latency, you can specify ",(0,r.jsx)(s.code,{children:"thread_num"})," as 1 for single-threaded serial reasoning."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["When evaluating FPS, you usually use multi-threaded concurrent reasoning to fill up BPU resources, so you can configure ",(0,r.jsx)(s.code,{children:"core_id"})," to 0 and ",(0,r.jsx)(s.code,{children:"thread_num"})," to be multi-threaded."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["When the model input is dynamic, please fill in the ",(0,r.jsx)(s.code,{children:"input_valid_shape"})," and ",(0,r.jsx)(s.code,{children:"input_stride"})," parameters according to the actual input."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["If you configure the ",(0,r.jsx)(s.code,{children:"profile_path"})," parameter, the program needs to run normally before the ",(0,r.jsx)(s.code,{children:"profiler.log"})," log file and the ",(0,r.jsx)(s.code,{children:"profiler.csv"})," file will be generated, please do not use the ",(0,r.jsx)(s.code,{children:"Ctrl+C"})," command to interrupt the program."]}),"\n"]}),"\n"]})})]}),"\n",(0,r.jsxs)(s.p,{children:["When the dynamic performance of the model does not meet expectations, refer to the section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/performance_tune.html",children:"Model Performance Optimization"})," for performance tuning."]}),"\n",(0,r.jsxs)(s.h2,{id:"accuracy-verification",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#accuracy-verification",children:"#"}),"Accuracy Verification"]}),"\n",(0,r.jsxs)(s.p,{children:["Once the performance of the model has been verified as expected, subsequent accuracy verification can be performed.\r\nPlease first ensure that you have prepared the relevant evaluation datasets and mounted them in a Docker container.\r\nThe dataset used for the samples can be obtained by referring to the section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/appendix/dataset_link.html",children:"Dataset Download"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["As described in the section ",(0,r.jsx)(s.a,{href:"#quickstart_model_conv",children:"Model Conversion"}),", the model conversion generates two quantized models, ",(0,r.jsx)(s.code,{children:"xxx_quantized_model.bc"})," and ",(0,r.jsx)(s.code,{children:"xxx.hbm"}),",\r\nand the their outputs are kept numerically consistent."]}),"\n",(0,r.jsxs)(s.p,{children:["You can also use the ",(0,r.jsx)(s.code,{children:"hb_verifier"})," tool in the dev PC environment for consistency verification, the reference command is as follows,\r\nrefer to section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ptq/ptq_tool/hb_verifier.html",children:"The hb_verifier Tool"})," for detailed descriptions:"]}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-bash",meta:"",children:[(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hb_verifier"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-m"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"quantized.bc,model.hbm"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-i"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"runtime_input_data.npy"})]}),"\n"]})})}),"\n",(0,r.jsxs)(s.p,{children:["Compared to ",(0,r.jsx)(s.code,{children:"xxx.hbm"}),", Horizon recommends prioritizing the quantization accuracy of the ",(0,r.jsx)(s.code,{children:"xxx_quantized_model.bc"})," in the Python environment on the dev PC as it is much easier and faster,\r\nrefer to the section ",(0,r.jsx)(s.a,{href:"#board_python_env",children:"Development Machine Python Environment Verification"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"xxx.hbm"})," is evaluated on the board side based on C++ code, refer to the section ",(0,r.jsx)(s.a,{href:"#board_cpp_env",children:"Development Board C++ Environment Verification"}),".\r\nFor more detailed accuracy verification and optimization recommendations, refer to the sections ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ptq/ptq_usage/accuracy_evaluation.html",children:"Model Accuracy Analysis"})," and ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ptq/ptq_usage/accuracy_tune.html",children:"PTQ Model Accuracy Optimization"}),"."]}),"\n",(0,r.jsxs)(s.h3,{id:"board_python_env",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#board_python_env",children:"#"}),"Development Machine Python Environment Verification"]}),"\n",(0,r.jsxs)(s.p,{children:["Take the ResNet50 model as an example, for the single inference and verification set accuracy evaluation example of the quantized model ",(0,r.jsx)(s.code,{children:"resnet50_224x224_nv12_quantized_model.bc"}),",\r\nrefer to the scripts ",(0,r.jsx)(s.code,{children:"04_inference.sh"})," and ",(0,r.jsx)(s.code,{children:"05_evaluate.sh"})," in the sample directory. The reference commands are as follows:"]}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-bash",meta:"",children:[(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Test the single picture inference results of the quantitative model"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"bash"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"04"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"_inference.sh"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Test the single-picture inference results of the floating-point model (optional)"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"bash"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"04"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"_inference.sh"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"origin"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Test the accuracy of the quantitative model, make sure that your evaluation dataset is properly mounted in the Docker container"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"bash"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"05"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"_evaluate.sh"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Test the accuracy of the floating-point model (optional)"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"bash"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"05"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"_evaluate.sh"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"origin"})]}),"\n"]})})}),"\n",(0,r.jsxs)(s.p,{children:["The two scripts will perform the inference by calling ",(0,r.jsx)(s.code,{children:"../../cls_inference.py"})," and ",(0,r.jsx)(s.code,{children:"../../cls_evaluate.py"})," accordingly.\r\nTaking the ",(0,r.jsx)(s.code,{children:"cls_inference.py"})," file as an example, the usage logic of main interfaces in the code is as follows:"]}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-python",meta:"",children:[(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" numpy "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" np"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" typing "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Iterable"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_tc_ui "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" HBRuntime"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" preprocess "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" infer_image_preprocess"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" postprocess "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" postprocess"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# For the HBIR model with data type NV12, the NV12 data needs to be split into two inputs, y and uv"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"nv12_split_yuv"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"target_size"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" Iterable"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"input_shapes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"list"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"                 "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"input_data"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" np"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"ndarray) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"list"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:":"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  width"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" height "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" target_size"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  image "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" input_data"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"flatten"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  y_data "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" image"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"[:"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"width "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" height"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"reshape"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(input_shapes["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"])"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  uv_data "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" image"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"width "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" height"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":]."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"reshape"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(input_shapes["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"])"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" [y_data"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" uv_data]"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"inference"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"sess"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"image_name"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"input_layout"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:":"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" input_layout "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"is"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        input_layout "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sess"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"layout"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Preprocessing"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    input_names "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sess"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"input_names"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    output_names "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sess"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"output_names"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    image_data "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"infer_image_preprocess"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(image_name, input_layout)"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    image_data_processed "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"nv12_split_yuv"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(target_size"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"sess.sess."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"get_hw"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(),"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"                                          input_shapes"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"sess.input_shapes,"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"                                          input_data"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"image_data)"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    feed_data "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"dict"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"zip"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(input_names, image_data_processed))"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Model inference"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    output "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" sess"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"run"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(output_names, feed_data)"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Postprocessing"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    top_five_label_probs "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"postprocess"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(output)"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"main"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"model"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"image"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"input_layout"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"->"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:":"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    sess "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"HBRuntime"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(model"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"model)"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"inference"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(sess, image, input_layout)"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"__name__"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'__main__'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"main"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n"]})})}),"\n",(0,r.jsxs)(s.p,{children:["The preprocessing operations of the ",(0,r.jsx)(s.code,{children:"infer_image_preprocess"})," function come from the ",(0,r.jsx)(s.code,{children:"preprocess.py"})," file described in the section ",(0,r.jsx)(s.a,{href:"#calibration_data_preprocess",children:"Pre-processing Calibration Data"}),".\r\nCompared to the ",(0,r.jsx)(s.code,{children:"calibration_transformers"})," function, there is an additional process of transforming the data to ",(0,r.jsx)(s.code,{children:"input_type_rt"})," (for parameter descriptions, see the section ",(0,r.jsx)(s.a,{href:"#yaml_config",children:"Yaml Configuration File"}),").\r\nThe data preparation for HBIR model inference (including ",(0,r.jsx)(s.code,{children:"input_type_rt"})," to ",(0,r.jsx)(s.code,{children:"input_type_train"})," color conversion, mean/scale processing, etc.) will be done internally, so there is no need to do additional external normalization and other processing.\r\nThe specific code is as follows:"]}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-python",meta:"",children:[(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"infer_transformers"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"input_layout"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"NHWC"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    transformers "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"PILResizeTransformer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(size"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"short_size),"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"PILCenterCropTransformer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(size"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"crop_size),"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"RGB2NV12Transformer"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(data_format"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"HWC"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    ]"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" transformers"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"infer_image_preprocess"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"image_file"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"input_layout"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    transformers "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"infer_transformers"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(input_layout)"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    image "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"SingleImageDataLoader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(transformers,"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"                                  image_file,"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"                                  imread_mode"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'PIL'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" image"})]}),"\n"]})})}),"\n",(0,r.jsxs)(s.h3,{id:"board_cpp_env",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#board_cpp_env",children:"#"}),"Development Board C++ Environment Verification"]}),"\n",(0,r.jsxs)(s.p,{children:["On the development board side, Horizon provides the unify compute platform (UCP for short) to help you quickly complete the deployment of models,\r\nand provide related samples. You can refer to section ",(0,r.jsx)(s.a,{href:"#quickstart_model_deploy",children:"Model Deployment"})," to learn the basics of model deployment and BPU SDK API interface,\r\nand then to section ",(0,r.jsx)(s.a,{href:"#quickstart_ai_benchmark",children:"AI-Benchmark"})," to learn the complete code framework of the sample model accuracy evaluation."]}),"\n",(0,r.jsxs)(s.h4,{id:"quickstart_model_deploy",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#quickstart_model_deploy",children:"#"}),"Model Deployment"]}),"\n",(0,r.jsxs)(s.p,{children:["The OE package provides a basic example of model deployment in the following path to facilitate you to learn how to use the Model Inference API interface of UCP.\r\nFor details on the example, refer to the section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ucp/runtime/basic_sample.html",children:"Basic Sample User Guide"}),"."]}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"Attention"}),(0,r.jsxs)(s.div,{className:"rspress-directive-content",children:[(0,r.jsx)(s.p,{children:"Please note that before you can deploy the model, you need to obtain the models used on the board."}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Execute ",(0,r.jsx)(s.code,{children:"resolve_ai_benchmark_ptq.sh"})," and ",(0,r.jsx)(s.code,{children:"resolve_ai_benchmark_qat.sh"})," scripts in the ",(0,r.jsx)(s.code,{children:"samples/ai_toolchain/model_zoo/runtime/ai_benchmark"})," directory."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Execute ",(0,r.jsx)(s.code,{children:"resolve_runtime_sample.sh"})," script in the ",(0,r.jsx)(s.code,{children:"samples/ai_toolchain/model_zoo/runtime/basic_samples"})," directory."]}),"\n"]}),"\n"]})]})]}),"\n",(0,r.jsxs)(s.p,{children:["Among them, the ",(0,r.jsx)(s.code,{children:"code/00_quick_start/src/main.cc"})," file in the sample directory provides the complete flow code of the resnet50 model from preparing data to model inference,\r\nand then execution of post-processing to produce classification results."]}),"\n","\n",(0,r.jsxs)(s.p,{children:["The main code logic in ",(0,r.jsx)(s.code,{children:"main.cc"})," includes the following 6 steps. For instructions on the API interfaces involved in the code,\r\nrefer to the section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ucp/runtime/bpu_sdk_api/bpu_sdk_api_overview.html",children:"BPU SDK API DOC"}),"."]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Load the model and get the model handle."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Prepare the model input and output tensor and apply the corresponding BPU memory space."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Read the model input data and put it into the requested input tensor."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Infer the model and get the model output."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Implement the model post-processing based on the data in the output tensor."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Release the related resources."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-cpp",meta:"",children:[(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"main"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" argc"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"char"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"**"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"argv) {"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"  // Step1: get model handle"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  {"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hbDNNInitializeFromFiles"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"packed_dnn_handle"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"modelFileName"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hbDNNGetModelNameList"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"model_name_list"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"model_count"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" packed_dnn_handle);"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hbDNNGetModelHandle"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"dnn_handle"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" packed_dnn_handle"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"model_name_list"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]);"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"  // Step2: prepare input and output tensor"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  std"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"::"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"vector"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"hbDNNTensor"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" input_tensors;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  std"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"::"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"vector"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"hbDNNTensor"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" output_tensors;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" input_count "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" output_count "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  {"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hbDNNGetInputCount"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"input_count"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" dnn_handle);"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hbDNNGetOutputCount"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"output_count"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" dnn_handle);"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"input_tensors"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"resize"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(input_count);"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"output_tensors"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"resize"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(output_count);"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"prepare_tensor"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"input_tensors"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"data"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"output_tensors"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"data"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" dnn_handle);"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"  // Step3: set input data to input tensor"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  {"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // read a single picture for input_tensor[0], for multi_input model, you"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // should set other input data according to model input properties."})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"read_image_2_tensor_as_nv12"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(FLAGS_image_file"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"input_tensors"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"data"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"());"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"  // Step4: run inference"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  {"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // make sure memory data is flushed to DDR before inference"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" i "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"; i "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" input_count; i"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"++"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPMemFlush"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"input_tensors"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"[i]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"sysMem"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" HB_SYS_MEM_CACHE_CLEAN);"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // generate task handle"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hbDNNInferV2"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"task_handle"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" output"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"input_tensors"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"data"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" dnn_handle)"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // submit task"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    hbUCPSchedParam ctrl_param;"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"HB_UCP_INITIALIZE_SCHED_PARAM"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"ctrl_param);"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"ctrl_param"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"backend "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" HB_UCP_BPU_CORE_ANY;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPSubmitTask"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(task_handle"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"ctrl_param);"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // wait task done"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPWaitTaskDone"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(task_handle"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"  // Step5: do postprocess with output data"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  std"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"::"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"vector"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Classification"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" top_k_cls;"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  {"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // make sure CPU read data from DDR before using output tensor data"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" i "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"; i "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" output_count; i"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"++"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPMemFlush"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"output_tensors"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"[i]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"sysMem"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" HB_SYS_MEM_CACHE_INVALIDATE);"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"get_topk_result"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(output"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" top_k_cls"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" FLAGS_top_k);"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" i "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"; i "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" FLAGS_top_k; i"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"++"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"LOGI"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"TOP {} result id: {}"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" i"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"top_k_cls"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"[i]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"id);"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"  // Step6: release resources"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  {"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // release task handle"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPReleaseTask"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(task_handle);"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // free input mem"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" i "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"; i "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" input_count; i"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"++"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPFree"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"input_tensors"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"[i]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"sysMem);"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // free output mem"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" i "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"; i "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" output_count; i"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"++"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hbUCPFree"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"output_tensors"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"[i]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"sysMem));"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // release model"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hbDNNRelease"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(packed_dnn_handle);"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n"]})})}),"\n",(0,r.jsx)(s.p,{children:"The sample running is referenced as follows:"}),"\n",(0,r.jsx)(s.pre,{className:"code",children:(0,r.jsx)(s.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(s.code,{className:"language-bash",meta:"",children:[(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Enter the code directory"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"samples/ucp_tutorial/dnn/basic_samples/code"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# resolve dependencies"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"bash"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"resolve.sh"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# In the dev PC environment, perform cross-compilation to generate executable programs"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"bash"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"build_aarch64.sh"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Copy the runtime directory to the board"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"mkdir"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-p"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"../runtime/model/runtime/"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"scp"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-r"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"../runtime/"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"root@{board_ip}:/userdata"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Copy the model file to the board"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"scp"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-r"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"../../model_zoo/runtime/basic_samples/resnet50/"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"root@{board_ip}:/userdata/runtime/model/runtime"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number"}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Log in to the dev board"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"ssh"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"root@{board_ip}"})]}),"\n",(0,r.jsx)(s.span,{className:"line line-number",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# Go to the runtime/script/ directory and execute the corresponding run script"})}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"/userdata/runtime/script/00_quick_start/"})]}),"\n",(0,r.jsxs)(s.span,{className:"line line-number",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"bash"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"run_resnet_nv12.sh"})]}),"\n"]})})}),"\n",(0,r.jsxs)(s.h4,{id:"quickstart_ai_benchmark",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#quickstart_ai_benchmark",children:"#"}),"AI-Benchmark"]}),"\n",(0,r.jsxs)(s.p,{children:["The OE package also provides sample packages for typical classification, detection, segmentation,\r\nand optical flow sample model board-side performance and accuracy evaluation under the ",(0,r.jsx)(s.code,{children:"samples/ai_toolchain/ucp_tutorial/dnn/ai_benchmark"})," path,\r\non top of which you can continue with further application development."]}),"\n",(0,r.jsxs)(s.p,{children:["For more details, you can refer to the section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ucp/runtime/ai_benchmark.html",children:"AI Benchmark User Guide"}),"."]}),"\n",(0,r.jsxs)(s.h2,{id:"application-development",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#application-development",children:"#"}),"Application Development"]}),"\n",(0,r.jsxs)(s.p,{children:["When you are satisfied with the performance and accuracy of the model,\r\nyou can then continue with the development of the upper-level application by referring to the steps described in the section ",(0,r.jsx)(s.a,{href:"/3.0.22/en/guide/ucp/runtime/runtime_dev.html",children:"Embedded Application Development"}),"."]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,i.ah)(),e.components);return s?(0,r.jsx)(s,Object.assign({},e,{children:(0,r.jsx)(h,e)})):h(e)}s.default=d,d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["3.0.22%2Fen%2Fguide%2Ffaststart%2Fptq_quickstart.mdx"]={toc:[{id:"floating-point-model-preparation",text:"Floating-point Model Preparation",depth:2},{id:"model-checking",text:"Model Checking",depth:2},{id:"model-conversion",text:"Model Conversion",depth:2},{id:"yaml_config",text:"YAML Configuration File",depth:3},{id:"calibration_data_preprocess",text:"Pre-processing Calibration Data",depth:3},{id:"quickstart_model_conv",text:"Model Conversion",depth:3},{id:"fast-performance-verification",text:"Fast Performance Verification",depth:2},{id:"static-performance-evaluation",text:"Static Performance Evaluation",depth:3},{id:"dynamic-performance-evaluation",text:"Dynamic Performance Evaluation",depth:3},{id:"accuracy-verification",text:"Accuracy Verification",depth:2},{id:"board_python_env",text:"Development Machine Python Environment Verification",depth:3},{id:"board_cpp_env",text:"Development Board C++ Environment Verification",depth:3},{id:"quickstart_model_deploy",text:"Model Deployment",depth:4},{id:"quickstart_ai_benchmark",text:"AI-Benchmark",depth:4},{id:"application-development",text:"Application Development",depth:2}],title:"Algorithm Model PTQ + On-board Deployment Quick Start",frontmatter:{}}},95895:function(e,s,n){n(39710);var r=n(85893),i=n(67294),l=n(45687);n(20388);let o={"zh-CN":e=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${e.minutes>=1?`${Math.ceil(e.minutes)} \u{5206}\u{949F}`:"\u5C0F\u4E8E 1 \u5206\u949F"}`,"en-US":e=>`Estimated reading time: ${e.minutes>=1?`${Math.ceil(e.minutes)} minutes`:"less than 1 minute"}`};function t(e,s,n){let r=Object.keys(o).includes(s)?s:n;return o[r](e)}s.Z=e=>{let{defaultLocale:s="en-US"}=e,n=(0,l.Vi)().page.readingTimeData,o=(0,l.Jr)(),a=(0,l.e7)(),[c,h]=(0,i.useState)(t(n,o,s));return(0,i.useEffect)(()=>{h(t(n,o,s))},[o,n]),(0,r.jsx)("span",{"data-dark":String(a),className:"rp-reading-time",children:c})}}}]);