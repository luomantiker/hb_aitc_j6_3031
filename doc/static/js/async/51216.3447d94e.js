"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["51216"],{63085:function(e,n,s){s.r(n);var r=s(85893),i=s(50065),l=s(95895);function t(e){let n=Object.assign({h1:"h1",a:"a",pre:"pre",code:"code",span:"span",p:"p",ul:"ul",li:"li",table:"table",thead:"thead",tr:"tr",th:"th",strong:"strong",tbody:"tbody",td:"td"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"hbvpjpegencode",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#hbvpjpegencode",children:"#"}),"hbVPJPEGEncode"]}),"\n",(0,r.jsx)(l.Z,{}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-c",meta:"",children:[(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"typedef"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"void"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hbVPJPEGContext;"})]}),"\n"]})})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/3.0.22/en/guide/ucp/vp/vp7_reference/vp7_function_interface/hbvpjpegencode.html",children:"hbVPJPEGEncode"})," operator and the context description handle for the ",(0,r.jsx)(n.a,{href:"/3.0.22/en/guide/ucp/vp/vp7_reference/vp7_function_interface/hbvpjpegdecode.html",children:"hbVPJPEGDecode"})," operator, the handle contains the necessary description information to run on the JPU and can be reused."]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-c",meta:"",children:[(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"typedef"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"struct"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"uint8_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" extendedSequential;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"uint8_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" imageFormat;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" width;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" height;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"uint32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" qualityFactor;"})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"uint32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" outBufCount;"})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"} hbVPJPEGEncParam;"})}),"\n"]})})}),"\n",(0,r.jsx)(n.p,{children:"Encoding parameter for JPEG coding."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Member"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Member Name"})}),(0,r.jsx)(n.th,{children:(0,r.jsx)(n.strong,{children:"Description"})})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"extendedSequential"})}),(0,r.jsx)(n.td,{children:"Only 8bit encoding is supported, the parameter value is 0.."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"imageFormat"})}),(0,r.jsxs)(n.td,{children:["Input image format. Currently supports ",(0,r.jsx)(n.code,{children:"HB_VP_IMAGE_FORMAT_NV12"}),", ",(0,r.jsx)(n.code,{children:"HB_VP_IMAGE_FORMAT_YUV420"}),", ",(0,r.jsx)(n.code,{children:"HB_VP_IMAGE_FORMAT_YUV444"})," and ",(0,r.jsx)(n.code,{children:"HB_VP_IMAGE_FORMAT_YUV444_P"})," format."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"width"})}),(0,r.jsx)(n.td,{children:"The width of the input picture. The range of values is [32, 8192]."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"height"})}),(0,r.jsx)(n.td,{children:"The height of the input picture. The range of values is [32, 8192]."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"qualityFactor"})}),(0,r.jsx)(n.td,{children:"The encoding quality takes values in the range [1, 100], recommended value 50, the smaller the value the worse the picture quality."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"outBufCount"})}),(0,r.jsx)(n.td,{children:"The count of JPU internal output buffers. The range of values is [1, 1000], recommended value 5."})]})]})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-c",meta:"",children:[(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPCreateJPEGEncContext"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(hbVPJPEGContext "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"context"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                                 hbVPJPEGEncParam "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"param);"})]}),"\n"]})})}),"\n",(0,r.jsx)(n.p,{children:"Create the encoder context API and initialize context to nullptr in advance before creation."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Parameter","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["[out] ",(0,r.jsx)(n.code,{children:"context"})," The encoder context."]}),"\n",(0,r.jsxs)(n.li,{children:["[in] ",(0,r.jsx)(n.code,{children:"param"})," Pointer to the encoding parameter."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Return Value","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Return ",(0,r.jsx)(n.code,{children:"0"})," means the API was successfully executed, otherwise the execution failed."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Description of interface limitations","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["When ",(0,r.jsx)(n.code,{children:"imageFormat"})," is in ",(0,r.jsx)(n.code,{children:"HB_VP_IMAGE_FORMAT_NV12"})," or ",(0,r.jsx)(n.code,{children:"HB_VP_IMAGE_FORMAT_YUV420"})," format, it is required that ",(0,r.jsx)(n.code,{children:"width"})," satisfies ",(0,r.jsx)(n.code,{children:"16"})," alignment and ",(0,r.jsx)(n.code,{children:"height"})," satisfies ",(0,r.jsx)(n.code,{children:"8"})," alignment."]}),"\n",(0,r.jsxs)(n.li,{children:["When ",(0,r.jsx)(n.code,{children:"imageFormat"})," is in ",(0,r.jsx)(n.code,{children:"HB_VP_IMAGE_FORMAT_YUV444"})," or ",(0,r.jsx)(n.code,{children:"HB_VP_IMAGE_FORMAT_YUV444_P"})," format, it is required that ",(0,r.jsx)(n.code,{children:"width"})," satisfies ",(0,r.jsx)(n.code,{children:"8"})," alignment and ",(0,r.jsx)(n.code,{children:"height"})," satisfies ",(0,r.jsx)(n.code,{children:"8"})," alignment."]}),"\n",(0,r.jsxs)(n.li,{children:["Due to hardware limitations, the encoder internally encodes in ",(0,r.jsx)(n.code,{children:"16x16"})," units. When the data to be encoded is not ",(0,r.jsx)(n.code,{children:"16x16"})," aligned, there will be a difference in the last part of the encoded data that is randomly filled, but it will not affect the valid data, and the encoded data resolution will not be changed.\nSo you need to pay attention to this point when doing md5 comparison."]}),"\n",(0,r.jsx)(n.li,{children:"JPU supports the creation of contexts for the highest 64-way encoding or decoding."}),"\n",(0,r.jsx)(n.li,{children:"JPU only support 8bit data encoding."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-c",meta:"",children:[(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPReleaseJPEGEncContext"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(hbVPJPEGContext context);"})]}),"\n"]})})}),"\n",(0,r.jsx)(n.p,{children:"Release the encoder context API."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Parameter","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["[in] ",(0,r.jsx)(n.code,{children:"context"})," The encoder context."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Return Value","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Return ",(0,r.jsx)(n.code,{children:"0"})," means the API was successfully executed, otherwise the execution failed."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-c",meta:"",children:[(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPJPEGEncode"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"hbUCPTaskHandle_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"taskHandle"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                       hbVPImage "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"srcImg"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(n.span,{className:"line line-number",children:(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                       hbVPJPEGContext context);"})}),"\n"]})})}),"\n",(0,r.jsx)(n.p,{children:"The API for calling the JPEG encoding."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Parameter","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["[out] ",(0,r.jsx)(n.code,{children:"taskHandle"})," Task handles are responsible for the interaction of the operator with the UCP architecture."]}),"\n",(0,r.jsxs)(n.li,{children:["[in] ",(0,r.jsx)(n.code,{children:"srcImg"})," The memory address where the encoded picture is stored."]}),"\n",(0,r.jsxs)(n.li,{children:["[in] ",(0,r.jsx)(n.code,{children:"context"})," The encoder context."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Return Value","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Return ",(0,r.jsx)(n.code,{children:"0"})," means the API was successfully executed, otherwise the execution failed."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Description of interface limitations","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Only asynchronous task creation is supported."}),"\n",(0,r.jsx)(n.li,{children:"To avoid wasting system resources and improve JPU encoding performance, it is recommended to reuse input addresses."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{className:"code",children:(0,r.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,r.jsxs)(n.code,{className:"language-c",meta:"",children:[(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"int32_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"hbVPGetJPEGEncOutputBuffer"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(hbVPArray "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"outBuf"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n",(0,r.jsxs)(n.span,{className:"line line-number",children:[(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                                   "}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"hbUCPTaskHandle_t"}),(0,r.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" taskHandle);"})]}),"\n"]})})}),"\n",(0,r.jsx)(n.p,{children:"The API for calling the JPEG encoding output buffer."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Parameter","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["[out] ",(0,r.jsx)(n.code,{children:"outBuf"})," The memory address where the encoded JPEG data is stored."]}),"\n",(0,r.jsxs)(n.li,{children:["[in] ",(0,r.jsx)(n.code,{children:"taskHandle"})," Task handles are responsible for the interaction of the operator with the UCP architecture."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Return Value","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Return ",(0,r.jsx)(n.code,{children:"0"})," means the API was successfully executed, otherwise the execution failed."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Description of interface limitations","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The JPEG buffer ",(0,r.jsx)(n.code,{children:"outBuf"})," is allocated internally by the JPU."]}),"\n",(0,r.jsx)(n.li,{children:"The buffer contains valid data upon the task is successfully completed, and is released during the task release phase."}),"\n"]}),"\n"]}),"\n"]})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(t,e)})):t(e)}n.default=c,c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["3.0.22%2Fen%2Fguide%2Fucp%2Fvp%2Fvp7_reference%2Fvp7_function_interface%2Fhbvpjpegencode.mdx"]={toc:[],title:"hbVPJPEGEncode",frontmatter:{}}},95895:function(e,n,s){s(39710);var r=s(85893),i=s(67294),l=s(45687);s(20388);let t={"zh-CN":e=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${e.minutes>=1?`${Math.ceil(e.minutes)} \u{5206}\u{949F}`:"\u5C0F\u4E8E 1 \u5206\u949F"}`,"en-US":e=>`Estimated reading time: ${e.minutes>=1?`${Math.ceil(e.minutes)} minutes`:"less than 1 minute"}`};function c(e,n,s){let r=Object.keys(t).includes(n)?n:s;return t[r](e)}n.Z=e=>{let{defaultLocale:n="en-US"}=e,s=(0,l.Vi)().page.readingTimeData,t=(0,l.Jr)(),o=(0,l.e7)(),[a,d]=(0,i.useState)(c(s,t,n));return(0,i.useEffect)(()=>{d(c(s,t,n))},[t,s]),(0,r.jsx)("span",{"data-dark":String(o),className:"rp-reading-time",children:a})}}}]);