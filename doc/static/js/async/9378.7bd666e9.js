"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["9378"],{17635:function(e,n,s){e.exports=s.p+"static/image/accuracy_debug_process.02aa5042.png"},68375:function(e,n,s){e.exports=s.p+"static/image/activate_calibration_node.608c4a65.png"},12979:function(e,n,s){e.exports=s.p+"static/image/activation.abd0273e.png"},77085:function(e,n,s){e.exports=s.p+"static/image/average_mode_false_1.b0c6638a.png"},68939:function(e,n,s){e.exports=s.p+"static/image/average_mode_false_2.c22895de.png"},25045:function(e,n,s){e.exports=s.p+"static/image/average_mode_true_1.8fe59675.png"},96582:function(e,n,s){e.exports=s.p+"static/image/average_mode_true_2.8f7f7342.png"},69916:function(e,n,s){e.exports=s.p+"static/image/box_plot.b4527979.png"},83776:function(e,n,s){e.exports=s.p+"static/image/debug_node.cfffabea.png"},1997:function(e,n,s){e.exports=s.p+"static/image/new_average_mode_false_1.3ac6a9cf.png"},69917:function(e,n,s){e.exports=s.p+"static/image/new_average_mode_false_2.f5620ac4.png"},87389:function(e,n,s){e.exports=s.p+"static/image/new_average_mode_true_1.21c29d86.png"},65392:function(e,n,s){e.exports=s.p+"static/image/new_average_mode_true_2.d4be239b.png"},35633:function(e,n,s){e.exports=s.p+"static/image/node_output.69c59139.png"},54404:function(e,n,s){e.exports=s.p+"static/image/partial_quantization.1ce09434.png"},49866:function(e,n,s){e.exports=s.p+"static/image/runall.28429c38.png"},12233:function(e,n,s){e.exports=s.p+"static/image/weight.adea0f1c.png"},99123:function(e,n,s){e.exports=s.p+"static/image/weight_activation_quantized.cc7ea431.png"},37961:function(e,n,s){e.exports=s.p+"static/image/weight_calibration_node.c7af2fd5.png"},83637:function(e,n,s){s.r(n);var i=s(85893),r=s(50065),l=s(95895),t=s(17635),o=s(83776),a=s(77085),c=s(25045),d=s(1997),h=s(87389),x=s(68939),p=s(96582),j=s(69917),u=s(65392),k=s(99123),m=s(35633),y=s(12233),v=s(12979),b=s(37961),g=s(68375),_=s(69916),f=s(54404),N=s(49866);function w(e){let n=Object.assign({h1:"h1",a:"a",p:"p",ol:"ol",li:"li",ul:"ul",h2:"h2",code:"code",strong:"strong",img:"img",h3:"h3",div:"div",pre:"pre",span:"span",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,r.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"accuracy-debug-tool",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#accuracy-debug-tool",children:"#"}),"Accuracy Debug Tool"]}),"\n",(0,i.jsx)(l.Z,{}),"\n",(0,i.jsx)(n.p,{children:"The model conversion toolchain will quantize the calibration of the model based on the calibration samples you provide and guarantee efficient deployment of the model on the Horizon computing platform.\nIn the process of model conversion, accuracy loss is inevitably introduced due to the quantization process from floating point to fixed point. Usually, the main reasons for accuracy loss may be the following:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"A part of the nodes in the model is more sensitive to quantizationwill introduce larger errors, i.e., sensitive node quantization problem."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The error cumulation of each node in the model leads to a large calibration error in the model as a whole, which mainly contains: error cumulation caused by weight quantization, error cumulation caused by activation quantization and error cumulation caused by full quantization."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"In this case, Horizon provides the accuracy debug tool to help you locate accuracy problems in the model quantization process on your own.\nThe tool can help you to analyze the node-granularity quantization error of the calibration model, and finally help you to quickly locate the nodes with accuracy anomalies."}),"\n",(0,i.jsx)(n.p,{children:"The accuracy debug tool provides a variety of analysis functions for you to use, such as:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Get the node quantization sensitivity."}),"\n",(0,i.jsx)(n.li,{children:"Get the cumulative error curve of the model."}),"\n",(0,i.jsx)(n.li,{children:"Get the data distribution of the specified node."}),"\n",(0,i.jsx)(n.li,{children:"Get the box plot of data distribution between input data channels of a specified node, etc."}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"quickstart",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#quickstart",children:"#"}),"Quickstart"]}),"\n",(0,i.jsx)(n.p,{children:"There are several steps to use the accuracy debug tool as follows:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Configure the parameter ",(0,i.jsx)(n.code,{children:'debug_mode: "dump_calibration_data"'})," in the ",(0,i.jsx)(n.strong,{children:"model_parameters"})," group in yaml to save the calibration data."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Import the debug module and load the calibration model and data."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Analyze the models with significant accuracy loss through the API provided by the accuracy debug tool."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The overall process is shown as the follow:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"accuracy_debug_process",src:t})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Confirm cumulative error of separate quantized activation/weight, see: ",(0,i.jsx)(n.a,{href:"#plot_acc_error",children:"plot_acc_error"})," section for details."]}),"\n",(0,i.jsxs)(n.li,{children:["Activation sensitivity sort, see: ",(0,i.jsx)(n.a,{href:"#get_sensitivity_of_nodes",children:"get_sensitivity_of_nodes"})," section for details."]}),"\n",(0,i.jsxs)(n.li,{children:["Weight sensitivity sort, see:",(0,i.jsx)(n.a,{href:"#get_sensitivity_of_nodes",children:"get_sensitivity_of_nodes"})," section for details."]}),"\n",(0,i.jsxs)(n.li,{children:["Node sensitivity sort, see: ",(0,i.jsx)(n.a,{href:"#get_sensitivity_of_nodes",children:"get_sensitivity_of_nodes"})," section for details."]}),"\n",(0,i.jsxs)(n.li,{children:["Check the distribution of sensitive activation layers, see: ",(0,i.jsx)(n.a,{href:"#plot_distribution",children:"plot_distribution"})," and ",(0,i.jsx)(n.a,{href:"#get_channelwise_data_distribution",children:"get_channelwise_data_distribution"})," for details."]}),"\n",(0,i.jsxs)(n.li,{children:["Check the distribution of sensitive weights, see: ",(0,i.jsx)(n.a,{href:"#plot_distribution",children:"plot_distribution"})," and ",(0,i.jsx)(n.a,{href:"#get_channelwise_data_distribution",children:"get_channelwise_data_distribution"})," for details."]}),"\n",(0,i.jsxs)(n.li,{children:["Individual quantization and partial quantization testing of sensitive nodes, see: ",(0,i.jsx)(n.a,{href:"#sensitivity_analysis",children:"sensitivity_analysis"})," section for details."]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"calibration-models-and-data-storage",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#calibration-models-and-data-storage",children:"#"}),"Calibration Models and Data Storage"]}),"\n",(0,i.jsxs)(n.p,{children:["First you need to configure ",(0,i.jsx)(n.code,{children:'debug_mode: "dump_calibration_data"'})," in the yaml file to enable the accuracy debug function.\nSave the calibration data (calibration_data), and the related calibration model(calibrated_model.onnx) is saved in a constant state. In which:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Calibration data (calibration_data): In the calibration phase, the model obtains the quantization parameters of each quantized node by forward inference on these data, including: scale and threshold."}),"\n",(0,i.jsx)(n.li,{children:"Calibration model (calibrated_model.onnx): the quantization parameters of each quantized node calculated in the calibration phase are saved in the calibration node to obtain the calibration model."}),"\n"]}),"\n",(0,i.jsxs)(n.div,{className:"rspress-directive info",children:[(0,i.jsx)(n.div,{className:"rspress-directive-title",children:"Note"}),(0,i.jsxs)(n.div,{className:"rspress-directive-content",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What is the difference between the calibration data saved here and the calibration data generated by 02_preprocess.sh?"})}),(0,i.jsxs)(n.p,{children:["In J6 toolchain, ",(0,i.jsx)(n.code,{children:"02_preprocess.sh"})," gets the same calibration data as the one saved here, both in .npy format, which can be used directly in the debug tool to test the model accuracy. Note that you need to make sure that the folder structure of the calibration data from ",(0,i.jsx)(n.code,{children:"02_preprocess.sh"})," is the same as the folder structure of the calibration data saved here before feeding it into the debug tool."]})]})]}),"\n",(0,i.jsxs)(n.div,{className:"rspress-directive info",children:[(0,i.jsx)(n.div,{className:"rspress-directive-title",children:"Note"}),(0,i.jsxs)(n.div,{className:"rspress-directive-content",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Calibration model (calibrated_model.onnx) interpretation"})}),(0,i.jsxs)(n.p,{children:["The calibration model is an intermediate product obtained by the model transformation tool chain by taking the floating point model after structural optimization, calculating the quantization parameters corresponding to each node from the calibration data and saving them in the calibration node.\nThe main feature of the calibration model is that the model contains calibration nodes with the node type HzCalibration.\nThese calibration nodes are divided into two main categories: ",(0,i.jsx)(n.strong,{children:"activation calibration nodes"})," and ",(0,i.jsx)(n.strong,{children:"weight calibration nodes"})," ."]}),(0,i.jsxs)(n.p,{children:["The input of ",(0,i.jsx)(n.strong,{children:"activation calibration node"})," is the output of the previous node of the current node, and the input data is quantized and inverse quantized based on the quantization parameters (scales and thresholds) saved in the current activation calibration node and then output."]}),(0,i.jsxs)(n.p,{children:["The input of ",(0,i.jsx)(n.strong,{children:"weight calibration node"})," is the original floating point weights of the model, and the input original floating point weights are quantized and inverse quantized based on the quantization parameters (scales and thresholds) saved in the current weight calibration node and then output."]}),(0,i.jsxs)(n.p,{children:["In addition to the above calibration nodes, other nodes in the calibration model are called ",(0,i.jsx)(n.strong,{children:"general nodes"})," by the accuracy debug tool. The types of ",(0,i.jsx)(n.strong,{children:"general nodes"})," are: Conv, Mul, Add, etc."]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"debug_node",src:o})}),"\n",(0,i.jsx)(n.p,{children:"The folder structure of calibration_data is as follows:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-text",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|--calibration_data : calibration data"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|----input.1 : folder named input node of the model and save the corresponding input data"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|--------0.npy"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|--------1.npy"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|-------- ..."})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|----input.2 : for multi-input models multiple folders will be saved"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|--------0.npy"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|--------1.npy"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|-------- ..."})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,i.jsxs)(n.h3,{id:"accuracy-debug-module-import-and-usage",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#accuracy-debug-module-import-and-usage",children:"#"}),"Accuracy Debug Module Import and Usage"]}),"\n",(0,i.jsxs)(n.p,{children:["Next, you need to import the debug module into your code and get the quantization sensitivity of nodes (by default, the cosine similarity of the model output is used) via the ",(0,i.jsx)(n.code,{children:"get_sensitivity_of_nodes"})," interface.\nA detailed description of the parameters of ",(0,i.jsx)(n.code,{children:"get_sensitivity_of_nodes"})," can be found in ",(0,i.jsx)(n.a,{href:"#get_sensitivity_of_nodes",children:"get_sensitivity_of_nodes"})," section."]}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Import the debug module"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_nn"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantizer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Import the log module"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" logging"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# If verbose=True, you need to set the log level to INFO first."})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"logging"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"getLogger"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"setLevel"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(logging.INFO)"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Get node quantization sensitivity"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"node_message "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"get_sensitivity_of_nodes"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        model_or_file"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibrated_model.onnx'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        metrics"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'cosine-similarity'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'mse'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"],"})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        calibrated_data"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibration_data/'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        output_node"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        node_type"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'node'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        data_num"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        verbose"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"True"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        interested_nodes"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.h3,{id:"analysis-result-display",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#analysis-result-display",children:"#"}),"Analysis Result Display"]}),"\n",(0,i.jsxs)(n.p,{children:["The following is the result when ",(0,i.jsx)(n.code,{children:"verbose=True"})," is printed:"]}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-text",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"=================node sensitivity================="})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"node                  cosine-similarity  mse"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"---------------------------------------------------"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_60               0.77795            68.02103"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_48               0.78428            64.36318"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_82               0.80394            61.09268"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_94               0.80499            65.05224"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_42               0.83787            49.4949"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_88               0.84614            49.81132"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_54               0.86602            41.69972"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_71               0.87148            39.96296"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_65               0.87495            40.45997"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_25               0.89214            34.30351"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_20               0.89829            32.35053"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_77               0.89916            31.9907"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_14               0.90058            32.40179"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_9                0.90107            34.08191"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_37               0.91162            28.21194"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_31               0.91637            28.79291"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,i.jsx)(n.p,{children:"In addition, the API will return the node quantization sensitivity information to you in the form of a dictionary (Dict) for subsequent analysis."}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-text",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Out: "})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"{'Conv_60': {'cosine-similarity': 0.77795, 'mse': 68.02103},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_48': {'cosine-similarity': 0.78428, 'mse': 64.36318},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_82': {'cosine-similarity': 0.80394, 'mse': 61.09268},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_94': {'cosine-similarity': 0.80499, 'mse': 65.05224},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_42': {'cosine-similarity': 0.83787, 'mse': 49.4949},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_88': {'cosine-similarity': 0.84614, 'mse': 49.81132},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_54': {'cosine-similarity': 0.86602, 'mse': 41.69972},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_71': {'cosine-similarity': 0.87148, 'mse': 39.96296},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_65': {'cosine-similarity': 0.87495, 'mse': 40.45997},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_25': {'cosine-similarity': 0.89214, 'mse': 34.30351},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_20': {'cosine-similarity': 0.89829, 'mse': 32.35053},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_77': {'cosine-similarity': 0.89916, 'mse': 31.9907},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_14': {'cosine-similarity': 0.90058, 'mse': 32.40179},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_9': {'cosine-similarity': 0.90107, 'mse': 34.08191},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_37': {'cosine-similarity': 0.91162, 'mse': 28.21194},"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_31': {'cosine-similarity': 0.91637, 'mse': 28.79291}}"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,i.jsxs)(n.p,{children:["For more functions, see ",(0,i.jsx)(n.a,{href:"#debug_api",children:"Function Description"})," section."]}),"\n",(0,i.jsxs)(n.p,{children:["For customer convenience, the precision debug tool can also be used via the command line, which can be viewed via ",(0,i.jsx)(n.code,{children:"hmct-debugger -h/--help"})," the subcommands corresponding to each function.\nThe detailed arguments and usage of each subcommand can be found in the ",(0,i.jsx)(n.a,{href:"#debug_api",children:"Function Description"})," section."]}),"\n",(0,i.jsxs)(n.h2,{id:"debug_api",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#debug_api",children:"#"}),"Function Description"]}),"\n",(0,i.jsxs)(n.h3,{id:"get_sensitivity_of_nodes",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#get_sensitivity_of_nodes",children:"#"}),"get_sensitivity_of_nodes"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Function"}),": Get the node quantization sensitivity."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Command line format"}),":"]}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger get"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"sensitivity"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"of"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"nodes MODEL_OR_FILE CALIBRATION_DATA --other options"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:["The parameters can be viewed via ",(0,i.jsx)(n.code,{children:"hmct-debugger get-sensitivity-of-nodes -h/--help"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{align:"left",children:(0,i.jsx)(n.strong,{children:"Parameter"})}),(0,i.jsx)(n.th,{align:"left",children:(0,i.jsx)(n.strong,{children:"Abbr for Command Line Paramters"})}),(0,i.jsx)(n.th,{align:"left",children:(0,i.jsx)(n.strong,{children:"Description"})}),(0,i.jsx)(n.th,{align:"left",children:(0,i.jsx)(n.strong,{children:"Required/Optional"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.code,{children:"model_or_file"})}),(0,i.jsx)(n.td,{align:"left",children:"Fixed parameter"}),(0,i.jsxs)(n.td,{align:"left",children:[(0,i.jsx)(n.strong,{children:"PURPOSE"}),": Specify the calibration model.   ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"RANGE"}),": None.  ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"DESCRIPTIONS"}),": Required, specify the calibration model to be analyzed."]}),(0,i.jsx)(n.td,{align:"left",children:"Required"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.code,{children:"metrics"})}),(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.code,{children:"-m"})}),(0,i.jsxs)(n.td,{align:"left",children:[(0,i.jsx)(n.strong,{children:"PURPOSE"}),": The measure of node quantification sensitivity. ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"RANGE"}),": ",(0,i.jsx)(n.code,{children:"'cosine-similarity'"})," , ",(0,i.jsx)(n.code,{children:"'mse'"})," , ",(0,i.jsx)(n.code,{children:"'mre'"})," , ",(0,i.jsx)(n.code,{children:"'sqnr'"})," , ",(0,i.jsx)(n.code,{children:"'chebyshev'"})," . ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"DEFAULT VALUE"}),": ",(0,i.jsx)(n.code,{children:"'cosine-similarity'"}),".  ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"DESCRIPTIONS"}),": Specify how the node quantization sensitivity is calculated, and this parameter can be a List, i.e., calculating the quantized sensitivities in a variety of ways. However, the output is sorted by the calculation of the first position in the list only, and the higher the ranking indicates that the error introduced by quantifying that node is greater."]}),(0,i.jsx)(n.td,{align:"left",children:"Optional"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.code,{children:"calibrated_data"})}),(0,i.jsx)(n.td,{align:"left",children:"Fixed parameter"}),(0,i.jsxs)(n.td,{align:"left",children:[(0,i.jsx)(n.strong,{children:"PURPOSE"}),": Specify the calibration data. ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"RANGE"}),": None. ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"DESCRIPTIONS"}),": Required, specify the calibration data needed for the analysis."]}),(0,i.jsx)(n.td,{align:"left",children:"Required"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.code,{children:"output_node"})}),(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.code,{children:"-o"})}),(0,i.jsxs)(n.td,{align:"left",children:[(0,i.jsx)(n.strong,{children:"PURPOSE"}),": Specify the output node. ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"RANGE"}),": General nodes with corresponding calibration nodes in the calibration model. ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"DEFAULT VALUE"}),": ",(0,i.jsx)(n.code,{children:"None"}),". ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"DESCRIPTIONS"}),": ",(0,i.jsx)(n.strong,{children:"This parameter allows you to specify intermediate nodes as output and calculate the node quantization sensitivity."})," ",(0,i.jsx)(n.strong,{children:"If the default parameter None is kept, the accuracy debug tool will obtain the final output of the model and calculate the quantization sensitivity of the nodes on this basis."})]}),(0,i.jsx)(n.td,{align:"left",children:"Optional"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.code,{children:"node_type"})}),(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.code,{children:"-n"})}),(0,i.jsxs)(n.td,{align:"left",children:[(0,i.jsx)(n.strong,{children:"PURPOSE"}),": The node type. ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"RANGE"}),": ",(0,i.jsx)(n.code,{children:"'node'"})," , ",(0,i.jsx)(n.code,{children:"'weight'"})," , ",(0,i.jsx)(n.code,{children:"'activation'"}),". ",(0,i.jsx)("br",{}),(0,i.jsx)(n.strong,{children:"DEFAULT VALUE"}),": ",(0,i.jsx)(n.code,{children:"'node'"}),". ",(0,i.jsx)("br",{}),(0,i.jsx)(n.strong,{children:"DESCRIPTIONS"}),": The types of nodes that need to calculate the quantization sensitivity, including: node (general node), weight (weight calibration node), activation (activation calibration node)."]}),(0,i.jsx)(n.td,{align:"left",children:"Optional"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.code,{children:"data_num"})}),(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.code,{children:"-d"})}),(0,i.jsxs)(n.td,{align:"left",children:[(0,i.jsx)(n.strong,{children:"PURPOSE"}),": The amount of data needed to calculate the quantized sensitivities. ",(0,i.jsx)("br",{}),(0,i.jsx)(n.strong,{children:"RANGE"}),": Greater than 0, less than or equal to the total number of data in calibration_data. ",(0,i.jsx)("br",{}),(0,i.jsx)(n.strong,{children:"DEFAULT VALUE"}),": ",(0,i.jsx)(n.code,{children:"1"}),". ",(0,i.jsx)("br",{}),(0,i.jsx)(n.strong,{children:"DESCRIPTIONS"}),": Set the amount of data needed to calculate the node quantization sensitivity. The default is 1, in which case the tool will use the first single data in the calibration_data set for the calculation. The minimum setting is 1 and the maximum is the amount of data in calibration_data."]}),(0,i.jsx)(n.td,{align:"left",children:"Optional"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.code,{children:"verbose"})}),(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.code,{children:"-v"})}),(0,i.jsxs)(n.td,{align:"left",children:[(0,i.jsx)(n.strong,{children:"PURPOSE"}),": Select whether to print the information to the terminal. ",(0,i.jsx)("br",{}),(0,i.jsx)(n.strong,{children:"RANGE"}),": ",(0,i.jsx)(n.code,{children:"True"})," , ",(0,i.jsx)(n.code,{children:"False"}),". ",(0,i.jsx)("br",{}),(0,i.jsx)(n.strong,{children:"DEFAULT VALUE"}),": ",(0,i.jsx)(n.code,{children:"False"}),". ",(0,i.jsx)("br",{}),(0,i.jsx)(n.strong,{children:"DESCRIPTIONS"}),": If set to True, the quantization sensitivity information will be printed to the terminal. If the metrics contain multiple metrics, they will be sorted by first."]}),(0,i.jsx)(n.td,{align:"left",children:"Optional"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.code,{children:"interested_nodes"})}),(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.code,{children:"-i"})}),(0,i.jsxs)(n.td,{align:"left",children:[(0,i.jsx)(n.strong,{children:"PURPOSE"}),": Set the node of interest. ",(0,i.jsx)("br",{}),(0,i.jsx)(n.strong,{children:"RANGE"}),": All nodes in the calibration model. ",(0,i.jsx)("br",{}),(0,i.jsx)(n.strong,{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),(0,i.jsx)(n.strong,{children:"DESCRIPTIONS"}),": If specified, only the quantization sensitivity of the node will be obtained, and the rest of the nodes will not be obtained. Also, if this parameter is specified, the node type specified by node_type will be ignored. That is, this parameter has a higher priority than node_type. If the default parameter None is kept, the quantization sensitivity of all quantizable nodes in the model is calculated."]}),(0,i.jsx)(n.td,{align:"left",children:"Optional"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"API Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Import the debug module"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_nn"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantizer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Import the log module"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" logging"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# If verbose=True, you need to set the log level to INFO first."})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"logging"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"getLogger"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"setLevel"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(logging.INFO)"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Obtain node quantization sensitivity"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"node_message "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"get_sensitivity_of_nodes"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        model_or_file"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibrated_model.onnx'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        metrics"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'cosine-similarity'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'mse'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"],"})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        calibrated_data"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibration_data/'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        output_node"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        node_type"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'node'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        data_num"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        verbose"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"True"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        interested_nodes"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n"]})})}),"\n",(0,i.jsx)(n.p,{children:"Command Line Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger get"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"sensitivity"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"of"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"nodes calibrated_model"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"onnx calibration_data "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"m "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'cosine-similarity'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'mse'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"v "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"True"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Analysis results presentation"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": First you set the node types that need to calculate the sensitivity by node_type, then the tool obtains all the nodes in the calibration model that match node_type and gets the quantization sensitivity of these nodes.\nWhen verbose is set to True, the tool sorts the node quantization sensitivity and prints it in the terminal.\nThe higher the sort, the greater the quantization error introduced by the node quantization. Also for different node_types, the tool will display different node quantization sensitivity information."]}),"\n",(0,i.jsx)(n.p,{children:"When verbose=True and node_type='node', the following results are printed:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-text",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"=================node sensitivity================="})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"node                  cosine-similarity  mse"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"---------------------------------------------------"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_60               0.77795            68.02103"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_48               0.78428            64.36318"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_82               0.80394            61.09268"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_94               0.80499            65.05224"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_42               0.83787            49.4949"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_88               0.84614            49.81132"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_54               0.86602            41.69972"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_71               0.87148            39.96296"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_65               0.87495            40.45997"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_25               0.89214            34.30351"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_20               0.89829            32.35053"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_77               0.89916            31.9907"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_14               0.90058            32.40179"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_9                0.90107            34.08191"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_37               0.91162            28.21194"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Conv_31               0.91637            28.79291"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,i.jsx)(n.p,{children:"Where,"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"node: The node name."}),"\n",(0,i.jsx)(n.li,{children:"cosine-similarity, mse: Quantized sensitivity values of each node."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"When verbose=True and node_type='weight', the following results are printed:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-text",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"====================================node sensitivity===================================="})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"weight                                              node     cosine-similarity  mse"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"-----------------------------------------------------------------------------------------"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"471_HzCalibration                                   Conv_2   0.99978            0.07519"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"480_HzCalibration                                   Conv_7   0.99986            0.04823"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"609_HzCalibration                                   Conv_88  0.99997            0.01145"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"573_HzCalibration                                   Conv_65  0.99997            0.00984"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"474_HzCalibration                                   Conv_4   0.99997            0.00963"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"468_HzCalibration                                   Conv_0   0.99997            0.0091"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"612_HzCalibration                                   Conv_90  0.99997            0.00871"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"585_HzCalibration                                   Conv_73  0.99997            0.0095"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"483_HzCalibration                                   Conv_9   0.99998            0.00818"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"600_HzCalibration                                   Conv_82  0.99998            0.00717"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"582_HzCalibration                                   Conv_71  0.99998            0.00659"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"603_HzCalibration                                   Conv_84  0.99998            0.00614"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"591_HzCalibration                                   Conv_77  0.99998            0.00558"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"489_HzCalibration                                   Conv_12  0.99998            0.00515"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"564_HzCalibration                                   Conv_60  0.99999            0.00495"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"618_HzCalibration                                   Conv_94  0.99999            0.00498"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"543_HzCalibration                                   Conv_46  0.99999            0.00502"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"552_HzCalibration                                   Conv_52  0.99999            0.00501"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"594_HzCalibration                                   Conv_78  0.99999            0.00451"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"555_HzCalibration                                   Conv_54  0.99999            0.00452"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"...99classifier.1.weight_conv_weight_HzCalibration  Gemm_99  0.99999            0.00359"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"558_HzCalibration                                   Conv_56  0.99999            0.00369"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,i.jsx)(n.p,{children:"Where,"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"weight: The weight calibration node name."}),"\n",(0,i.jsx)(n.li,{children:"node: The name of the common node corresponding to the weight calibration node, i.e., the output of the weight calibration node is its input."}),"\n",(0,i.jsx)(n.li,{children:"cosine-similarity, mse: The quantization sensitivity values of each node."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"When verbose=True and node_type='activation', the following results are printed:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-text",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"===================================node sensitivity==================================="})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"activation          node                  threshold  bit  cosine-similarity  mse"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"---------------------------------------------------------------------------------------"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"406_HzCalibration   Conv_60               0.91501    8    0.77851            67.82422"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"388_HzCalibration   Conv_48               0.55422    8    0.78501            64.16379"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"440_HzCalibration   Conv_82               2.01577    8    0.8041             61.0322"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"458_HzCalibration   Conv_94               0.51507    8    0.80466            65.14515"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"379_HzCalibration   Conv_42               0.53759    8    0.83837            49.35648"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"449_HzCalibration   Conv_88               2.34071    8    0.84447            50.29965"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"397_HzCalibration   Conv_54               0.81528    8    0.86499            41.99234"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"423_HzCalibration   Conv_71               0.84753    8    0.87104            40.09385"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"414_HzCalibration   Conv_65               0.80155    8    0.87443            40.63319"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"353_HzCalibration   Conv_25               0.67858    8    0.89199            34.34844"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"345_HzCalibration   Conv_20               1.06324    8    0.8984             32.31664"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"432_HzCalibration   Conv_77               2.54515    16   0.89895            32.0417"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"336_HzCalibration   Conv_14               1.01407    8    0.90091            32.30325"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"328_HzCalibration   Conv_9                1.61622    8    0.90163            33.78012"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"371_HzCalibration   Conv_37               0.91038    8    0.91277            27.84864"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"362_HzCalibration   Conv_31               0.65606    8    0.91683            28.65791"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"403_HzCalibration   Conv_58               0.95119    8    0.93365            21.32314"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"391_HzCalibration   Conv_50;Add_55        2.92598    8    0.93984            19.72109"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"382_HzCalibration   Conv_44;Add_49        2.75416    8    0.95122            17.74137"})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"417_HzCalibration   Conv_67;Add_72        2.85463    8    0.95139            15.81864"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,i.jsx)(n.p,{children:"Where,"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"activation: The activation calibration node name."}),"\n",(0,i.jsx)(n.li,{children:"node: The common node after the activation calibration node in the model structure, i.e., the output of the activation calibration node is its input."}),"\n",(0,i.jsx)(n.li,{children:"threshold: The calibration threshold, and the maximum value is taken if there are multiple thresholds."}),"\n",(0,i.jsx)(n.li,{children:"bit: The quantization bit."}),"\n",(0,i.jsx)(n.li,{children:"cosine-similarity, mse: The quantization sensitivity values of each node."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"API return value:"}),"\n",(0,i.jsx)(n.p,{children:"The API returns the value of the quantization sensitivity saved in dictionary format (Key is the node name, Value is the quantization sensitivity information of the node), in the following format:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-text",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Out: "})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"{'Conv_3': {'cosine-similarity': '0.999009567957658', 'mse': '0.027825591154396534'}, "})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'MaxPool_2': {'cosine-similarity': '0.9993462241612948', 'mse': '0.017706592209064044'}, "})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_6': {'cosine-similarity': '0.9998359175828787', 'mse': '0.004541242333988731'}, "})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'MaxPool_5': {'cosine-similarity': '0.9998616805443397', 'mse': '0.0038416787014844325'}, "})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_0': {'cosine-similarity': '0.9999297948984', 'mse': '0.0019312848587735342'}, "})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Gemm_19': {'cosine-similarity': '0.9999609772975628', 'mse': '0.0010773885699633795'}, "})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_8': {'cosine-similarity': '0.9999629625907311', 'mse': '0.0010301886404004807'}, "})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Gemm_15': {'cosine-similarity': '0.9999847687207736', 'mse': '0.00041888411550854263'}, "})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'MaxPool_12': {'cosine-similarity': '0.9999853235024673', 'mse': '0.0004039733791544747'}, "})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Conv_10': {'cosine-similarity': '0.999985763659844', 'mse': '0.0004040437432614943'}, "})}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" 'Gemm_17': {'cosine-similarity': '0.9999913985912616', 'mse': '0.0002379088904350423'}} ...}"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,i.jsxs)(n.h3,{id:"plot_acc_error",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#plot_acc_error",children:"#"}),"plot_acc_error"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Function"}),": Only one node in the floating-point model will be quantized, and the error of that model and the output of the node in the floating-point model will be calculated sequentially to obtain the cumulative error curve."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Command line format"}),":"]}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger plot"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"acc"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"error MODEL_OR_FILE CALIBRATION_DATA --other options"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:["The parameters can be viewed via ",(0,i.jsx)(n.code,{children:"hmct-debugger plot-acc-error -h/--help"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"API parameters"}),":"]}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsxs)("colgroup",{children:[(0,i.jsx)("col",{style:{width:"10%"}}),(0,i.jsx)("col",{style:{width:"15%"}}),(0,i.jsx)("col",{style:{width:"64%"}}),(0,i.jsx)("col",{style:{width:"11%"}})]}),(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Parameter"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Abbr for Command Line Paramters"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Description"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Required/Optional"})})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"save_dir"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-s"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": The save path. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Optional, specify the path to save the analysis results."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"calibrated_data"})}),(0,i.jsx)("td",{children:"Fixed parameter"}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the calibration data. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None.",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Required, specify the calibration data to be analyzed."]})}),(0,i.jsx)("td",{children:"Required"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"model_or_file"})}),(0,i.jsx)("td",{children:"Fixed parameter"}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Required, specify the calibration model to be analyzed."]})}),(0,i.jsx)("td",{children:"RANGEequired"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"quantize_node"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-q"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Quantize only the specified nodes in the model and view the error accumulation curve. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": All nodes in the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None.",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Optional parameter. Specifies the nodes in the model that need to be quantized, while ensuring that none of the remaining nodes are quantized. It is determined whether the parameter is a nested list to decide whether to quantize a single node or a partial node. ",(0,i.jsx)("br",{}),"\nFor example: ",(0,i.jsxs)("ul",{className:"list-disc pl-5 my-4 leading-7",children:[(0,i.jsx)("li",{children:"quantize_node=['Conv_2','Conv_9']: Quantize only Conv_2 and Conv_9, respectively, while ensuring that the remaining nodes are not quantized."}),"\n",(0,i.jsx)("li",{children:"quantize_node=[['Conv_2'],['Conv_9','Conv_2']]: Only Conv_2 and both Conv_2 and Conv_9 were quantified to test the model cumulative error separately."}),"\n",(0,i.jsxs)("li",{children:["quantize_node contains two special parameters: 'weight' and 'activation'. ",(0,i.jsx)("li",{children:"quantize_node = ['weight']: Only quantify weights, not activation."}),"\n",(0,i.jsx)("li",{children:"quantize_node = ['activation']: Only quantify activation, not weights."}),"\n",(0,i.jsx)("li",{children:"quantize_node = ['weight','activation']: Weights and activations are quantified separately."})]})]}),"\nNote: quantize_node and non_quantize_node cannot be None at the same time, one of them must be specified."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"non_quantize_node"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-nq"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the node in the unquantized model to view the error accumulation curve. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": All nodes in the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Optional parameter. Specifies the nodes in the model that are not quantized, while ensuring that all the remaining nodes are quantized.\nThis parameter determines whether a single node is unquantized or partially quantized by determining whether it is a nested list. ",(0,i.jsx)("br",{}),"\nFor example: ",(0,i.jsxs)("ul",{className:"list-disc pl-5 my-4 leading-7",children:[(0,i.jsx)("li",{children:"non_quantize_node=['Conv_2','Conv_9']: Unquantize the Conv_2 and Conv_9 nodes respectively, while ensuring that all the remaining nodes are quantized."}),"\n",(0,i.jsx)("li",{children:"non_quantize_node=[['Conv_2'],['Conv_9','Conv_2']]: Only Conv_2 quantization and both Conv_2 and Conv_9 quantization are unquantized to test the model cumulative error separately. "})]}),"\nNote: quantize_node and non_quantize_node cannot be None at the same time, one of them must be specified."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"metric"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-m"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": The error metric method. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": ",(0,i.jsx)("code",{children:"'cosine-similarity'"}),", ",(0,i.jsx)("code",{children:"'mse'"}),", ",(0,i.jsx)("code",{children:"'mre'"}),", ",(0,i.jsx)("code",{children:"'sqnr'"}),", ",(0,i.jsx)("code",{children:"'chebyshev'"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": ",(0,i.jsx)("code",{children:"'cosine-similarity'"}),".",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Set the calculation method for calculating the model error."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"average_mode"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-a"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the output mode of the cumulative error curve. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": ",(0,i.jsx)("code",{children:"True "}),",",(0,i.jsx)("code",{children:"False"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": ",(0,i.jsx)("code",{children:"False"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": The default is False, if True, then the average of the cumulative error is obtained as the result."]})}),(0,i.jsx)("td",{children:"Optional"})]})]})]}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Import the debug module"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_nn"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantizer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"plot_acc_error"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        save_dir: "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        calibrated_data: "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"or"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" CalibrationDataSet,"})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        model_or_file: ModelProto "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"or"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        quantize_node: List "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"or"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        non_quantize_node: List "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"or"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        metric: str "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'cosine-similarity'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        average_mode: bool "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"False"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"):"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Analysis results presentation"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"1. Specify the node to quantify the cumulative error test"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Specify single-node quantization"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configuration method"}),": quantize_node=['Conv_2', 'Conv_90'], quantize_node is single list."]}),"\n",(0,i.jsx)(n.p,{children:"API Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Import the debug module"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_nn"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantizer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"plot_acc_error"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        save_dir"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        calibrated_data"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibration_data/'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        model_or_file"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibrated_model.onnx'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        quantize_node"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_2'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_90'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"],"})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        metric"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'cosine-similarity'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        average_mode"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"False"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n"]})})}),"\n",(0,i.jsx)(n.p,{children:"Command Line Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger plot"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"acc"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"error calibrated_model"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"onnx calibrated_data "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"q "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_2'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_90'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": When quantize_node is a single list, for the quantize_node you set, quantize the nodes in the quantize_node separately and keep the other nodes in the model unquantized to get the corresponding model, and then calculate the error between the output of each node in the model and the output of the corresponding node in the floating-point model, and get the corresponding cumulative error curve."]}),"\n",(0,i.jsx)(n.p,{children:"When average_mode = False:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:a})}),"\n",(0,i.jsx)(n.p,{children:"When average_mode = True:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:c})}),"\n",(0,i.jsxs)(n.div,{className:"rspress-directive info",children:[(0,i.jsx)(n.div,{className:"rspress-directive-title",children:"Note"}),(0,i.jsxs)(n.div,{className:"rspress-directive-content",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"average_mode"})}),(0,i.jsx)(n.p,{children:"average_mode defaults to False. For some models, it is not possible to determine which quantization strategy is more effective by the cumulative error curve.\nTherefore, we need to set average_mode to True, which takes the average value of the cumulative error of the first n nodes as the cumulative error of the nth node."}),(0,i.jsx)(n.p,{children:"This is calculated as follows, for example:"}),(0,i.jsx)(n.p,{children:"When average_mode=False, accumulate_error=[1.0, 0.9, 0.9, 0.8]."}),(0,i.jsx)(n.p,{children:"But when average_mode=True, accumulate_error=[1.0, 0.95, 0.933, 0.9]."})]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Specify multiple nodes for quantization"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configuration method"}),": quantize_node=[['Conv_2'], ['Conv_2', 'Conv_90']]\uFF0Cquantize_node is nested list."]}),"\n",(0,i.jsx)(n.p,{children:"API Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Import the debug module"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_nn"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantizer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"plot_acc_error"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        save_dir"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        calibrated_data"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibration_data/'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        model_or_file"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibrated_model.onnx'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        quantize_node"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"[["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_2'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"], ["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_2'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_90'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]],"})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        metric"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'cosine-similarity'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        average_mode"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"False"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n"]})})}),"\n",(0,i.jsx)(n.p,{children:"Command Line Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger plot"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"acc"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"error calibrated_model"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"onnx calibration_data "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"q "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_2'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_2'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_90'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": When quantize_node is a nested list, for the quantize_node you set, quantize the nodes specified for each single list in the quantize_node separately and keep the other nodes in the model unquantized to get the corresponding model,\nthen calculate the error between the output of each node in the model and the output of the corresponding node in the floating-point model, and get the corresponding cumulative error curve."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"partial_qmodel_0: Only quantize the Conv_2 node, the rest of the nodes are not quantized;"}),"\n",(0,i.jsx)(n.li,{children:"partial_qmodel_1: Only the Conv_2 and Conv_90 nodes are quantified, and the rest of the nodes are not quantified."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"When average_mode = False:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:d})}),"\n",(0,i.jsx)(n.p,{children:"When average_mode = True:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:h})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2.Cumulative error test after unquantizing some nodes of the model"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Specify single node not quantified"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configuration method"}),": non_quantize_node=['Conv_2', 'Conv_90']\uFF0Cnon_quantize_node is single list."]}),"\n",(0,i.jsx)(n.p,{children:"API Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Import the debug module"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_nn"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantizer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"plot_acc_error"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        save_dir"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        calibrated_data"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibration_data/'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        model_or_file"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibrated_model.onnx'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        non_quantize_node"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_2'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_90'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"],"})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        metric"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'cosine-similarity'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        average_mode"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"True"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n"]})})}),"\n",(0,i.jsx)(n.p,{children:"Command Line Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger plot"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"acc"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"error calibrated_model"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"onnx calibration_data "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"nq "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_2'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_90'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"a "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"True"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": When the non_quantize_node is a single list, for the non_quantize_node you set, unquantize each node in the non_quantize_node separately while keeping all other nodes quantized,\nand then get the corresponding model, calculate the error between the output of each node in the model and the output of the corresponding node in the floating-point model, and get the corresponding cumulative error curve."]}),"\n",(0,i.jsx)(n.p,{children:"When average_mode = False:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:x})}),"\n",(0,i.jsx)(n.p,{children:"When average_mode = True:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:p})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Specify multiple nodes not to quantize"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configuration method"}),": non_quantize_node=[['Conv_2'], ['Conv_2', 'Conv_90']]\uFF0Cnon_quantize_node is nested list."]}),"\n",(0,i.jsx)(n.p,{children:"API Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Import the debug module"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_nn"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantizer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"plot_acc_error"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        save_dir"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        calibrated_data"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibration_data/'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        model_or_file"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibrated_model.onnx'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        non_quantize_node"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"[["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_2'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"], ["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_2'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_90'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]],"})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        metric"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'cosine-similarity'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        average_mode"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"False"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n"]})})}),"\n",(0,i.jsx)(n.p,{children:"Command Line Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger plot"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"acc"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"error calibrated_model"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"onnx calibration_data "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"nq "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_2'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_2'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_90'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": When non_quantize_node is a nested list, for the non_quantize_node you set, do not quantize each node specified in the non_quantize_node and keep all the other nodes in the model quantized,\nand get the corresponding model, then calculate the error between the output of each node in the model and the output of the corresponding node in the floating-point model, and get the corresponding cumulative error curve."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"partial_qmodel_0: No quantization of Conv_2 nodes and quantization of the remaining nodes;"}),"\n",(0,i.jsx)(n.li,{children:"partial_qmodel_1: No quantization of Conv_2 and Conv_90 nodes, and quantization of the rest of the nodes."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"When average_mode = False:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:j})}),"\n",(0,i.jsx)(n.p,{children:"When average_mode = True:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:u})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Test skills"}),":"]}),"\n",(0,i.jsx)(n.p,{children:"When testing the accuracy of partial quantification, you may compare the accuracy of multiple sets of quantified strategies in order of quantified sensitivity, in which case you can refer to the following usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Import the debug module"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_nn"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantizer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# First, use the quantization sensitivity sorting function to obtain the quantization sensitivity sorting of the nodes in the model"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"node_message "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"get_sensitivity_of_nodes"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        model_or_file"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibrated_model.onnx'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        metrics"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'cosine-similarity'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        calibrated_data"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibration_data/'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        output_node"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        node_type"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'node'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        verbose"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"False"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        interested_nodes"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# node_message is a dictionary type, and its key value is the node name"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"nodes "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"list"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(node_message."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"keys"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"())"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Specify the unquantized nodes by nodes, which can be easily used"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"plot_acc_error"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        save_dir"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        calibrated_data"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibration_data/'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        model_or_file"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibrated_model.onnx'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        non_quantize_node"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"[nodes[:"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"], nodes[:"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]],"})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        metric"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'cosine-similarity'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        average_mode"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"True"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n"]})})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. Activation weights are quantified separately"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configuration method"}),": quantize_node=['weight','activation']."]}),"\n",(0,i.jsx)(n.p,{children:"API Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_nn"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantizer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"plot_acc_error"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        save_dir"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        calibrated_data"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibration_data/'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        model_or_file"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibrated_model.onnx'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        quantize_node"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'weight'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'activation'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"],"})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        metric"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'cosine-similarity'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        average_mode"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"False"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n"]})})}),"\n",(0,i.jsx)(n.p,{children:"Command Line Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger plot"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"acc"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"error calibrated_model"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"onnx calibration_data "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"q "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'weight'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'activation'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": The quantize_node can also be specified directly as 'weight' or 'activation'."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"quantize_node = ['weight']: Quantify weights, not activation."}),"\n",(0,i.jsx)(n.li,{children:"quantize_node = ['activation']: Quantify activation, not weights."}),"\n",(0,i.jsx)(n.li,{children:"quantize_node = ['weight', 'activation']: Weights and activations are quantified separately."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:k})}),"\n",(0,i.jsxs)(n.div,{className:"rspress-directive info",children:[(0,i.jsx)(n.div,{className:"rspress-directive-title",children:"Note"}),(0,i.jsx)(n.div,{className:"rspress-directive-content",children:(0,i.jsx)(n.p,{children:"In general, it is recommended that you pay more attention to the portion of the cumulative error curve near the model output location in the cumulative error curve graph.\nWhen the cumulative error curve obtained from the test after using a certain quantization method has a smaller cumulative error close to the model output position, i.e.,\na higher degree of similarity, then we recommend that you prioritize testing this quantitative method."})})]}),"\n",(0,i.jsxs)(n.h3,{id:"plot_distribution",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#plot_distribution",children:"#"}),"plot_distribution"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Function"}),"\uFF1ASelect the node and obtain the output of that node in the floating point model and the calibration model respectively to get the output data distribution.\nIn addition, the two outputs are subtracted to obtain the error distribution between the two outputs."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Command line format"}),":"]}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger plot"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"distribution MODEL_OR_FILE CALIBRATION_DATA --other options"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:["The parameters can be viewed via ",(0,i.jsx)(n.code,{children:"hmct-debugger plot-distribution -h/--help"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsxs)("colgroup",{children:[(0,i.jsx)("col",{style:{width:"10%"}}),(0,i.jsx)("col",{style:{width:"15%"}}),(0,i.jsx)("col",{style:{width:"64%"}}),(0,i.jsx)("col",{style:{width:"11%"}})]}),(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Parameter"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Abbr for Command Line Paramters"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Description"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Required/Optioanl"})})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"save_dir"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-s"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": The save path. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None.  ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Optional, specify the path to save the analysis results."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"model_or_file"})}),(0,i.jsx)("td",{children:"Fixed parameter"}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Required, specify the calibration model to be analyzed."]})}),(0,i.jsx)("td",{children:"Required"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"calibrated_data"})}),(0,i.jsx)("td",{children:"Fixed parameter"}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the calibration data. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Required, specify the calibration data needed for the analysis."]})}),(0,i.jsx)("td",{children:"Required"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"nodes_list"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-n"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the nodes to be analyzed. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": All nodes in the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Required, specify the nodes to be analyzed. If the node type in nodes_list is:\n",(0,i.jsxs)("ul",{className:"list-disc pl-5 my-4 leading-7",children:[(0,i.jsx)("li",{children:"Weights calibration node: plots the data distribution of the original weights and the weights after calibration."}),"\n",(0,i.jsx)("li",{children:"Activate calibration nodes: Plot the input data distribution of activated calibration nodes."}),"\n",(0,i.jsx)("li",{children:"Common node: Plot the output data distribution of this node before and after quantization, and also plot the error distribution between the two."})]}),"\nNote: nodes_list is a list type, a series of nodes can be specified, and all three types of nodes can be specified at the same time."]})}),(0,i.jsx)("td",{children:"Required"})]})]})]}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Import the debug module"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_nn"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantizer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"plot_distribution"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        save_dir: "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        model_or_file: ModelProto "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"or"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        calibrated_data: "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"or"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" CalibrationDataSet,"})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        nodes_list: List["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"] "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"or"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Analysis results presentation"}),":"]}),"\n",(0,i.jsx)(n.p,{children:"API Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Import the debug module"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_nn"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantizer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"plot_distribution"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        save_dir"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        model_or_file"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibrated_model.onnx'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        calibrated_data"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'./calibration_data'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        nodes_list"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'317_HzCalibration'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Activation Node"})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"                    "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'471_HzCalibration'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Weight Node"})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"                    "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_2'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"])"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Common Node"})]}),"\n"]})})}),"\n",(0,i.jsx)(n.p,{children:"Command Line Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger plot"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"distribution calibrated_model"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"onnx calibration_data "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"n "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'317_HzCalibration'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'471_HzCalibration'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Conv_2'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"})]}),"\n"]})})}),"\n",(0,i.jsx)(n.p,{children:"When node_type = 'node_output':"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:m})}),"\n",(0,i.jsx)(n.p,{children:"When node_type = 'weight':"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:y})}),"\n",(0,i.jsx)(n.p,{children:"When node_type = 'activation':"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:v})}),"\n",(0,i.jsxs)(n.div,{className:"rspress-directive info",children:[(0,i.jsx)(n.div,{className:"rspress-directive-title",children:"Note"}),(0,i.jsx)(n.div,{className:"rspress-directive-content",children:(0,i.jsx)(n.p,{children:"In the above three pictures, the blue triangle indicates that the maximum value of the absolute data. The red dashed line indicates that the maximum calibration threshold."})})]}),"\n",(0,i.jsxs)(n.h3,{id:"get_channelwise_data_distribution",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#get_channelwise_data_distribution",children:"#"}),"get_channelwise_data_distribution"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Function"}),": Draw the box line plot of the data distribution between the input data channels of the specified calibration node."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Command line format"}),":"]}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger get"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"channelwise"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"data"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"distribution MODEL_OR_FILE CALIBRATION_DATA --other options"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:["The parameters can be viewed via ",(0,i.jsx)(n.code,{children:"hmct-debugger get-channelwise-data-distribution -h/--help"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsxs)("colgroup",{children:[(0,i.jsx)("col",{style:{width:"10%"}}),(0,i.jsx)("col",{style:{width:"15%"}}),(0,i.jsx)("col",{style:{width:"64%"}}),(0,i.jsx)("col",{style:{width:"11%"}})]}),(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Parameter"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Abbr for Command Line Paramters"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Description"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Required/Optioanl"})})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"save_dir"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-s"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": The save path. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None.  ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Optional, specify the path to save the analysis results."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"model_or_file"})}),(0,i.jsx)("td",{children:"Fixed parameter"}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Required, specify the calibration model to be analyzed."]})}),(0,i.jsx)("td",{children:"Required"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"calibrated_data"})}),(0,i.jsx)("td",{children:"Fixed parameter"}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the calibration data. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Required, specify the calibration data needed for the analysis."]})}),(0,i.jsx)("td",{children:"Required"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"nodes_list"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-n"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the calibration node. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": All weight calibration nodes and activation calibration nodes in the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Required, specify the calibration node."]})}),(0,i.jsx)("td",{children:"Required"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"axis"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-a"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the dimension where the channel is located. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": Less than the dimension of node input data. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": ",(0,i.jsx)("code",{children:"None"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": The position of the channel information in the shape. The default parameter is ",(0,i.jsx)("code",{children:"None"}),",\nat this time, for the activation calibration node, the second dimension of the node input data is considered to represent the channel information by default,\ni.e. axis=1; for the weight calibration node, the axis parameter in the node's attributes will be read as the channel information."]})}),(0,i.jsx)("td",{children:"Optional"})]})]})]}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Import the debug module"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_nn"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantizer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"get_channelwise_data_distribution"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        save_dir: "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        model_or_file: ModelProto "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"or"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        calibrated_data: "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"or"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" CalibrationDataSet,"})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        nodes_list: List["}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"],"})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        axis: int "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Analysis results presentation"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": For your set calibration node list(node_list), get the dimension where the channel is located from the parameter axis, and get the data distribution among the node input data channels. Where axis is None by default, if the node is a weight calibration node, then the dimension where the channel is located is 0 by default; if the node is an activation calibration node, then the dimension where the channel is located is 1 by default."]}),"\n",(0,i.jsx)(n.p,{children:"Weight calibration node:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"weight_calibration_node",src:b})}),"\n",(0,i.jsx)(n.p,{children:"Activation calibration node:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"activate_calibration_node",src:g})}),"\n",(0,i.jsx)(n.p,{children:"The output is shown as follows:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"box_plot",src:_})}),"\n",(0,i.jsx)(n.p,{children:"In the figure:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The horizontal coordinate indicates the number of channels of input data of the node, and there are 96 channels of input data in the figure example."}),"\n",(0,i.jsx)(n.li,{children:"The vertical coordinate indicates the data distribution range of each channel, where the red solid line indicates the median of the data in that channel and the blue dashed line indicates the mean.\nThe upper and lower limits of each box indicate the upper quartile and the lower quartile, respectively, and the discrete points outside the upper and lower limits indicate the outliers,\nand the maximum of the absolute value of these outliers is observed to determine whether the current node input data is experiencing large fluctuations."}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"sensitivity_analysis",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#sensitivity_analysis",children:"#"}),"sensitivity_analysis"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Function"}),": For quantization-sensitive nodes, the model accuracy after quantizing these nodes individually as well as partially is analyzed and tested separately."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Command line usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger sensitivity"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"analysis MODEL_OR_FILE CALIBRATION_DATA --other options"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:["The parameters can be viewed via ",(0,i.jsx)(n.code,{children:"hmct-debugger sensitivity-analysis -h/--help"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsxs)("colgroup",{children:[(0,i.jsx)("col",{style:{width:"10%"}}),(0,i.jsx)("col",{style:{width:"15%"}}),(0,i.jsx)("col",{style:{width:"64%"}}),(0,i.jsx)("col",{style:{width:"11%"}})]}),(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Parameter"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Abbr for Command Line Paramters"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Description"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Required/Optioanl"})})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"model_or_file"})}),(0,i.jsx)("td",{children:"Fixed parameter"}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Required, specify the calibration model to be analyzed."]})}),(0,i.jsx)("td",{children:"Required"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"calibrated_data"})}),(0,i.jsx)("td",{children:"Fixed parameter"}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the calibration data. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Required, specify the calibration data needed for the analysis."]})}),(0,i.jsx)("td",{children:"Required"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"pick_threshold"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-p"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Setting the sensitivity threshold for selected nodes. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": 0.999. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Optional parameter. This function calculates the quantitative sensitivity of common nodes and selects nodes with sensitivity less than pick_threshold as sensitive nodes for analysis and testing. ",(0,i.jsx)("br",{}),"\nNote: When sensitive_nodes is set, the sensitive_nodes will be tested directly, without calculating node sensitivity and selecting sensitive nodes according to pick_threshold."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"data_num"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-d"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Amount of data needed to calculate quantitative sensitivity. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": Greater than 0, less than or equal to the total number of data in calibration_data. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": 1. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Set the amount of data needed to calculate the node quantization sensitivity."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"sensitive_nodes"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-sn"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the sensitive nodes to be analyzed. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": All nodes in the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": ",(0,i.jsx)("code",{children:"None"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Optional, specify the sensitive nodes to be analyzed. ",(0,i.jsx)("br",{}),"\nNote: When this parameter is set, the nodes in this parameter are tested directly without calculating the node sensitivity and selecting sensitive nodes based on pick_threshold."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"save_dir"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-sd"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Save Path. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": ",(0,i.jsx)("code",{children:"None"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": ",(0,i.jsx)("code",{children:"None"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Optional, specifies the path where the analysis results are saved."]})}),(0,i.jsx)("td",{children:"Optional"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"API Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_nn"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantizer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"sensitivity_analysis"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(model_or_file"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'calibrated_model.onnx'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"                         calibrated_data"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'calibration_data'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"                         pick_threshold"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0.9999"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"                         data_num"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"                         sensitive_nodes"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"[])"})]}),"\n"]})})}),"\n",(0,i.jsx)(n.p,{children:"Command Line Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger sensitivity"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"analysis calibrated_model"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"onnx calibration_data"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Analysis results presentation"}),":"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"partial_quantization",src:f})}),"\n",(0,i.jsx)(n.p,{children:"In the figure:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Blue dashed line: baseline, i.e., the cosine similarity of the floating point model output to itself, is 1."}),"\n",(0,i.jsx)(n.li,{children:"Green cross: Quantize only the current node to get a partially quantized model, and compute the similarity between the partially quantized model and the final output of the floating-point model."}),"\n",(0,i.jsx)(n.li,{children:"Red solid line: without quantizing the current node and all nodes before the current node, the similarity between the partially quantized model and the floating-point model is calculated.\nFor example, the similarity value of Conv_92 in the above figure is around 0.995, indicating that the cosine similarity between the final output of the partially quantized model and the floating-point model is around 0.995 when we unquantize the nodes of Conv_2, Conv_7, and Conv_92,\nand keep all the rest of the nodes quantized to get the partially quantized model. The first none of the horizontal coordinates, in the red solid line, means calibrated_model."}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"runall",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#runall",children:"#"}),"runall"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Function"}),": Run all the functions in the original debug tool with one click."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Command line usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger runall MODEL_OR_FILE CALIBRATION_DATA --other options"})]}),"\n"]})})}),"\n",(0,i.jsxs)(n.p,{children:["The parameters can be viewed via ",(0,i.jsx)(n.code,{children:"hmct-debugger runall -h/--help"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":"]}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsxs)("colgroup",{children:[(0,i.jsx)("col",{style:{width:"10%"}}),(0,i.jsx)("col",{style:{width:"12%"}}),(0,i.jsx)("col",{style:{width:"66%"}}),(0,i.jsx)("col",{style:{width:"12%"}})]}),(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Parameter"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Abbr for Command Line Paramters"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Description"})}),(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"Required/Optioanl"})})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"model_or_file"})}),(0,i.jsx)("td",{children:"Fix parameter"}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Required, specify the calibration model to be analyzed."]})}),(0,i.jsx)("td",{children:"Required"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"calibrated_data"})}),(0,i.jsx)("td",{children:"Fix parameter"}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the calibration data. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Required, specify the calibration data needed for the analysis."]})}),(0,i.jsx)("td",{children:"Required"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"save_dir"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-s"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": The save path. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Specify the path to save the analysis results."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"ns_metrics"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-nm"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": The measure of node quantification sensitivity. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": ",(0,i.jsx)("code",{children:"'cosine-similarity'"}),", ",(0,i.jsx)("code",{children:"'mse'"}),", ",(0,i.jsx)("code",{children:"'mre'"}),", ",(0,i.jsx)("code",{children:"'sqnr'"}),", ",(0,i.jsx)("code",{children:"'chebyshev'"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": ",(0,i.jsx)("code",{children:"'cosine-similarity'"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Specify how the node quantization sensitivity is calculated, and this parameter can be a List,\ni.e., calculating the quantized sensitivities in a variety of ways. However, the output is sorted by the calculation of the first position in the list only,\nand the higher the ranking indicates that the error introduced by quantifying that node is greater."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"output_node"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-o"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the output node. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),":General nodes with corresponding calibration nodes in the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": ",(0,i.jsx)("code",{children:"None"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": ",(0,i.jsx)("b",{children:"This parameter allows you to specify intermediate nodes as output and calculate the node quantization sensitivity.\nIf the default parameter None is kept, the accuracy debug tool will obtain the final output of the model and calculate the quantization sensitivity of the nodes on this basis."})]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"node_type"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-nt"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": The node type. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": ",(0,i.jsx)("code",{children:"'node'"}),", ",(0,i.jsx)("code",{children:"'weight'"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": ",(0,i.jsx)("code",{children:"'node'"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": The types of nodes that need to calculate the quantization sensitivity, including: node (general node),\nweight (weight calibration node), activation (activation calibration node)."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"data_num"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-dn"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": The amount of data needed to calculate the quantized sensitivities. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": Greater than 0, less than or equal to the total number of data in calibration_data. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": ",(0,i.jsx)("code",{children:"None"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Set the amount of data needed to calculate the node quantization sensitivity.\nThe default is None, in which case the tool will default to using all the data in calibration_data for the calculation.\nThe minimum setting is 1 and the maximum is the amount of data in calibration_data."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"verbose"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-v"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Select whether to print the information to the terminal. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": ",(0,i.jsx)("code",{children:"True"}),", ",(0,i.jsx)("code",{children:"False"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": ",(0,i.jsx)("code",{children:"False"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": If set to True, the quantization sensitivity information will be printed to the terminal.\nIf the metrics contain multiple metrics, they will be sorted by first."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"interested_nodes"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-i"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Set the node of interest. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": All nodes in the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": If specified, only the quantization sensitivity of the node will be obtained, and the rest of the nodes will not be obtained.\nAlso, if this parameter is specified, the node type specified by node_type will be ignored.\nThat is, this parameter has a higher priority than node_type.\nIf the default parameter None is kept, the quantization sensitivity of all quantizable nodes in the model is calculated."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"dis_nodes_list"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-dnl"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the nodes to be analyzed. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": All nodes in the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Specify the nodes to be analyzed. If the node type in nodes_list is:\n",(0,i.jsxs)("ul",{className:"list-disc pl-5 my-4 leading-7",children:[(0,i.jsx)("li",{children:"Weights calibration node: plots the data distribution of the original weights and the weights after calibration."}),"\n",(0,i.jsx)("li",{children:"Activate calibration nodes: Plot the input data distribution of activated calibration nodes."}),"\n",(0,i.jsx)("li",{children:"Common node: Plot the output data distribution of this node before and after quantization, and also plot the error distribution between the two."})]}),"\nNote: nodes_list is a list type, a series of nodes can be specified, and all three types of nodes can be specified at the same time."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"cw_nodes_list"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-cn"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the calibration node. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": All weight calibration nodes and activation calibration nodes in the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Specify the calibration node."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"axis"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-a"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the dimension where the channel is located. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": Less than the dimension of node input data. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": ",(0,i.jsx)("code",{children:"None"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": The position of the channel information in the shape. The default parameter is ",(0,i.jsx)("code",{children:"None"})," ,\nat this time, for the activation calibration node, the second dimension of the node input data is considered to represent the channel information by default, i.e. axis=1;\nfor the weight calibration node, the axis parameter in the node's attributes will be read as the channel information."]})}),(0,i.jsx)("td",{children:"optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"quantize_node"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-qn"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Quantize only the specified nodes in the model and view the error accumulation curve. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": All nodes in the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Optional parameter. Specifies the nodes in the model that need to be quantized, while ensuring that none of the remaining nodes are quantized.\nIt is determined whether the parameter is a nested list to decide whether to quantize a single node or a partial node. ",(0,i.jsx)("br",{}),"\nFor example: ",(0,i.jsxs)("ul",{className:"list-disc pl-5 my-4 leading-7",children:[(0,i.jsx)("li",{children:"quantize_node=['Conv_2', 'Conv_9']: Quantize only Conv_2 and Conv_9, respectively, while ensuring that the remaining nodes are not quantized."}),"\n",(0,i.jsx)("li",{children:"quantize_node=[['Conv_2'], ['Conv_9', 'Conv_2']]: Only Conv_2 and both Conv_2 and Conv_9 were quantified to test the model cumulative error separately."}),"\n",(0,i.jsxs)("li",{children:["quantize_node contains two special parameters: 'weight' and 'activation'.\n",(0,i.jsxs)("ul",{className:"list-disc pl-5 my-4 leading-7",children:[(0,i.jsx)("li",{children:"quantize_node = ['weight']: Only quantify weights, not activation."}),"\n",(0,i.jsx)("li",{children:"quantize_node = ['activation']: Only quantify activation, not weights."}),"\n",(0,i.jsx)("li",{children:"quantize_node = ['weight', 'activation']: Weights and activations are quantified separately."})]})]})]}),"\nNote: quantize_node and non_quantize_node cannot be None at the same time, one of them must be specified."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"non_quantize_node"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-nqn"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the node in the unquantized model to view the error accumulation curve. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": All nodes in the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Optional parameter. Specifies the nodes in the model that are not quantized, while ensuring that all the remaining nodes are quantized.\nThis parameter determines whether a single node is unquantized or partially quantized by determining whether it is a nested list. ",(0,i.jsx)("br",{}),"\nFor example:\n",(0,i.jsxs)("ul",{className:"list-disc pl-5 my-4 leading-7",children:[(0,i.jsx)("li",{children:"non_quantize_node=['Conv_2', 'Conv_9']: Unquantize the Conv_2 and Conv_9 nodes respectively, while ensuring that all the remaining nodes are quantized"}),"\n",(0,i.jsx)("li",{children:"non_quantize_node=[['Conv_2'], ['Conv_9', 'Conv_2']]: Only Conv_2 quantization and both Conv_2 and Conv_9 quantization are unquantized to test the model cumulative error separately."})]}),"\nNote: quantize_node and non_quantize_node cannot be None at the same time, one of them must be specified."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"ae_metric"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-am"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": The error metric method. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": ",(0,i.jsx)("code",{children:"'cosine-similarity'"}),", ",(0,i.jsx)("code",{children:"'mse'"}),", ",(0,i.jsx)("code",{children:"'mre'"}),", ",(0,i.jsx)("code",{children:"'sqnr'"}),", ",(0,i.jsx)("code",{children:"'chebyshev'"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": ",(0,i.jsx)("code",{children:"'cosine-similarity'"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Set the calculation method for calculating the model error."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"average_mode"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-avm"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the output mode of the cumulative error curve. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": ",(0,i.jsx)("code",{children:"True"}),", ",(0,i.jsx)("code",{children:"False"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": ",(0,i.jsx)("code",{children:"False"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": The default is False, if True, then the average of the cumulative error is obtained as the result."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"pick_threshold"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-pt"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Setting the sensitivity threshold for selected nodes. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": None. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": 0.999. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Optional parameter. This function calculates the quantitative sensitivity of common nodes and selects nodes with sensitivity less than pick_threshold as sensitive nodes for analysis and testing. ",(0,i.jsx)("br",{}),"\nNote: When sensitive_nodes is set, the sensitive_nodes will be tested directly, without calculating node sensitivity and selecting sensitive nodes according to pick_threshold."]})}),(0,i.jsx)("td",{children:"Optional"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"sensitive_nodes"})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:"-sn"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)("b",{children:"PURPOSE"}),": Specify the sensitive nodes to be analyzed. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"RANGE"}),": All nodes in the calibration model. ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DEFAULT VALUE"}),": ",(0,i.jsx)("code",{children:"None"}),". ",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("b",{children:"DESCRIPTIONS"}),": Optional, specify the sensitive nodes to be analyzed.",(0,i.jsx)("br",{}),"\nNote: When this parameter is set, the nodes in this parameter are tested directly without calculating the node sensitivity and selecting sensitive nodes based on pick_threshold."]})}),(0,i.jsx)("td",{children:"Optional"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"API Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsx)(n.span,{className:"line line-number",children:(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# \u5BFC\u5165debug\u6A21\u5757"})}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_nn"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantizer"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dbg"})]}),"\n",(0,i.jsx)(n.span,{className:"line line-number"}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dbg"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"runall"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(model_or_file"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'calibrated_model.onnx'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"           calibrated_data"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'calibration_data'"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n"]})})}),"\n",(0,i.jsx)(n.p,{children:"Command Line Usage:"}),"\n",(0,i.jsx)(n.pre,{className:"code",children:(0,i.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,i.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,i.jsxs)(n.span,{className:"line line-number",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"hmct"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"debugger runall calibrated_model"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"onnx calibration_data"})]}),"\n"]})})}),"\n",(0,i.jsx)(n.p,{children:"runall Process:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"runall",src:N})}),"\n",(0,i.jsx)(n.p,{children:"When all parameters are left as default, the tool performs the following functions in sequence:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"STEP1 and STEP2: Obtain the quantization sensitivity of the weight calibration node and activation calibration node, respectively."}),"\n",(0,i.jsx)(n.li,{children:"STEP3: Based on the results of STEP1 and STEP2, take the TOP5 of the weight calibration nodes and the TOP5 of the activation calibration nodes to plot their data distribution, respectively."}),"\n",(0,i.jsx)(n.li,{children:"STEP4: For the nodes obtained in STEP3, draw box-and-line plots of their inter-channel data distribution, respectively."}),"\n",(0,i.jsx)(n.li,{children:"STEP5: Plot the cumulative error curves for quantizing only the weights and only the activations, respectively."}),"\n",(0,i.jsx)(n.li,{children:"STEP6: Partial quantization and single-node quantization accuracy analysis for sensitive nodes.\nSince the example in the figure does not specify sensitive_nodes, the debug tool needs to calculate the quantization sensitivity of common nodes by itself and select nodes with sensitivity less than the specified pick_threshold for testing and analysis."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["When ",(0,i.jsx)(n.code,{children:"node_type='node'"})," is specified, the tool will get the top5 nodes and find the calibration nodes corresponding to each node separately, and get the data distribution and box line diagram of the calibration nodes."]})]})}function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,i.jsx)(n,Object.assign({},e,{children:(0,i.jsx)(w,e)})):w(e)}n.default=C,C.__RSPRESS_PAGE_META={},C.__RSPRESS_PAGE_META["3.0.22%2Fen%2Fguide%2Fptq%2Fptq_tool%2Faccuracy_debug.mdx"]={toc:[{id:"quickstart",text:"Quickstart",depth:2},{id:"calibration-models-and-data-storage",text:"Calibration Models and Data Storage",depth:3},{id:"accuracy-debug-module-import-and-usage",text:"Accuracy Debug Module Import and Usage",depth:3},{id:"analysis-result-display",text:"Analysis Result Display",depth:3},{id:"debug_api",text:"Function Description",depth:2},{id:"get_sensitivity_of_nodes",text:"get_sensitivity_of_nodes",depth:3},{id:"plot_acc_error",text:"plot_acc_error",depth:3},{id:"plot_distribution",text:"plot_distribution",depth:3},{id:"get_channelwise_data_distribution",text:"get_channelwise_data_distribution",depth:3},{id:"sensitivity_analysis",text:"sensitivity_analysis",depth:3},{id:"runall",text:"runall",depth:3}],title:"Accuracy Debug Tool",frontmatter:{}}},95895:function(e,n,s){s(39710);var i=s(85893),r=s(67294),l=s(45687);s(20388);let t={"zh-CN":e=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${e.minutes>=1?`${Math.ceil(e.minutes)} \u{5206}\u{949F}`:"\u5C0F\u4E8E 1 \u5206\u949F"}`,"en-US":e=>`Estimated reading time: ${e.minutes>=1?`${Math.ceil(e.minutes)} minutes`:"less than 1 minute"}`};function o(e,n,s){let i=Object.keys(t).includes(n)?n:s;return t[i](e)}n.Z=e=>{let{defaultLocale:n="en-US"}=e,s=(0,l.Vi)().page.readingTimeData,t=(0,l.Jr)(),a=(0,l.e7)(),[c,d]=(0,r.useState)(o(s,t,n));return(0,r.useEffect)(()=>{d(o(s,t,n))},[t,s]),(0,i.jsx)("span",{"data-dark":String(a),className:"rp-reading-time",children:c})}}}]);