"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["70719"],{14576:function(s,n,e){e.r(n);var o=e(85893),r=e(50065),i=e(95895);function t(s){let n=Object.assign({h1:"h1",a:"a",h2:"h2",h3:"h3",p:"p",code:"code",pre:"pre",span:"span",ol:"ol",li:"li",ul:"ul"},(0,r.ah)(),s.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.h1,{id:"faq",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#faq",children:"#"}),"FAQ"]}),"\n",(0,o.jsx)(i.Z,{}),"\n",(0,o.jsxs)(n.h2,{id:"training-environment",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#training-environment",children:"#"}),"Training Environment"]}),"\n",(0,o.jsxs)(n.h3,{id:"docker-container-cant-use-nvidia-resources",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#docker-container-cant-use-nvidia-resources",children:"#"}),"Docker container can't use Nvidia resources?"]}),"\n",(0,o.jsxs)(n.p,{children:["Solution: It is recommended to refer to the description in the GPU Docker section of the ",(0,o.jsx)(n.a,{href:"/3.0.22/en/guide/env_install.html#docker_image_usage",children:"Environment Deployment"})," section of the documentation."]}),"\n",(0,o.jsxs)(n.h2,{id:"qat-quantized-training",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#qat-quantized-training",children:"#"}),"QAT Quantized Training"]}),"\n",(0,o.jsxs)(n.h3,{id:"quantized-accuracy-anomaly",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#quantized-accuracy-anomaly",children:"#"}),"Quantized Accuracy Anomaly"]}),"\n",(0,o.jsxs)(n.p,{children:["Solution: The QAT/Quantized accuracy is not as expected, there is a NAN, or the initial QAT loss is clearly anomalous with respect to float.\nPlease refer to the section ",(0,o.jsx)(n.a,{href:"/3.0.22/en/guide/plugin/user_guide/quant_analysis.html",children:"Accuracy Tuning Tool Guide"}),"."]}),"\n",(0,o.jsxs)(n.h3,{id:"why-does-accuracy-performance-deteriorate-after-turning-on-multi-machine-training",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#why-does-accuracy-performance-deteriorate-after-turning-on-multi-machine-training",children:"#"}),"Why does accuracy performance deteriorate after turning on multi-machine training?"]}),"\n",(0,o.jsx)(n.p,{children:"Solution: The batchsize increases exponentially when multi-computer training is turned on, and the LR and other hyperparameters need to be adjusted synchronously to balance the batchsize."}),"\n",(0,o.jsxs)(n.h3,{id:"does-qconfig-require-user-intervention",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#does-qconfig-require-user-intervention",children:"#"}),"Does Qconfig require user intervention?"]}),"\n",(0,o.jsxs)(n.p,{children:["Solution: Horizon provides ",(0,o.jsx)(n.code,{children:"Qconfig"})," which defines how activation and weight are quantized, and currently supports quantization algorithms such as ",(0,o.jsx)(n.code,{children:"FakeQuantize"}),", ",(0,o.jsx)(n.code,{children:"LSQ"}),", and ",(0,o.jsx)(n.code,{children:"PACT"}),"."]}),"\n",(0,o.jsxs)(n.h3,{id:"how-to-export-onnx-model-for-each-phase",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#how-to-export-onnx-model-for-each-phase",children:"#"}),"How to export ONNX model for each phase?"]}),"\n",(0,o.jsx)(n.p,{children:"Solution:"}),"\n",(0,o.jsx)(n.p,{children:"Please refer to the following code implementation:"}),"\n",(0,o.jsx)(n.pre,{className:"code",children:(0,o.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,o.jsxs)(n.code,{className:"language-cpp",meta:"",children:[(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"from "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"horizon_plugin_pytorch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"utils import onnx_helper as horizon_onnx_helper"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number"}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"# [Optional] Export float \u3001qat net to ONNX"})}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"# --------------------------------------------------------------------"})}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'logging.info("'}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Export"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"qat"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"model"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"to"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ONNX"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"..."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'")'})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"data = torch.rand((1, 3, 228, 228), device=device)"})}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'horizon_onnx_helper.export_to_onnx(qat_net, data, "'}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"resnet_qat"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"onnx"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'")'})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number"}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"# [Optional] Export quantized_model to ONNX"})}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"# --------------------------------------------------------------------"})}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:"horizon_onnx_helper.export_quantized_onnx("})}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'    quantized_model, data, "'}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"resnet_quantized"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"onnx"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"'})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:")"})}),"\n"]})})}),"\n",(0,o.jsxs)(n.h3,{id:"why-does-nan-exist-during-qat-training",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#why-does-nan-exist-during-qat-training",children:"#"}),"Why does nan exist during QAT training?"]}),"\n",(0,o.jsx)(n.p,{children:"Solution:"}),"\n",(0,o.jsx)(n.p,{children:"There are more factors affecting the problem and it is recommended to check the following aspects:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Checks whether the input data contains nan;"}),"\n",(0,o.jsx)(n.li,{children:"Check that the floating-point model has converged. Floating-point models that do not converge may cause large fluctuations for certain minimization errors;"}),"\n",(0,o.jsx)(n.li,{children:"Check whether calib is turned on, it is recommended to turn it on to give better initial coefficients to the model;"}),"\n",(0,o.jsx)(n.li,{children:"Check whether the training strategy is appropriate. Unsuitable training strategy can also lead to NAN values, such as learning rate lr is too large (either by lowering the learning rate or using gradient truncation). In terms of training strategy, the default QAT is consistent with floating-point, and it is recommended to replace it with SGD if the floating-point training uses optimizers such as OneCycle that affect the LR settings."}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"configure-the-int16-node-or-high-precision-output-node-to-be-invalid",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#configure-the-int16-node-or-high-precision-output-node-to-be-invalid",children:"#"}),"Configure the int16 node or high-precision output node to be invalid"]}),"\n",(0,o.jsx)(n.p,{children:"Solution: This may be due to a misconfiguration of module_name, which only supports string and does not support configuration by index."}),"\n",(0,o.jsxs)(n.h3,{id:"how-to-check-whether-high-accuracy-output-is-turned-on-for-a-particular-layer",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#how-to-check-whether-high-accuracy-output-is-turned-on-for-a-particular-layer",children:"#"}),"How to check whether high-accuracy output is turned on for a particular layer?"]}),"\n",(0,o.jsxs)(n.p,{children:["Solution: You can print the layer where the qat_model is located to see if it has ",(0,o.jsx)(n.code,{children:"(activation_post_process): FakeQuantize"}),", and if it doesn't, then it is a high-accuracy output.\nFor example, the int32 high-accuracy conv prints as follows:"]}),"\n",(0,o.jsx)(n.pre,{className:"code",children:(0,o.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,o.jsxs)(n.code,{className:"language-cpp",meta:"",children:[(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"): "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ConvModule2d"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  ("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"): "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Conv2d"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"64"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" kernel_size"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" stride"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" padding"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    (weight_fake_quant): "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"FakeQuantize"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      fake_quant_enabled"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(["}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"uint8)"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" observer_enabled"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(["}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"uint8)"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      quant_min"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=-"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"128"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" quant_max"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"127"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qint8"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" qscheme"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"per_channel_symmetric"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ch_axis"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      scale"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(["}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"])"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" zero_point"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(["}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"])"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      (activation_post_process): "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"MovingAveragePerChannelMinMaxObserver"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(min_val"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"([]), max_val=tensor([]))"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    )"})}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  )"})}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})}),"\n"]})})}),"\n",(0,o.jsx)(n.p,{children:"The int8 low-accuracy conv prints as follows:"}),"\n",(0,o.jsx)(n.pre,{className:"code",children:(0,o.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,o.jsxs)(n.code,{className:"language-cpp",meta:"",children:[(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"): "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ConvModule2d"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  ("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"): "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ConvReLU2d"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"64"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"64"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" kernel_size"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" stride"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" padding"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    (weight_fake_quant): "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"FakeQuantize"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      fake_quant_enabled"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(["}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"uint8)"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" observer_enabled"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(["}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"uint8)"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      quant_min"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=-"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"128"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" quant_max"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"127"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qint8"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" qscheme"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"per_channel_symmetric"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ch_axis"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      scale"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(["}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"])"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      zero_point"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(["}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                         "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"                         "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"])"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      (activation_post_process): "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"MovingAveragePerChannelMinMaxObserver"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(min_val"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"([]), max_val=tensor([]))"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    )"})}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    ("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"activation_post_process"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"): FakeQuantize("})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"fake_quant_enabled"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(["}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"uint8)"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"observer_enabled"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(["}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"]"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"uint8)"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      quant_min"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=-"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"128"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"quant_max"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"127"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qint8"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"qscheme"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"per_tensor_symmetric"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ch_axis"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=-"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      scale"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(["}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"])"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"zero_point"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(["}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"])"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      (activation_post_process): "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"MovingAverageMinMaxObserver"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(min_val"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"([]), max_val=tensor([]))"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    )"})}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  )"})}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"\uFF09"})}),"\n"]})})}),"\n",(0,o.jsxs)(n.h3,{id:"whether-auxiliary-branches-can-insert-pseudo-quantized-nodes",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#whether-auxiliary-branches-can-insert-pseudo-quantized-nodes",children:"#"}),"Whether auxiliary branches can insert pseudo-quantized nodes?"]}),"\n",(0,o.jsx)(n.p,{children:"Solution: It is recommended that pseudo-quantization nodes be inserted only for the portion of the model that is deployed on the board.\nSince QAT training is a global training, the existence of auxiliary branches will lead to an increase in the difficulty of training, and if the data distribution at the auxiliary branches is different from other branches, it will also increase the risk of accuracy, so it is recommended to remove them."}),"\n",(0,o.jsxs)(n.h3,{id:"how-to-rewrite-the-horizon-gridsample-operator-into-a-torch-public-implementation",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#how-to-rewrite-the-horizon-gridsample-operator-into-a-torch-public-implementation",children:"#"}),"How to rewrite the horizon gridsample operator into a torch public implementation?"]}),"\n",(0,o.jsxs)(n.p,{children:["Solution: The non-public implementation of the gridsample operator in horizon_plugin_pytorch has grid inputs (input 2) that are absolute coordinates of type int16, while the public version of the torch is normalized coordinates of type float32 in the range ",(0,o.jsx)(n.code,{children:"[-1, 1]"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["Therefore, after importing the grid_sample operator from the ",(0,o.jsx)(n.code,{children:"torch.nn.functional.grid_sample"})," path, the grid can be normalized in the following way:"]}),"\n",(0,o.jsx)(n.pre,{className:"code",children:(0,o.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,o.jsxs)(n.code,{className:"language-cpp",meta:"",children:[(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"def"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"norm_grid"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"x"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"grid"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  n "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"grid"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"size"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  h "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"grid"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"size"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  w "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"grid"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"size"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number"}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  base_coord_y "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"arange"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(h"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"grid"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" device"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"grid"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"device)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      ."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"unsqueeze"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      ."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"unsqueeze"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      ."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"expand"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(n"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" h"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" w)"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  )"})}),"\n",(0,o.jsx)(n.span,{className:"line line-number"}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  base_coord_x "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"arange"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(w"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"grid"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" device"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"grid"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"device)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      ."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"unsqueeze"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      ."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"unsqueeze"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      ."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"expand"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(n"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" h"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" w)"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  )"})}),"\n",(0,o.jsx)(n.span,{className:"line line-number"}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  absolute_grid_x "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"grid"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"[:"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" :"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" :"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"] "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"+"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" base_coord_x"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  absolute_grid_y "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"grid"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"[:"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" :"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" :"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"] "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"+"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" base_coord_y"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  norm_grid_x "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" absolute_grid_x "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"x"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"size"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  norm_grid_y "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" absolute_grid_y "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"/"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"x"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"size"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"-"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  norm_grid "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"stack"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"((norm_grid_x"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" norm_grid_y)"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dim"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=-"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number"}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" norm_grid"})]}),"\n"]})})}),"\n",(0,o.jsxs)(n.h3,{id:"why-are-the-weight-parameters-not-updated-for-qat-training-after-load-calibration",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#why-are-the-weight-parameters-not-updated-for-qat-training-after-load-calibration",children:"#"}),"Why are the weight parameters not updated for QAT training after load calibration?"]}),"\n",(0,o.jsx)(n.p,{children:"Solution:"}),"\n",(0,o.jsx)(n.p,{children:"It can be checked in turn as follows:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Whether prepare is before the optimizer definition. Because prepare_qat performs operator fusion, resulting in a change in model structure;"}),"\n",(0,o.jsx)(n.li,{children:"Whether fake_quant_enabled and observe_enabled are 1;"}),"\n",(0,o.jsx)(n.li,{children:"Whether the training variable in the module is True."}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"how-to-handle-float-type-constants---operations-not-supported-by-prepare_fx",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#how-to-handle-float-type-constants---operations-not-supported-by-prepare_fx",children:"#"}),"How to handle float type constants +-*/ operations not supported by prepare_fx?"]}),"\n",(0,o.jsx)(n.p,{children:"Solution: Since float operations are not recorded by fx when the model is converted to a static graph, errors such as add not supported, float not converted to qtensor, etc. are triggered.\nIn this case, the constant needs to be changed to a tensor, and the input tensor needs to be quantized (inserted into quantstub) to convert the symbolic operation to a FloatFunction.\nA reference example is provided below."}),"\n",(0,o.jsx)(n.p,{children:"Before modification:"}),"\n",(0,o.jsx)(n.pre,{className:"code",children:(0,o.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,o.jsxs)(n.code,{className:"language-cpp",meta:"",children:[(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"#init"})}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"def"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"__init__"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"epsilon"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"e-"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"4"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"p5_w1 "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"nn"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Parameter"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ones"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"float32)"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" requires_grad"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"True)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"act "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"nn"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ReLU"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number"}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"#forward"})}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"def"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"forward"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"x"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    x "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"quant_stub"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(x)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    p5_w1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"quant_stub"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"p5_w1)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    p5_w1 "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"act"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(p5_w1)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    p1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"sum"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"p5_w1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"unsqueeze"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dim"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" keepdim"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"True)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    cc_p5 "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" p1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"+"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"epsilon"})]}),"\n"]})})}),"\n",(0,o.jsx)(n.p,{children:"After modification:"}),"\n",(0,o.jsx)(n.pre,{className:"code",children:(0,o.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,o.jsxs)(n.code,{className:"language-cpp",meta:"",children:[(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"#init"})}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"def"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"__init__"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ):"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"p5_w1 "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"nn"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Parameter"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ones"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"2"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dtype"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"float32)"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" requires_grad"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"True)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"act "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"nn"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ReLU"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"epsilon "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Tensor"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(["}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"e-"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"4"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"])"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"mul_fu "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"nn"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"quantized"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"FloatFunctional"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number"}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"#forward"})}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"def"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"forward"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"x"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    x "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"quant_stub"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(x)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    p5_w1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"quant_stub"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"p5_w1)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    epsilon"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"quant_stub"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"epsilon)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    p5_w1 "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"act"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(p5_w1)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    p1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"torch"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"sum"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"p5_w1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"unsqueeze"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" dim"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" keepdim"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"True)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    cc_p5 "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"mul_fu"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"add"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(p1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" epsilon)"})]}),"\n"]})})}),"\n",(0,o.jsxs)(n.h2,{id:"setting-error",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#setting-error",children:"#"}),"Setting Error"]}),"\n",(0,o.jsxs)(n.h3,{id:"modules-that-do-not-need-to-be-quantized-set-a-non-none-qconfig-eg-prepost-processing-loss-function-etc",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#modules-that-do-not-need-to-be-quantized-set-a-non-none-qconfig-eg-prepost-processing-loss-function-etc",children:"#"}),"Modules that do not need to be quantized set a non-None qconfig, e.g., pre/post-processing, loss function, etc."]}),"\n",(0,o.jsx)(n.p,{children:"Solution: set qconfig only for modules that need to be quantized."}),"\n",(0,o.jsxs)(n.h3,{id:"the-march-is-not-set-correctly-which-may-result-in-model-compilation-failures-or-inconsistent-deployment-accuracy",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#the-march-is-not-set-correctly-which-may-result-in-model-compilation-failures-or-inconsistent-deployment-accuracy",children:"#"}),"The march is not set correctly, which may result in model compilation failures or inconsistent deployment accuracy."]}),"\n",(0,o.jsx)(n.p,{children:"Solution: select the correct BPU architecture based on the processor to be deployed, e.g. J6 requires Nash:"}),"\n",(0,o.jsx)(n.pre,{className:"code",children:(0,o.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,o.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"horizon"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"march"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"set_march"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(horizon.march.March.NASH)"})]}),"\n"]})})}),"\n",(0,o.jsxs)(n.h3,{id:"the-model-output-node-is-not-set-to-high-accuracy-output-resulting-in-quantization-accuracy-that-is-not-as-expected",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#the-model-output-node-is-not-set-to-high-accuracy-output-resulting-in-quantization-accuracy-that-is-not-as-expected",children:"#"}),"The model output node is not set to high accuracy output, resulting in quantization accuracy that is not as expected."]}),"\n",(0,o.jsx)(n.p,{children:"An error example is shown below:"}),"\n",(0,o.jsx)(n.p,{children:"Assume that the model is defined as follows:"}),"\n",(0,o.jsx)(n.pre,{className:"code",children:(0,o.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,o.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ToyNet"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"nn"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Module"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"__init__"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"conv0 "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" nn"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Conv2d"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"4"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"4"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"relu0 "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" nn"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ReLU"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"classifier "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" nn"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Conv2d"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"4"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"4"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number"}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"forward"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"x"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        out "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"conv0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(x)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        out "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"relu"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(out)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        out "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"classifier"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(out)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" out"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number"}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# example of setting qconfig incorrectly:"})}),"\n",(0,o.jsx)(n.span,{className:"line line-number"}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"float_model "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ToyNet"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# set the whole network to int8 quantization"})}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"float_model"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qconfig "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" default_qat_8bit_fake_quant_qconfig"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qat_model "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"prepare"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(float_model, example_input)"})]}),"\n"]})})}),"\n",(0,o.jsx)(n.p,{children:"Solution: in order to improve the model accuracy, set the model output node to high accuracy, as shown in the example below:"}),"\n",(0,o.jsx)(n.pre,{className:"code",children:(0,o.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,o.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qat_model "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantization"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"prepare"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"    float_model,"})}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"    example_input,"})}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# Use default template to automatically enable high precision output."})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"    qconfig_setter "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:" horizon.quantization.qconfig_template.default_qat_qconfig_setter,"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number",children:(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})}),"\n"]})})}),"\n",(0,o.jsxs)(n.h2,{id:"method-error",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#method-error",children:"#"}),"Method Error"]}),"\n",(0,o.jsxs)(n.h3,{id:"the-calibration-process-uses-multi-cards",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#the-calibration-process-uses-multi-cards",children:"#"}),"The Calibration process uses multi-cards."]}),"\n",(0,o.jsx)(n.p,{children:"Solution: Due to underlying limitations, currently Calibration does not support multi-cards, please use a single card for Calibration"}),"\n",(0,o.jsxs)(n.h3,{id:"the-model-input-image-data-is-in-a-non-centered-yuv444-format-such-as-rgb-which-may-result-in-inconsistent-model-deployment-accuracy",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#the-model-input-image-data-is-in-a-non-centered-yuv444-format-such-as-rgb-which-may-result-in-inconsistent-model-deployment-accuracy",children:"#"}),"The model input image data is in a non-centered YUV444 format such as RGB, which may result in inconsistent model deployment accuracy."]}),"\n",(0,o.jsx)(n.p,{children:"Solution: since the image format supported by Horizon hardware is centered YUV444, it is recommended that you use the YUV444 format directly as the network input from the beginning of model training."}),"\n",(0,o.jsxs)(n.h3,{id:"use-the-qat-model-for-model-accuracy-evaluation-and-monitoring-in-quantized-awareness-training-which-leads-to-the-problem-of-failing-to-detect-the-abnormal-accuracy-at-the-time-of-deployment-in-a-timely-manner",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#use-the-qat-model-for-model-accuracy-evaluation-and-monitoring-in-quantized-awareness-training-which-leads-to-the-problem-of-failing-to-detect-the-abnormal-accuracy-at-the-time-of-deployment-in-a-timely-manner",children:"#"}),"Use the qat model for model accuracy evaluation and monitoring in quantized awareness training, which leads to the problem of failing to detect the abnormal accuracy at the time of deployment in a timely manner."]}),"\n",(0,o.jsx)(n.p,{children:"Solution: the reason for the error between QAT and Quantized is that the QAT stage cannot fully simulate the pure fixed-point computation logic in Quantized, so it is recommended to use the quantized model for model accuracy evaluation and monitoring."}),"\n",(0,o.jsx)(n.pre,{className:"code",children:(0,o.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,o.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantized_hbir_model "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" hbdk4"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"compiler"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"convert"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(qat_hbir_model)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"acc "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"evaluate"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(quantized_hbir_model, eval_data_loader)"})]}),"\n"]})})}),"\n",(0,o.jsxs)(n.h2,{id:"network-error",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#network-error",children:"#"}),"Network Error"]}),"\n",(0,o.jsxs)(n.h3,{id:"call-the-same-member-defined-byfloatfunctional-multiple-times",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#call-the-same-member-defined-byfloatfunctional-multiple-times",children:"#"}),"Call the same member defined by",(0,o.jsx)(n.code,{children:"FloatFunctional()"})," multiple times."]}),"\n",(0,o.jsx)(n.p,{children:"The error example is as follows:"}),"\n",(0,o.jsx)(n.pre,{className:"code",children:(0,o.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,o.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ToyNet"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"nn"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Module"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"__init__"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"add "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"FloatFunctional"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number"}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"forward"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"x"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"y"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"z"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        out "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"add"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(x, y)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"add"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(out, z)"})]}),"\n"]})})}),"\n",(0,o.jsxs)(n.p,{children:["Solution: prohibit calling the same variable defined by ",(0,o.jsx)(n.code,{children:"FloatFunctional()"})," multiple times in forward."]}),"\n",(0,o.jsx)(n.pre,{className:"code",children:(0,o.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,o.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ToyNet"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"nn"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Module"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"__init__"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"add0 "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"FloatFunctional"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"add1 "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"FloatFunctional"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,o.jsx)(n.span,{className:"line line-number"}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"forward"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"x"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"y"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"z"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        out "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"add0"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"add"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(x, y)"})]}),"\n",(0,o.jsxs)(n.span,{className:"line line-number",children:[(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" self"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"add1"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"add"}),(0,o.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(out, z)"})]}),"\n"]})})}),"\n",(0,o.jsxs)(n.h2,{id:"operator-error",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#operator-error",children:"#"}),"Operator Error"]}),"\n",(0,o.jsxs)(n.h3,{id:"some-of-the-operators-in-the-quantized-model-have-not-gone-through-the-calibration-or-qat-for-example-a-post-processing-operator-wants-to-be-accelerated-on-the-bpu-but-has-not-gone-through-the-quantization-stage-which-will-lead-to-the-failure-of-quantization-inference-or-abnormal-accuracy-when-deployed",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#some-of-the-operators-in-the-quantized-model-have-not-gone-through-the-calibration-or-qat-for-example-a-post-processing-operator-wants-to-be-accelerated-on-the-bpu-but-has-not-gone-through-the-quantization-stage-which-will-lead-to-the-failure-of-quantization-inference-or-abnormal-accuracy-when-deployed",children:"#"}),"Some of the operators in the Quantized model have not gone through the calibration or QAT, for example, a post-processing operator wants to be accelerated on the BPU but has not gone through the quantization stage, which will lead to the failure of quantization inference or abnormal accuracy when deployed."]}),"\n",(0,o.jsx)(n.p,{children:"Solution: the Quantized phase is not completely unable to add operators directly, such as color space conversion operators, see the document for details on how to add operators. However, not all operators can be added directly, such as cat, this kind of operator must be obtained in the calibration or QAT phase of the statistics of the real quantization parameters in order not to affect the final accuracy, if you have a similar need to adjust the structure of the network, you can consult with the framework developers."}),"\n",(0,o.jsxs)(n.h2,{id:"model-error",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#model-error",children:"#"}),"Model Error"]}),"\n",(0,o.jsxs)(n.h3,{id:"floating-point-model-overfitting",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#floating-point-model-overfitting",children:"#"}),"Floating-point model overfitting."]}),"\n",(0,o.jsx)(n.p,{children:"Common determination of model overfitting:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Large changes in the output after a slight transformation of the input data."}),"\n",(0,o.jsx)(n.li,{children:"The model parameters are assigned large values."}),"\n",(0,o.jsx)(n.li,{children:"The model activation is large."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Solution: Solve the floating-point model overfitting problem on your own."})]})}function l(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),s.components);return n?(0,o.jsx)(n,Object.assign({},s,{children:(0,o.jsx)(t,s)})):t(s)}n.default=l,l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["3.0.22%2Fen%2Fguide%2Fplugin%2Fqat_faq%2Ffaq.mdx"]={toc:[{id:"training-environment",text:"Training Environment",depth:2},{id:"docker-container-cant-use-nvidia-resources",text:"Docker container can't use Nvidia resources?",depth:3},{id:"qat-quantized-training",text:"QAT Quantized Training",depth:2},{id:"quantized-accuracy-anomaly",text:"Quantized Accuracy Anomaly",depth:3},{id:"why-does-accuracy-performance-deteriorate-after-turning-on-multi-machine-training",text:"Why does accuracy performance deteriorate after turning on multi-machine training?",depth:3},{id:"does-qconfig-require-user-intervention",text:"Does Qconfig require user intervention?",depth:3},{id:"how-to-export-onnx-model-for-each-phase",text:"How to export ONNX model for each phase?",depth:3},{id:"why-does-nan-exist-during-qat-training",text:"Why does nan exist during QAT training?",depth:3},{id:"configure-the-int16-node-or-high-precision-output-node-to-be-invalid",text:"Configure the int16 node or high-precision output node to be invalid",depth:3},{id:"how-to-check-whether-high-accuracy-output-is-turned-on-for-a-particular-layer",text:"How to check whether high-accuracy output is turned on for a particular layer?",depth:3},{id:"whether-auxiliary-branches-can-insert-pseudo-quantized-nodes",text:"Whether auxiliary branches can insert pseudo-quantized nodes?",depth:3},{id:"how-to-rewrite-the-horizon-gridsample-operator-into-a-torch-public-implementation",text:"How to rewrite the horizon gridsample operator into a torch public implementation?",depth:3},{id:"why-are-the-weight-parameters-not-updated-for-qat-training-after-load-calibration",text:"Why are the weight parameters not updated for QAT training after load calibration?",depth:3},{id:"how-to-handle-float-type-constants---operations-not-supported-by-prepare_fx",text:"How to handle float type constants +-*/ operations not supported by prepare_fx?",depth:3},{id:"setting-error",text:"Setting Error",depth:2},{id:"modules-that-do-not-need-to-be-quantized-set-a-non-none-qconfig-eg-prepost-processing-loss-function-etc",text:"Modules that do not need to be quantized set a non-None qconfig, e.g., pre/post-processing, loss function, etc.",depth:3},{id:"the-march-is-not-set-correctly-which-may-result-in-model-compilation-failures-or-inconsistent-deployment-accuracy",text:"The march is not set correctly, which may result in model compilation failures or inconsistent deployment accuracy.",depth:3},{id:"the-model-output-node-is-not-set-to-high-accuracy-output-resulting-in-quantization-accuracy-that-is-not-as-expected",text:"The model output node is not set to high accuracy output, resulting in quantization accuracy that is not as expected.",depth:3},{id:"method-error",text:"Method Error",depth:2},{id:"the-calibration-process-uses-multi-cards",text:"The Calibration process uses multi-cards.",depth:3},{id:"the-model-input-image-data-is-in-a-non-centered-yuv444-format-such-as-rgb-which-may-result-in-inconsistent-model-deployment-accuracy",text:"The model input image data is in a non-centered YUV444 format such as RGB, which may result in inconsistent model deployment accuracy.",depth:3},{id:"use-the-qat-model-for-model-accuracy-evaluation-and-monitoring-in-quantized-awareness-training-which-leads-to-the-problem-of-failing-to-detect-the-abnormal-accuracy-at-the-time-of-deployment-in-a-timely-manner",text:"Use the qat model for model accuracy evaluation and monitoring in quantized awareness training, which leads to the problem of failing to detect the abnormal accuracy at the time of deployment in a timely manner.",depth:3},{id:"network-error",text:"Network Error",depth:2},{id:"call-the-same-member-defined-byfloatfunctional-multiple-times",text:"Call the same member defined by`FloatFunctional()` multiple times.",depth:3},{id:"operator-error",text:"Operator Error",depth:2},{id:"some-of-the-operators-in-the-quantized-model-have-not-gone-through-the-calibration-or-qat-for-example-a-post-processing-operator-wants-to-be-accelerated-on-the-bpu-but-has-not-gone-through-the-quantization-stage-which-will-lead-to-the-failure-of-quantization-inference-or-abnormal-accuracy-when-deployed",text:"Some of the operators in the Quantized model have not gone through the calibration or QAT, for example, a post-processing operator wants to be accelerated on the BPU but has not gone through the quantization stage, which will lead to the failure of quantization inference or abnormal accuracy when deployed.",depth:3},{id:"model-error",text:"Model Error",depth:2},{id:"floating-point-model-overfitting",text:"Floating-point model overfitting.",depth:3}],title:"FAQ",frontmatter:{}}},95895:function(s,n,e){e(39710);var o=e(85893),r=e(67294),i=e(45687);e(20388);let t={"zh-CN":s=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${s.minutes>=1?`${Math.ceil(s.minutes)} \u{5206}\u{949F}`:"\u5C0F\u4E8E 1 \u5206\u949F"}`,"en-US":s=>`Estimated reading time: ${s.minutes>=1?`${Math.ceil(s.minutes)} minutes`:"less than 1 minute"}`};function l(s,n,e){let o=Object.keys(t).includes(n)?n:e;return t[o](s)}n.Z=s=>{let{defaultLocale:n="en-US"}=s,e=(0,i.Vi)().page.readingTimeData,t=(0,i.Jr)(),a=(0,i.e7)(),[c,h]=(0,r.useState)(l(e,t,n));return(0,r.useEffect)(()=>{h(l(e,t,n))},[t,e]),(0,o.jsx)("span",{"data-dark":String(a),className:"rp-reading-time",children:c})}}}]);