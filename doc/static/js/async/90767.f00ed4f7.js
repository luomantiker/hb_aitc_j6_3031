"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["90767"],{36434:function(s,n,e){s.exports=e.p+"static/image/new_debug_flow.40f71ddc.png"},73839:function(s,n,e){s.exports=e.p+"static/image/profiler_html.24155bc1.png"},87832:function(s,n,e){s.exports=e.p+"static/image/tensorboard.551589ac.png"},41171:function(s,n,e){e.r(n);var l=e(85893),r=e(50065),i=e(95895),o=e(73839),a=e(87832),c=e(36434);function t(s){let n=Object.assign({h1:"h1",a:"a",p:"p",ol:"ol",li:"li",ul:"ul",h2:"h2",pre:"pre",code:"code",span:"span",h3:"h3",strong:"strong",div:"div",h4:"h4",img:"img",math:"math",semantics:"semantics",mrow:"mrow",mo:"mo",mi:"mi",annotation:"annotation",h5:"h5"},(0,r.ah)(),s.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.h1,{id:"\u7CBE\u5EA6\u8C03\u4F18\u5DE5\u5177\u4F7F\u7528\u6307\u5357",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u7CBE\u5EA6\u8C03\u4F18\u5DE5\u5177\u4F7F\u7528\u6307\u5357",children:"#"}),"\u7CBE\u5EA6\u8C03\u4F18\u5DE5\u5177\u4F7F\u7528\u6307\u5357"]}),"\n",(0,l.jsx)(i.Z,{}),"\n",(0,l.jsx)(n.p,{children:"\u7531\u4E8E\u6D6E\u70B9\u8F6C\u5B9A\u70B9\u8FC7\u7A0B\u4E2D\u5B58\u5728\u8BEF\u5DEE\uFF0C\u5F53\u60A8\u5728\u4F7F\u7528\u91CF\u5316\u8BAD\u7EC3\u5DE5\u5177\u65F6\uFF0C\u96BE\u514D\u4F1A\u78B0\u5230\u91CF\u5316\u6A21\u578B\u7CBE\u5EA6\u6389\u70B9\u95EE\u9898\u3002\u901A\u5E38\u6765\u8BF4\uFF0C\u9020\u6210\u6389\u70B9\u7684\u539F\u56E0\u6709\uFF1A"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u539F\u6709\u6D6E\u70B9\u6A21\u578B\u4E0D\u5229\u4E8E\u91CF\u5316\uFF0C\u5982\u5B58\u5728\u5171\u4EAB op \u6216\u5171\u4EAB\u7ED3\u6784\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"QAT \u7F51\u7EDC\u7ED3\u6784\u6216\u914D\u7F6E\u5F02\u5E38\uFF0C\u5982\u6A21\u578B\u4E2D\u5B58\u5728\u6CA1\u6709 fuse \u7684 pattern\uFF0C\u6CA1\u6709\u8BBE\u7F6E\u9AD8\u7CBE\u5EA6\u8F93\u51FA\u7B49\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u67D0\u4E9B\u7B97\u5B50\u5BF9\u91CF\u5316\u6BD4\u8F83\u654F\u611F\uFF0C\u8BE5\u7B97\u5B50\u7684\u91CF\u5316\u8BEF\u5DEE\u5728\u524D\u5411\u4F20\u64AD\u8FC7\u7A0B\u4E2D\u9010\u5C42\u7D2F\u79EF\uFF0C\u6700\u7EC8\u5BFC\u81F4\u6A21\u578B\u8F93\u51FA\u8BEF\u5DEE\u8F83\u5927\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u9488\u5BF9\u4E0A\u8FF0\u60C5\u51B5\uFF0C\u91CF\u5316\u8BAD\u7EC3\u5DE5\u5177\u63D0\u4F9B\u4E86\u7CBE\u5EA6\u8C03\u4F18\u5DE5\u5177\u6765\u5E2E\u52A9\u60A8\u5FEB\u901F\u5B9A\u4F4D\u5E76\u89E3\u51B3\u7CBE\u5EA6\u95EE\u9898\uFF0C\u4E3B\u8981\u5305\u62EC\u5982\u4E0B\u6A21\u5757\uFF1A"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"#structure_checker",children:"\u6A21\u578B\u7ED3\u6784\u68C0\u67E5"}),"\uFF1A\u68C0\u67E5\u6A21\u578B\u4E2D\u662F\u5426\u5B58\u5728\u5171\u4EAB op\u3001\u6CA1\u6709 fuse \u7684 pattern \u6216\u8005\u4E0D\u7B26\u5408\u9884\u671F\u7684\u91CF\u5316\u914D\u7F6E\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"#quant_analysis",children:"QuantAnalysis \u7C7B"}),"\uFF1A\u81EA\u52A8\u6BD4\u5BF9\u5206\u6790\u4E24\u4E2A\u6A21\u578B\uFF0C\u5B9A\u4F4D\u5230\u91CF\u5316\u6A21\u578B\u4E2D\u5F02\u5E38\u7B97\u5B50\u6216\u8005\u91CF\u5316\u654F\u611F op\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"#model_profiler",children:"ModelProfiler \u7C7B"})," \u548C ",(0,l.jsx)(n.a,{href:"#hbir_model_profiler",children:"HbirModelProfiler \u7C7B"}),"\uFF1A\u83B7\u5F97\u6A21\u578B\u4E2D\u6BCF\u4E00\u4E2A op \u7684\u6570\u503C\u7279\u5F81\u4FE1\u606F\uFF0C\u5982\u8F93\u5165\u8F93\u51FA\u7684\u6700\u5927\u6700\u5C0F\u503C\u7B49\u3002\u8FD9\u4E24\u4E2A\u7C7B\u7684\u529F\u80FD\u5B8C\u5168\u4E00\u81F4\uFF0C\u533A\u522B\u5728\u4E8E HbirModelProfiler \u4EC5\u63A5\u53D7 qat hbir \u6A21\u578B\u4F5C\u4E3A\u8F93\u5165\u3002\u901A\u5E38\u60A8\u65E0\u9700\u624B\u52A8\u8C03\u7528\u8BE5\u6A21\u5757\uFF0C\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7 QuantAnalysis.run \u6765\u83B7\u5F97\u4E24\u4E2A\u6A21\u578B\u7684\u6570\u503C\u4FE1\u606F\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.h2,{id:"\u5FEB\u901F\u4E0A\u624B",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5FEB\u901F\u4E0A\u624B",children:"#"}),"\u5FEB\u901F\u4E0A\u624B"]}),"\n",(0,l.jsx)(n.p,{children:"\u5F53\u78B0\u5230\u91CF\u5316\u6A21\u578B\u7CBE\u5EA6\u6389\u70B9\u95EE\u9898\u65F6\uFF0C\u6211\u4EEC\u63A8\u8350\u6309\u7167\u5982\u4E0B\u7684\u6D41\u7A0B\u4F7F\u7528\u7CBE\u5EA6\u8C03\u4F18\u5DE5\u5177\u3002"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u68C0\u67E5\u6A21\u578B\u4E2D\u662F\u5426\u5B58\u5728\u4E0D\u5229\u4E8E\u91CF\u5316\u7684\u7ED3\u6784\u6216\u8005\u5F02\u5E38\u914D\u7F6E\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u4F7F\u7528 QuantAnalysis \u6A21\u5757\u8FDB\u884C\u5206\u6790\uFF0C\u5177\u4F53\u6B65\u9AA4\u5982\u4E0B\uFF1A"}),"\n",(0,l.jsx)(n.p,{children:"1). \u627E\u5230\u4E00\u4E2A bad case \u4F5C\u4E3A\u6A21\u578B\u7684\u8F93\u5165\u3002bad case \u662F\u6307\u57FA\u51C6\u6A21\u578B\u548C\u5F85\u5206\u6790\u6A21\u578B\u8F93\u51FA\u76F8\u5DEE\u6700\u5927\u7684\u90A3\u4E2A\u8F93\u5165\u3002"}),"\n",(0,l.jsx)(n.p,{children:"2). \u8FDB\u884C\u91CF\u5316\u654F\u611F\u5EA6\u5206\u6790\uFF0C\u76EE\u524D\u7684\u7ECF\u9A8C\u662F L1 \u654F\u611F\u5EA6\u6392\u5E8F\u524D n \u4E2A\u901A\u5E38\u4E3A\u91CF\u5316\u654F\u611F op\uFF08\u4E0D\u540C\u7684\u6A21\u578B n \u7684\u6570\u503C\u4E0D\u4E00\u6837\uFF0C\u6682\u65E0\u81EA\u52A8\u786E\u5B9A\u7684\u65B9\u6CD5\uFF0C\u9700\u8981\u624B\u52A8\u5C1D\u8BD5\uFF0C\u5982\u524D 10 \u4E2A\uFF0C20 \u4E2A...\uFF09\u3002\u5C06\u91CF\u5316\u654F\u611F op \u8BBE\u7F6E\u9AD8\u7CBE\u5EA6\u91CF\u5316\uFF08\u5982 int16 \u91CF\u5316\uFF09\uFF0C\u91CD\u65B0\u8FDB\u884C\u91CF\u5316\u6D41\u7A0B\u3002"}),"\n",(0,l.jsx)(n.p,{children:"3). \u6216\u8005\u9010\u5C42\u6BD4\u8F83\u4E24\u4E2A\u6A21\u578B\u7684\u8F93\u5165\u8F93\u51FA\u7B49\u4FE1\u606F\uFF0C\u68C0\u67E5\u662F\u5426\u5B58\u5728\u6570\u636E\u8303\u56F4\u8FC7\u5927\u6216\u8005 scale \u4E0D\u5408\u7406\u7B49\u91CF\u5316\u5F02\u5E38\u7684 op\uFF0C\u5982\u67D0\u4E9B\u5177\u6709\u7269\u7406\u542B\u4E49\u7684 op \u5E94\u8BBE\u7F6E\u56FA\u5B9A scale\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u6574\u4F53\u7684\u6D41\u7A0B\u56FE\u5982\u4E0B\uFF1A"}),"\n",(0,l.jsx)("img",{src:c,alt:"new_debug_flow",width:"725"}),"\n",(0,l.jsx)(n.p,{children:"\u4E00\u4E2A\u5B8C\u6574\u7684\u4F8B\u5B50\u5982\u4E0B\uFF1A"}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" copy "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" deepcopy"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" torch"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" torch "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" nn"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" torch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantization "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" DeQuantStub"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" QuantStub"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_plugin_pytorch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"march "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" March"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" set_march"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_plugin_pytorch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantization"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qconfig "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    default_qat_8bit_fake_quant_qconfig"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_plugin_pytorch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantization "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" prepare"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_plugin_pytorch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quantization "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" hbdk4 "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" hb4"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_plugin_pytorch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"utils"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"check_model "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" check_qat_model"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" horizon_plugin_profiler "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" QuantAnalysis"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ModelProfiler"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Net"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"nn"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Module"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"__init__"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"super"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(Net, self)."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"__init__"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"conv "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" nn"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Conv2d"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"relu "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" nn"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ReLU"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quant "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"QuantStub"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"dequant "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"DeQuantStub"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"forward"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"x"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        x "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"quant"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(x)"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        x "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"conv"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(x)"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        x "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"relu"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(x)"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        x "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" torch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"nn"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"functional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"interpolate"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"            x, scale_factor"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1.3"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", mode"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"bilinear"'}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", align_corners"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"False"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"        )"})}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        x "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"dequant"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(x)"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" x"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"data "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" torch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"rand"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(("}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"3"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"32"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"32"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"))"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"float_net "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"Net"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"float_net"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(data)"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"set_march"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(March.NASH)"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"float_net"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qconfig "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" default_qat_8bit_fake_quant_qconfig"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qat_net "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"deepcopy"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(float_net)"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qat_net "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"prepare"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(qat_net, data)"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"############################### \u6A21\u578B\u7ED3\u6784\u68C0\u67E5 ##############################"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# \u786E\u8BA4\u63D0\u793A\u7684\u5F02\u5E38\u5C42\u662F\u5426\u7B26\u5408\u9884\u671F"})}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"check_qat_model"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(qat_net, data, save_results"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"True"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"##########################################################################"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"qat_net"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(data)"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# \u5BFC\u51FA hbir \u6A21\u578B"})}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qat_hbir "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" hb4"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"export"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(qat_net, (data,))"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"############################### quant analysis ############################"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# 1. \u521D\u59CB\u5316"})}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qa "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"QuantAnalysis"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"    baseline_model"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"float_net,"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"    analysis_model"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"qat_net,"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"    analysis_model_type"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"fake_quant"'}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"    out_dir"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"./floatvsqat"'}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# \u4E5F\u652F\u6301\u5BF9\u6BD4 qat \u548C qat hbir"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# qa = QuantAnalysis("})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"#     baseline_model=qat_net,"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"#     analysis_model=qat_hbir,"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:'#     analysis_model_type="fake_quant",'})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:'#     out_dir="./qatvshbir",'})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# )"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# 2. \u8BBE\u7F6E badcase \u8F93\u5165"})}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qa"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"set_bad_case"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(data)"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# \u5B9E\u9645\u573A\u666F\u4E0B\u63A8\u8350\u4F7F\u7528 auto_find_bad_case \u5728\u6574\u4E2A dataloader \u4E0A\u641C\u7D22 bad case"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# \u4E5F\u652F\u6301\u8BBE\u7F6E num_steps \u53C2\u6570\u6765\u63A7\u5236\u641C\u7D22\u7684\u8303\u56F4"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# qa.auto_find_bad_case(your_dataloader, num_steps=100)"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# 3. \u8FD0\u884C\u4E24\u4E2A\u6A21\u578B"})}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qa"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"run"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# 4. \u4E24\u4E2A\u6A21\u578B\u9010\u5C42\u6BD4\u8F83\u3002\u786E\u8BA4 abnormal_layer_advisor.txt \u63D0\u793A\u7684\u5F02\u5E38\u5C42\u662F\u5426\u7B26\u5408\u9884\u671F"})}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qa"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"compare_per_layer"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# 5. \u8BA1\u7B97\u654F\u611F\u5EA6\u8282\u70B9\u3002\u53EF\u4EE5\u5C06 topk \u6392\u5E8F\u7684\u654F\u611F\u5EA6\u8282\u70B9\u8BBE\u7F6E\u9AD8\u7CBE\u5EA6\u6765\u5C1D\u8BD5\u63D0\u5347\u91CF\u5316\u6A21\u578B\u7CBE\u5EA6"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# \uFF01\uFF01\uFF01\u4E0D\u652F\u6301 qat_hbir \u6A21\u578B\u7684\u654F\u611F\u5EA6\u8BA1\u7B97"})}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"qa"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"sensitivity"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"##########################################################################"})}),"\n"]})})}),"\n",(0,l.jsxs)(n.h2,{id:"api-reference",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#api-reference",children:"#"}),"API Reference"]}),"\n",(0,l.jsxs)(n.h3,{id:"structure_checker",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#structure_checker",children:"#"}),"\u6A21\u578B\u7ED3\u6784\u68C0\u67E5"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# from horizon_plugin_pytorch.utils.check_model import check_qat_model"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"check_qat_model"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"model"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" torch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"nn"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Module"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"example_inputs"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Any"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"save_results"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"bool"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"False"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"out_dir"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:"\u68C0\u67E5 calibration/qat \u6A21\u578B\u4E2D\u662F\u5426\u5B58\u5728\u4E0D\u5229\u4E8E\u91CF\u5316\u7684\u7ED3\u6784\u4EE5\u53CA\u91CF\u5316 qconfig \u914D\u7F6E\u662F\u5426\u7B26\u5408\u9884\u671F\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"model: \u5F85\u68C0\u67E5\u6A21\u578B\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"example_inputs: \u6A21\u578B\u8F93\u5165\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"save_results: \u662F\u5426\u5C06\u68C0\u67E5\u7ED3\u679C\u4FDD\u5B58\u5230 txt \u6587\u4EF6\u3002\u9ED8\u8BA4 False\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"out_dir: \u7ED3\u679C\u6587\u4EF6 'model_check_result.txt' \u7684\u4FDD\u5B58\u8DEF\u5F84\u3002\u9ED8\u8BA4\u7A7A\uFF0C\u4FDD\u5B58\u5230\u5F53\u524D\u8DEF\u5F84\u4E0B\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u8F93\u51FA"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5C4F\u5E55\u8F93\u51FA\uFF1A\u68C0\u67E5\u51FA\u7684\u5F02\u5E38\u5C42\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"model_check_result.txt\uFF1A\u5728 save_results = True \u65F6\u751F\u6210\u3002\u4E3B\u8981\u7531 5 \u90E8\u5206\u7EC4\u6210\uFF1A"}),"\n",(0,l.jsx)(n.p,{children:"1). \u672A fuse \u7684 pattern\u3002"}),"\n",(0,l.jsx)(n.p,{children:"2). \u6BCF\u4E2A module \u7684\u8C03\u7528\u6B21\u6570\u3002\u6B63\u5E38\u6BCF\u4E2A op \u4EC5\u8C03\u7528 1 \u6B21\uFF0C0 \u8868\u793A\u672A\u88AB\u8C03\u7528\uFF0C\u8D85\u8FC7 1 \u6B21\u5219\u8868\u793A\u88AB\u5171\u4EAB\u4E86\u591A\u6B21\u3002\u672A\u8C03\u7528\u6216\u8005\u5171\u4EAB\u591A\u6B21\u7684\u4F1A\u6709\u5F02\u5E38\u63D0\u793A\u3002"}),"\n",(0,l.jsx)(n.p,{children:"3). \u6BCF\u4E2A op \u8F93\u51FA\u7684 qconfig \u914D\u7F6E\u3002"}),"\n",(0,l.jsx)(n.p,{children:"4). \u6BCF\u4E2A op weight\uFF08\u5982\u679C\u6709\u7684\u8BDD\uFF09\u7684 qconfig \u914D\u7F6E\u3002"}),"\n",(0,l.jsx)(n.p,{children:"5). \u5F02\u5E38 qconfig \u63D0\u793A\uFF08\u5982\u679C\u6709\u7684\u8BDD\uFF09\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-text",meta:"",children:[(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Fusable modules are listed below:"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"name    type"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"------  -----------------------------------------------------"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"conv    <class 'horizon_plugin_pytorch.nn.qat.conv2d.Conv2d'>"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"relu    <class 'horizon_plugin_pytorch.nn.qat.relu.ReLU'>"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"All modules in the model run exactly once."})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Each layer out qconfig:"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"+---------------+-----------------------------------------------------------+---------------+---------------+----------------+-----------------------------+"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| Module Name   | Module Type                                               | Input dtype   | out dtype     | ch_axis        | observer                    |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|---------------+-----------------------------------------------------------+---------------+---------------+----------------+-----------------------------|"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| quant         | <class 'horizon_plugin_pytorch.nn.qat.stubs.QuantStub'>   | torch.float32 | qint8         | -1             | MovingAverageMinMaxObserver |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| conv          | <class 'horizon_plugin_pytorch.nn.qat.conv2d.Conv2d'>     | qint8         | qint8         | -1             | MovingAverageMinMaxObserver |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| relu          | <class 'horizon_plugin_pytorch.nn.qat.relu.ReLU'>         | qint8         | qint8         | qconfig = None |                             |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| dequant       | <class 'horizon_plugin_pytorch.nn.qat.stubs.DeQuantStub'> | qint8         | torch.float32 | qconfig = None |                             |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"+---------------+-----------------------------------------------------------+---------------+---------------+----------------+-----------------------------+"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Weight qconfig:"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"+---------------+-------------------------------------------------------+----------------+-----------+---------------------------------------+"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| Module Name   | Module Type                                           | weight dtype   |   ch_axis | observer                              |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|---------------+-------------------------------------------------------+----------------+-----------+---------------------------------------|"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| conv          | <class 'horizon_plugin_pytorch.nn.qat.conv2d.Conv2d'> | qint8          |         0 | MovingAveragePerChannelMinMaxObserver |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"+---------------+-------------------------------------------------------+----------------+-----------+---------------------------------------+"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,l.jsxs)(n.div,{className:"rspress-directive info",children:[(0,l.jsx)(n.div,{className:"rspress-directive-title",children:"\u6CE8\u89E3"}),(0,l.jsx)(n.div,{className:"rspress-directive-content",children:(0,l.jsxs)(n.p,{children:["\n",(0,l.jsx)(n.code,{children:"prepare"}),"\u63A5\u53E3\u5DF2\u96C6\u6210\u8BE5\u68C0\u67E5\u3002\u8BF7\u60A8\u5173\u6CE8\u6B64\u63A5\u53E3\u8F93\u51FA\u7684\u68C0\u67E5\u7ED3\u679C\uFF0C\u5E76\u6839\u636E\u68C0\u67E5\u7ED3\u679C\u5BF9\u6A21\u578B\u505A\u9488\u5BF9\u6027\u7684\u8C03\u6574\u3002"]})})]}),"\n",(0,l.jsxs)(n.h3,{id:"quant_analysis",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#quant_analysis",children:"#"}),"QuantAnalysis \u7C7B"]}),"\n",(0,l.jsx)(n.p,{children:"QuantAnalysis \u7C7B\u53EF\u4EE5\u81EA\u52A8\u5BFB\u627E\u4E24\u4E2A\u6A21\u578B\u8F93\u51FA\u6700\u5927\u7684 bad case\uFF0C\u5E76\u4EE5\u6B64\u4F5C\u4E3A\u8F93\u5165\uFF0C\u9010\u5C42\u6BD4\u8F83\u4E24\u4E2A\u6A21\u578B\u7684\u8F93\u51FA\u3002\u6B64\u5916\uFF0CQuantAnalysis \u7C7B\u8FD8\u63D0\u4F9B\u8BA1\u7B97\u654F\u611F\u5EA6\u529F\u80FD\uFF0C\u60A8\u53EF\u4EE5\u5C1D\u8BD5\u5C06\u654F\u611F\u5EA6\u6392\u540D topk \u7684\u8282\u70B9\u8BBE\u7F6E\u9AD8\u7CBE\u5EA6\uFF0C\u5982 int16 \u91CF\u5316\uFF0C\u6765\u63D0\u5347\u91CF\u5316\u6A21\u578B\u7CBE\u5EA6\u3002"}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"QuantAnalysis"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"object"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"__init__"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"baseline_model"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Union"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"torch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"nn"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Module"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" HbirModule"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"],"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"analysis_model"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Union"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"torch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"nn"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Module"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" HbirModule"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"],"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"analysis_model_type"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"device_ids"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Union"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"List"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"int"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"],"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"int"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"post_process"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Callable"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"out_dir"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    )"})}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"baseline_model: \u57FA\u51C6\u6A21\u578B\uFF08\u9AD8\u7CBE\u5EA6\uFF09\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"analysis_model\uFF1A\u5F85\u5206\u6790\u7684\u6A21\u578B\uFF08\u7CBE\u5EA6\u6389\u70B9\uFF09\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"analysis_model_type: \u5F85\u5206\u6790\u7684\u6A21\u578B\u7C7B\u578B\u3002\u652F\u6301\u8F93\u5165\uFF1A"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"fake_quant\uFF1A\u5F85\u5206\u6790\u7684\u6A21\u578B\u53EF\u4EE5\u662F\u7CBE\u5EA6\u6389\u70B9\u7684 calibration \u6A21\u578B\uFF0C\u6B64\u65F6\u57FA\u51C6\u6A21\u578B\u53EF\u4EE5\u662F\u539F\u59CB\u6D6E\u70B9\u6A21\u578B\u6216\u8005\u4E00\u4E2A\u7CBE\u5EA6\u8FBE\u6807\u7684 int8/int16 \u6DF7\u5408\u914D\u7F6E\u7684 calibration \u6A21\u578B\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"device_ids\uFF1A\u5BF9\u6BD4\u5206\u6790\u65F6\u6A21\u578B\u8FD0\u884C\u7684 GPU \u8BBE\u5907 index\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"post_process\uFF1A\u6A21\u578B\u540E\u5904\u7406\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"out_dir\uFF1A\u6307\u5B9A\u6BD4\u8F83\u7ED3\u679C\u7684\u8F93\u51FA\u76EE\u5F55\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,l.jsx)(n.div,{className:"rspress-directive-title",children:"\u6CE8\u610F"}),(0,l.jsx)(n.div,{className:"rspress-directive-content",children:(0,l.jsx)(n.p,{children:"\n\u7531\u4E8E QAT \u8BAD\u7EC3\u4F1A\u6539\u53D8\u6A21\u578B weight \u5206\u5E03\uFF0C\u901A\u5E38\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u4E0D\u5EFA\u8BAE\u60A8\u5C06\u6D6E\u70B9\u6216 calibration \u6A21\u578B\u548C qat \u6A21\u578B\u505A\u5BF9\u6BD4\u3002"})})]}),"\n",(0,l.jsx)(n.p,{children:"\u8BE5\u7C7B\u4E2D\u5404\u4E2A method \u5982\u4E0B\uFF1A"}),"\n",(0,l.jsxs)(n.h4,{id:"auto_find_bad_case",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#auto_find_bad_case",children:"#"}),"auto_find_bad_case"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"auto_find_bad_case"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"data_generator"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Iterable"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"num_steps"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"int"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"metric"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"L1"'}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"device"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Union"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"torch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"device"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"int"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"custom_metric_func"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Callable"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"custom_metric_order_seq"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"cached_attrs"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Tuple"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ..."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:"\u81EA\u52A8\u5BFB\u627E\u5BFC\u81F4\u4E24\u4E2A\u6A21\u578B\u8F93\u51FA\u6700\u5DEE\u7684 badcase\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"data_generator\uFF1Adataloader \u6216\u8005\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7684\u8FED\u4EE3\u5668\uFF0C\u6BCF\u6B21\u8FED\u4EE3\u4EA7\u751F\u4E00\u4E2A\u6570\u636E\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"num_steps\uFF1A\u8FED\u4EE3 steps \u6B21\u6570\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"metric\uFF1A\u6307\u5B9A\u4F55\u79CD metric \u4F5C\u4E3A badcase \u7684 metric\u3002\u9ED8\u8BA4\u4F7F\u7528 L1 \u6700\u5DEE\u7684\u7ED3\u679C\u3002\u652F\u6301 Cosine/MSE/L1/KL/SQNR/custom\u3002\u82E5\u4E3A custom\uFF0C\u8868\u793A\u4F7F\u7528\u81EA\u5B9A\u4E49\u7684 metric \u8BA1\u7B97\u65B9\u6CD5\uFF0C\u6B64\u65F6 custom_metric_func \u548C custom_metric_order_seq \u4E24\u4E2A\u53C2\u6570\u5FC5\u987B\u4E0D\u4E3A None\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"device\uFF1A\u6307\u5B9A\u6A21\u578B\u8FD0\u884C device\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"custom_metric_func\uFF1A\u81EA\u5B9A\u4E49\u6A21\u578B\u8F93\u51FA\u6BD4\u8F83\u51FD\u6570\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:'custom_metric_order_seq\uFF1A\u81EA\u5B9A\u4E49\u6A21\u578B\u8F93\u51FA\u6BD4\u8F83\u51FD\u6570\u7684\u6392\u5E8F\u89C4\u5219\uFF0C\u4EC5\u652F\u6301 "ascending"/"descending"\uFF0C\u8868\u793A\u5347\u5E8F/\u964D\u5E8F\u3002'}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"cached_attrs\uFF1A\u4F5C\u4E3A\u6A21\u578B\u8F93\u5165\u7684\u67D0\u4E9B\u5C5E\u6027\u3002\u901A\u5E38\u5728\u65F6\u5E8F\u6A21\u578B\u4E2D\u4F7F\u7528\uFF0C\u5982\u8FD0\u884C\u7B2C\u4E8C\u5E27\u65F6\uFF0C\u5C06\u7B2C\u4E00\u5E27\u7684\u67D0\u4E9B\u7ED3\u679C\u4F5C\u4E3A\u8F93\u5165\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.div,{className:"rspress-directive info",children:[(0,l.jsx)(n.div,{className:"rspress-directive-title",children:"\u6CE8\u89E3"}),(0,l.jsx)(n.div,{className:"rspress-directive-content",children:(0,l.jsxs)(n.p,{children:["\n",(0,l.jsx)(n.code,{children:"auto_find_bad_case"}),"\u51FD\u6570\u904D\u5386\u4F20\u5165\u7684 data_generator\uFF0C\u8FD0\u884C\u57FA\u51C6\u6A21\u578B\u548C\u5F85\u5206\u6790\u6A21\u578B\uFF0C\u8BA1\u7B97\u6BCF\u4E2A\u8F93\u51FA\u5728 Cosine/MSE/L1/KL/SQNR 5 \u79CD metric \u4E0A\u7684\u6BD4\u8F83\u7ED3\u679C\uFF0C\u5E76\u627E\u5230\u5728\u5404\u4E2A metric \u4E0A\u6BD4\u8F83\u7ED3\u679C\u6700\u5DEE\u7684 badcase \u8F93\u5165\u3002"]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u8F93\u51FA"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"badcase.txt\uFF1A\u5305\u542B 3 \u90E8\u5206\u5185\u5BB9"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5404\u4E2A\u8F93\u51FA\u5728\u4E0D\u540C metric \u4E0B\u627E\u5230\u7684 badcase \u8F93\u5165\u3002\uFF08\u5728 data_generator \u4E2D\u7684\u7D22\u5F15\u503C\uFF09\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5404\u4E2A\u8F93\u51FA\u5728\u4E0D\u540C metric \u4E0B\u627E\u5230\u7684 badcase \u8F93\u5165\u5BF9\u5E94\u7684 metric \u6700\u5DEE\u503C\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u76F8\u540C metric \u6307\u6807\u4E0B\uFF0C\u8F93\u51FA\u6700\u5DEE\u7684 badcase \u8F93\u5165\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-text",meta:"",children:[(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"The bad case input index of each output:"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Name/Index    Cosine    MSE    L1    KL    SQNR"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"------------  --------  -----  ----  ----  ------"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"box0          16        0      0     97    16"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"box1          77        32     32    81    77"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"box2          66        46     56    79    66"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"scores        61        96     100   96    60"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"centerness    0         0      0     0     0"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"yawness       17        76     18    18    39"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"The metric results of each badcase:"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Name/Index    Cosine     MSE        L1         KL           SQNR"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"------------  ---------  ---------  ---------  -----------  ---------"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"box0          0.906329   84.7319    2.97311    0.323674     7.40183"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"box1          0.968623   38.602     2.98777    0.268769     11.4491"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"box2          0.799405   237.053    4.37895    0.0386395    4.28581"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"scores        0.388762   0.0080612  0.0395061  1.43469e-05  -0.749675"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"centerness    0.904206   0.0456813  0.178009   4.34062e-05  5.28536"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"yawness       -0.325684  4.87353    1.27329    0.141269     -3.66645"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"The bad case input index of the worst output:"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"metric    dataloader index"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"--------  ------------------"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Cosine    17"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"MSE       46"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"L1        56"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"KL        97"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"SQNR      39"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["badcase.pt\uFF1A\u4FDD\u5B58\u7684\u8F93\u5165\u6570\u636E\uFF0C\u4E3A\u53C2\u6570 ",(0,l.jsx)(n.code,{children:"metric"})," \u6307\u5B9A\u7684 metric \u6307\u6807\u6700\u5DEE\u7684\u8F93\u5165\u3002\u4F5C\u4E3A ",(0,l.jsx)(n.code,{children:"run"})," \u51FD\u6570\u7684\u9ED8\u8BA4\u8F93\u5165\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.h4,{id:"set_bad_case",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#set_bad_case",children:"#"}),"set_bad_case"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"set_bad_case"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"data"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Any"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"baseline_model_cached_attr"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Dict"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"analysis_model_cached_attr"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Dict"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:"\u624B\u52A8\u8BBE\u7F6E badcase\u3002"}),"\n",(0,l.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,l.jsx)(n.div,{className:"rspress-directive-title",children:"\u6CE8\u610F"}),(0,l.jsx)(n.div,{className:"rspress-directive-content",children:(0,l.jsxs)(n.p,{children:["\n\u901A\u5E38\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u5EFA\u8BAE\u60A8\u901A\u8FC7 ",(0,l.jsx)(n.code,{children:"auto_find_bad_case"}),"\u51FD\u6570\u5BFB\u627E badcase\u3002\u82E5\u624B\u52A8\u8BBE\u7F6E\u7684 badcase \u975E\u771F\u6B63\u7684 badcase\uFF0C\u5206\u6790\u5DE5\u5177\u5F88\u96BE\u627E\u51FA\u91CF\u5316\u654F\u611F\u5C42\u3002"]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"data: badcase \u8F93\u5165\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"baseline_model_cached_attr\uFF1A\u57FA\u51C6\u6A21\u578B\u7684 cached_attrs\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"analysis_model_cached_attr\uFF1A\u5F85\u5206\u6790\u6A21\u578B\u7684 cached_attrs\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.h4,{id:"load_bad_case",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#load_bad_case",children:"#"}),"load_bad_case"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"load_bad_case"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"filename"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:"\u4ECE\u6307\u5B9A\u7684\u6587\u4EF6\u4E2D\u52A0\u8F7D badcase\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["filename\uFF1A\u6307\u5B9A\u7684\u6587\u4EF6\u8DEF\u5F84\u3002\u9ED8\u8BA4\u4ECE\u521D\u59CB\u5316\u65F6\u6307\u5B9A\u7684 ",(0,l.jsx)(n.code,{children:"out_dir"})," \u76EE\u5F55\u4E2D\u52A0\u8F7D ",(0,l.jsx)(n.code,{children:"auto_find_bad_case"})," \u51FD\u6570\u4FDD\u5B58\u7684 badcase \u76F8\u5173\u6587\u4EF6\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.h4,{id:"save_bad_case",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#save_bad_case",children:"#"}),"save_bad_case"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"save_bad_case"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n"]})})}),"\n",(0,l.jsxs)(n.p,{children:["\u5C06 badcase \u4FDD\u5B58\u5230"," {self.out_dir}/badcase.pt ","\u6587\u4EF6\u3002"]}),"\n",(0,l.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,l.jsx)(n.div,{className:"rspress-directive-title",children:"\u6CE8\u610F"}),(0,l.jsx)(n.div,{className:"rspress-directive-content",children:(0,l.jsxs)(n.p,{children:["\n\u548C ",(0,l.jsx)(n.code,{children:"set_bad_case"}),"\u642D\u914D\u4F7F\u7528\u3002\u901A\u5E38\u60C5\u51B5\u4E0B\uFF0C\u60A8\u65E0\u9700\u624B\u52A8\u8C03\u7528\u6B64\u51FD\u6570\u3002"]})})]}),"\n",(0,l.jsxs)(n.h4,{id:"set_model_profiler_dir",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#set_model_profiler_dir",children:"#"}),"set_model_profiler_dir"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"set_model_profiler_dir"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"baseline_model_profiler_path"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"analysis_model_profiler_path"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:"\u624B\u52A8\u6307\u5B9A model_profiler \u7684\u8F93\u51FA\u4FDD\u5B58\u8DEF\u5F84\u3002"}),"\n",(0,l.jsx)(n.p,{children:"\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u5728 QuantAnalysis \u521D\u59CB\u5316\u4E4B\u524D\uFF0CModelProfiler \u5C31\u5DF2\u5B9A\u4E49\u5E76\u8FD0\u884C\uFF0C\u6B64\u65F6\u53EF\u4EE5\u76F4\u63A5\u6307\u5B9A\u5DF2\u6709\u7684 ModelProfiler \u8DEF\u5F84\uFF0C\u8DF3\u8FC7 QuantAnalysis \u7684 run \u6B65\u9AA4\uFF0C\u76F4\u63A5\u6BD4\u8F83\u4E24\u4E2A\u6A21\u578B\u7684\u8F93\u51FA\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"baseline_model_profiler_path\uFF1A\u57FA\u51C6\u6A21\u578B\u7684 profiler \u8DEF\u5F84\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"analysis_model_profiler_path\uFF1A\u5F85\u5206\u6790\u6A21\u578B\u7684 profiler \u8DEF\u5F84\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.h4,{id:"run",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#run",children:"#"}),"run"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"run"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"device"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Union"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"torch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"device"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"int"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"index"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"int"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:"\u8FD0\u884C\u4E24\u4E2A\u6A21\u578B\u5E76\u5206\u522B\u4FDD\u5B58\u6A21\u578B\u4E2D\u6BCF\u4E00\u5C42\u7684\u7ED3\u679C\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"device\uFF1A\u6A21\u578B\u8FD0\u884C\u7684 device\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"index\uFF1A\u8F93\u5165\u6570\u636E\u5728 data_generator \u4E2D\u7684 index\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,l.jsx)(n.div,{className:"rspress-directive-title",children:"\u6CE8\u610F"}),(0,l.jsx)(n.div,{className:"rspress-directive-content",children:(0,l.jsxs)(n.p,{children:["\n\u4EC5\u652F\u6301 ",(0,l.jsx)(n.code,{children:"auto_find_bad_case"})," \u51FD\u6570\u627E\u5230\u5E76\u5728 ",(0,l.jsx)(n.code,{children:"badcase.txt"}),"\u4E2D\u663E\u793A\u7684 index \u4F5C\u4E3A\u53C2\u6570\u8F93\u5165\u3002"]})})]}),"\n",(0,l.jsxs)(n.h4,{id:"compare_per_layer",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#compare_per_layer",children:"#"}),"compare_per_layer"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"compare_per_layer"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"prefixes"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Tuple"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ..."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"types"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Tuple"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Type"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ..."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:"\u6BD4\u8F83\u4E24\u4E2A\u6A21\u578B\u4E2D\u6BCF\u4E00\u5C42\u7684\u7ED3\u679C\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"prefixes\uFF1A\u6307\u5B9A op \u540D\u5B57\u7684\u524D\u7F00\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"types\uFF1Aop \u7C7B\u578B\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.div,{className:"rspress-directive info",children:[(0,l.jsx)(n.div,{className:"rspress-directive-title",children:"\u6CE8\u89E3"}),(0,l.jsx)(n.div,{className:"rspress-directive-content",children:(0,l.jsxs)(n.p,{children:["\n\u901A\u5E38\u60A8\u65E0\u9700\u6307\u5B9A ",(0,l.jsx)(n.code,{children:"prefixes"})," \u548C ",(0,l.jsx)(n.code,{children:"types"}),"\u53C2\u6570\u3002\u82E5\u60A8\u57FA\u4E8E\u4E00\u4E9B\u5148\u9A8C\u7ECF\u9A8C\uFF0C\u60F3\u8DF3\u8FC7\u67D0\u4E9B\u786E\u5B9A\u7684\u3001\u91CF\u5316\u5F71\u54CD\u8F83\u5C0F op \u7684\u6BD4\u8F83\uFF0C\u6216\u60F3\u8282\u7701\u65F6\u95F4\uFF0C\u60A8\u53EF\u4EE5\u901A\u8FC7\u4E24\u4E2A\u53C2\u6570\uFF0C\u6307\u5B9A\u6BD4\u8F83\u67D0\u4E9B op \u6216\u8005\u67D0\u7C7B op\u3002"]})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u8F93\u51FA"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"abnormal_layer_advisor.txt: \u6240\u6709\u5F02\u5E38\u5C42\uFF0C\u5305\u62EC\u6570\u636E\u8303\u56F4\u8FC7\u5927/\u5305\u542B inf \u6216 NaN/\u8F93\u51FA\u6CA1\u6709\u9AD8\u7CBE\u5EA6\u7B49\u60C5\u51B5\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"profiler.html: \u53EF\u89C6\u5316\u5C55\u793A\u6240\u6709 metric \u6307\u6807\u53CA\u6A21\u578B\u4E2D\u6BCF\u4E00\u5C42\u7684\u6570\u636E\u8303\u56F4 diff\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"profiler_html",src:o})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"compare_per_layer_out.txt: \u4EE5\u8868\u683C\u7684\u5F62\u5F0F\u5C55\u793A\u6A21\u578B\u4E2D\u6BCF\u5C42 layer \u7684\u5177\u4F53\u4FE1\u606F\uFF0C\u5305\u62EC\u5404\u79CD\u6307\u6807\u3001\u6570\u636E\u8303\u56F4\u3001\u91CF\u5316 dtype \u7B49\u3002\u4ECE\u5DE6\u5230\u53F3\u6BCF\u4E00\u5217\u5206\u522B\u8868\u793A\uFF1A"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Index\uFF1Aop index\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"mod_name\uFF1A\u8BE5 op \u540D\u5B57\uFF0C\u82E5 op \u4E3A module \u7C7B\u578B\uFF0C\u5219\u663E\u793A\u8BE5 module \u5728\u6A21\u578B\u4E2D\u7684 prefix name\uFF0C\u82E5\u4E3A function \u7C7B\u578B\uFF0C\u5219\u4E0D\u663E\u793A\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"base_op_type\uFF1A\u57FA\u51C6\u6A21\u578B\u4E2D\u8BE5 op \u7684 type\uFF0C\u53EF\u80FD\u662F module \u7C7B\u578B\u6216\u8005 function \u540D\u79F0\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"analy_op_type\uFF1A\u5F85\u5206\u6790\u6A21\u578B\u4E2D\u8BE5 op \u7684 type\uFF0C\u53EF\u80FD\u662F module \u7C7B\u578B\u6216\u8005 function \u540D\u79F0\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Shape\uFF1A\u8BE5 op \u8F93\u51FA\u7684 shape\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"quant_dtype\uFF1A\u8BE5 op \u8F93\u51FA\u7684\u91CF\u5316\u7C7B\u578B\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Qscale\uFF1A\u8BE5 op \u8F93\u51FA\u7684\u91CF\u5316 scale\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Cosine\uFF1A\u8BE5 op \u5728\u4E24\u4E2A\u6A21\u578B\u4E2D\u8F93\u51FA\u7684\u4F59\u5F26\u76F8\u4F3C\u5EA6\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"L1\uFF1A\u8BE5 op \u5728\u4E24\u4E2A\u6A21\u578B\u4E2D\u8F93\u51FA\u7684 L1 \u8DDD\u79BB\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Atol\uFF1A\u8BE5 op \u5728\u4E24\u4E2A\u6A21\u578B\u4E2D\u8F93\u51FA\u7684\u7EDD\u5BF9\u8BEF\u5DEE\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"max_qscale_diff\uFF1A\u8BE5 op \u5728\u4E24\u4E2A\u6A21\u578B\u4E2D\u8F93\u51FA\u6700\u5927\u76F8\u5DEE\u4E86\u51E0\u4E2A scale\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"base_model_min\uFF1A\u57FA\u51C6\u6A21\u578B\u4E2D\u8BE5 op \u8F93\u51FA\u7684\u6700\u5C0F\u503C\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"analy_model_min\uFF1A\u5F85\u5206\u6790\u6A21\u578B\u4E2D\u8BE5 op \u8F93\u51FA\u7684\u6700\u5C0F\u503C\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"base_model_max\uFF1A\u57FA\u51C6\u6A21\u578B\u4E2D\u8BE5 op \u8F93\u51FA\u7684\u6700\u5927\u503C\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"analy_model_max\uFF1A\u5F85\u5206\u6790\u6A21\u578B\u4E2D\u8BE5 op \u8F93\u51FA\u7684\u6700\u5927\u503C\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"base_model_mean\uFF1A\u57FA\u51C6\u6A21\u578B\u4E2D\u8BE5 op \u8F93\u51FA\u7684\u5E73\u5747\u503C\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"analy_model_mean\uFF1A\u5F85\u5206\u6790\u6A21\u578B\u4E2D\u8BE5 op \u8F93\u51FA\u7684\u5E73\u5747\u503C\u3002"}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-text",meta:"",children:[(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"+----+------------+--------------------------------------------------------------------+--------------------------------------------------------------------+----------------------------+---------------+-----------+-----------+-----------+-----------+-------------------+------------------+-------------------+------------------+-------------------+-------------------+--------------------+"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|    | mod_name   | base_op_type                                                       | analy_op_type                                                      | shape                      | quant_dtype   |    qscale |    Cosine |        L1 |      Atol |   max_qscale_diff |   base_model_min |   analy_model_min |   base_model_max |   analy_model_max |   base_model_mean |   analy_model_mean |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|----+------------+--------------------------------------------------------------------+--------------------------------------------------------------------+----------------------------+---------------+-----------+-----------+-----------+-----------+-------------------+------------------+-------------------+------------------+-------------------+-------------------+--------------------|"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|  0 | quant      | torch.ao.quantization.stubs.QuantStub                              | horizon_plugin_pytorch.nn.qat.stubs.QuantStub                      | torch.Size([1, 3, 32, 32]) | qint8         | 0.0078404 | 0.9999922 | 0.0019772 | 0.0039202 |         0.5000016 |        0.0002798 |         0.0000000 |        0.9996471 |         0.9957269 |         0.4986397 |          0.4986700 |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|  1 | conv       | torch.nn.modules.conv.Conv2d                                       | horizon_plugin_pytorch.nn.qat.conv2d.Conv2d                        | torch.Size([1, 3, 32, 32]) | qint8         | 0.0056401 | 0.9999791 | 0.0020876 | 0.0092935 |         1.6477517 |       -0.7193903 |        -0.7162931 |        0.5436335 |         0.5414499 |        -0.0423445 |         -0.0413149 |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|  2 | relu       | torch.nn.modules.activation.ReLU                                   | torch.nn.modules.activation.ReLU                                   | torch.Size([1, 3, 32, 32]) | qint8         | 0.0056401 | 0.9999741 | 0.0009586 | 0.0088447 |         1.5681799 |        0.0000000 |         0.0000000 |        0.5436335 |         0.5414499 |         0.1555644 |          0.1557564 |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|  3 |            | horizon_plugin_pytorch.nn.interpolate.autocasted_interpolate_outer | horizon_plugin_pytorch.nn.interpolate.autocasted_interpolate_outer | torch.Size([1, 3, 41, 41]) | qint8         | 0.0056401 | 0.9924216 | 0.0160291 | 0.2094204 |        37.1305954 |        0.0000000 |         0.0000000 |        0.5149657 |         0.5301697 |         0.1550578 |          0.1559310 |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|  4 | dequant    | torch.ao.quantization.stubs.DeQuantStub                            | horizon_plugin_pytorch.nn.qat.stubs.DeQuantStub                    | torch.Size([1, 3, 41, 41]) | torch.float32 |           | 0.9924216 | 0.0160291 | 0.2094204 |                   |        0.0000000 |         0.0000000 |        0.5149657 |         0.5301697 |         0.1550578 |          0.1559310 |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"+----+------------+--------------------------------------------------------------------+--------------------------------------------------------------------+----------------------------+---------------+-----------+-----------+-----------+-----------+-------------------+------------------+-------------------+------------------+-------------------+-------------------+--------------------+"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"compare_per_layer_out.csv: \u4EE5 csv \u7684\u683C\u5F0F\u5C55\u793A\u6BCF\u5C42\u7684\u5177\u4F53\u4FE1\u606F\u3002\u5185\u5BB9\u548C compare_per_layer_out.txt \u5B8C\u5168\u4E00\u81F4\uFF0Ccsv \u6587\u4EF6\u7684\u5B58\u50A8\u683C\u5F0F\u65B9\u4FBF\u60A8\u901A\u8FC7 excel \u7B49\u8F6F\u4EF6\u6253\u5F00\u5206\u6790\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.h4,{id:"sensitivity",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#sensitivity",children:"#"}),"sensitivity"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"sensitivity"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"device"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Optional"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"torch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"device"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"metric"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"L1"'}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"reserve"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"bool"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"False"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:"\u6A21\u578B\u4E2D\u5404\u4E2A\u8282\u70B9\u7684\u654F\u611F\u5EA6\u6392\u5E8F\u3002\u9002\u7528\u4E8E float \u8F6C calibration \u7684\u7CBE\u5EA6\u6389\u70B9\u95EE\u9898\u3002"}),"\n",(0,l.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,l.jsx)(n.div,{className:"rspress-directive-title",children:"\u6CE8\u610F"}),(0,l.jsx)(n.div,{className:"rspress-directive-content",children:(0,l.jsx)(n.p,{children:"\nsensitivity \u51FD\u6570\u4E0D\u652F\u6301\u8BA1\u7B97 hbir \u6A21\u578B\u7684\u654F\u611F\u5EA6\u3002"})})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"device\uFF1A\u6307\u5B9A\u6A21\u578B\u8FD0\u884C\u7684 device\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"metric\uFF1A\u76F8\u4F3C\u5EA6\u6392\u5E8F\u7684 metric\uFF0C\u9ED8\u8BA4 L1\uFF0C\u652F\u6301 Cosine/MSE/L1/KL/SQNR\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"reserve\uFF1A\u662F\u5426\u53CD\u5E8F\u6253\u5370\u654F\u611F\u5EA6\u8282\u70B9\uFF0C\u4EE5\u652F\u6301\u5C06\u67D0\u4E9B int16 \u7B97\u5B50\u9000\u56DE int8 \u6765\u63D0\u5347\u4E0A\u677F\u6027\u80FD\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u8F93\u51FA"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"sensitive_ops.txt\u3002\u6587\u4EF6\u4E2D\u6309\u7167\u91CF\u5316\u654F\u611F\u5EA6\u4ECE\u9AD8\u5230\u4F4E\u7684\u987A\u5E8F\u6392\u5217 op\u3002\u4ECE\u5DE6\u5230\u53F3\u6BCF\u4E00\u5217\u5206\u522B\u8868\u793A\uFF1A"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"op_name\uFF1Aop \u540D\u5B57\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"sensitive_type\uFF1A\u8BA1\u7B97\u91CF\u5316\u654F\u611F\u7684\u7C7B\u578B\uFF0C\u5305\u62EC\u4E09\u79CD\uFF1A"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"activation\uFF1A\u4EC5\u91CF\u5316\u8BE5 op \u8F93\u51FA\u7684\u91CF\u5316\u654F\u611F\u5EA6\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"weight\uFF1A\u4EC5\u91CF\u5316\u8BE5 op \u6743\u91CD\u7684\u91CF\u5316\u654F\u611F\u5EA6\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"op_type\uFF1Aop \u7C7B\u578B\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"metric\uFF1A\u8BA1\u7B97\u654F\u611F\u5EA6\u7684\u6307\u6807\u3002\u6309\u7167\u654F\u611F\u5EA6\u4ECE\u9AD8\u5230\u4F4E\u7684\u987A\u5E8F\u6392\u5E8F\u3002\u652F\u6301 Cosine/L1/MSE/KL/SQNR \u4E94\u79CD\u6307\u6807\u3002\u9ED8\u8BA4\u4F7F\u7528 L1\u3002"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["L1\uFF1A\u53D6\u503C\u8303\u56F4 [0, ",(0,l.jsxs)(n.span,{className:"katex",children:[(0,l.jsx)(n.span,{className:"katex-mathml",children:(0,l.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(n.semantics,{children:[(0,l.jsxs)(n.mrow,{children:[(0,l.jsx)(n.mo,{children:"+"}),(0,l.jsx)(n.mi,{mathvariant:"normal",children:"\u221E"})]}),(0,l.jsx)(n.annotation,{encoding:"application/x-tex",children:"+\\infty"})]})})}),(0,l.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,l.jsx)(n.span,{className:"mord",children:"+"}),(0,l.jsx)(n.span,{className:"mord",children:"\u221E"})]})})]}),"]\uFF0C\u6570\u503C\u8D8A\u5927\u5219\u8BE5 op \u5BF9\u91CF\u5316\u8D8A\u654F\u611F\uFF08\u4ECE\u5927\u5230\u5C0F\u6392\u5E8F\uFF09\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Cosine\uFF1A\u53D6\u503C\u8303\u56F4 [0,1]\uFF0C\u8D8A\u63A5\u8FD1 0 \u5219\u8BE5 op \u5BF9\u91CF\u5316\u8D8A\u654F\u611F\uFF08\u4ECE\u5C0F\u5230\u5927\u6392\u5E8F\uFF09\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["MSE\uFF1A\u53D6\u503C\u8303\u56F4 [0, ",(0,l.jsxs)(n.span,{className:"katex",children:[(0,l.jsx)(n.span,{className:"katex-mathml",children:(0,l.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(n.semantics,{children:[(0,l.jsxs)(n.mrow,{children:[(0,l.jsx)(n.mo,{children:"+"}),(0,l.jsx)(n.mi,{mathvariant:"normal",children:"\u221E"})]}),(0,l.jsx)(n.annotation,{encoding:"application/x-tex",children:"+\\infty"})]})})}),(0,l.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,l.jsx)(n.span,{className:"mord",children:"+"}),(0,l.jsx)(n.span,{className:"mord",children:"\u221E"})]})})]}),"]\uFF0C\u6570\u503C\u8D8A\u5927\u5219\u8BE5 op \u5BF9\u91CF\u5316\u8D8A\u654F\u611F\uFF08\u4ECE\u5927\u5230\u5C0F\u6392\u5E8F\uFF09\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["KL\uFF1A\u53D6\u503C\u8303\u56F4 [0, ",(0,l.jsxs)(n.span,{className:"katex",children:[(0,l.jsx)(n.span,{className:"katex-mathml",children:(0,l.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(n.semantics,{children:[(0,l.jsxs)(n.mrow,{children:[(0,l.jsx)(n.mo,{children:"+"}),(0,l.jsx)(n.mi,{mathvariant:"normal",children:"\u221E"})]}),(0,l.jsx)(n.annotation,{encoding:"application/x-tex",children:"+\\infty"})]})})}),(0,l.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,l.jsx)(n.span,{className:"mord",children:"+"}),(0,l.jsx)(n.span,{className:"mord",children:"\u221E"})]})})]}),"]\uFF0C\u6570\u503C\u8D8A\u5927\u5219\u8BE5 op \u5BF9\u91CF\u5316\u8D8A\u654F\u611F\uFF08\u4ECE\u5927\u5230\u5C0F\u6392\u5E8F\uFF09\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["SQNR\uFF1A\u53D6\u503C\u8303\u56F4 [0, ",(0,l.jsxs)(n.span,{className:"katex",children:[(0,l.jsx)(n.span,{className:"katex-mathml",children:(0,l.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(n.semantics,{children:[(0,l.jsxs)(n.mrow,{children:[(0,l.jsx)(n.mo,{children:"+"}),(0,l.jsx)(n.mi,{mathvariant:"normal",children:"\u221E"})]}),(0,l.jsx)(n.annotation,{encoding:"application/x-tex",children:"+\\infty"})]})})}),(0,l.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"0.6667em",verticalAlign:"-0.0833em"}}),(0,l.jsx)(n.span,{className:"mord",children:"+"}),(0,l.jsx)(n.span,{className:"mord",children:"\u221E"})]})})]}),"]\uFF0C\u6570\u503C\u8D8A\u5C0F\u5219\u8BE5 op \u5BF9\u91CF\u5316\u8D8A\u654F\u611F\uFF08\u4ECE\u5C0F\u5230\u5927\u6392\u5E8F\uFF09\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"quant_dtype\uFF1A\u8BE5 op \u8F93\u51FA\u7684\u91CF\u5316 dtype\u3002\u901A\u5E38\u4E3A qint8/qint16\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"flops\uFF1A\u8BE5 op \u7684\u8BA1\u7B97\u91CF\u4EE5\u53CA\u5728\u6574\u4E2A\u6A21\u578B\u8BA1\u7B97\u91CF\u4E2D\u7684\u5360\u6BD4\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["sensitive_ops.pt\u3002\u4F7F\u7528 torch.save \u4FDD\u5B58\u7684\u654F\u611F\u5EA6\u6392\u5E8F\u7684\u5217\u8868\uFF0C\u65B9\u4FBF\u60A8\u540E\u7EED\u52A0\u8F7D\u4F7F\u7528\u3002\u82E5\u5B58\u5728\u591A\u4E2A\u8F93\u51FA\uFF0C\u5219\u6BCF\u4E2A\u8F93\u51FA\u90FD\u4F1A\u751F\u6210\u4E00\u4E2A\u654F\u611F\u5EA6\u8868\u3002\u5217\u8868\u683C\u5F0F\u89C1",(0,l.jsx)(n.strong,{children:"\u8FD4\u56DE\u503C"}),"\u90E8\u5206\u8BF4\u660E\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u8FD4\u56DE\u503C"})}),"\n",(0,l.jsxs)(n.p,{children:["\u654F\u611F\u5EA6 List\uFF0CList \u4E2D\u6BCF\u4E2A\u5143\u7D20\u90FD\u662F\u8BB0\u5F55\u4E00\u4E2A op \u654F\u611F\u5EA6\u4FE1\u606F\u7684\u5B50 list\u3002\u5B50 List \u4E2D\u4ECE\u5DE6\u5230\u53F3\u6BCF\u4E00\u9879\u5206\u522B\u4E3A ",(0,l.jsx)(n.code,{children:"[op_name, sensitive_type, op_type, metric, quant_dtype, flops]"}),"\u3002"]}),"\n",(0,l.jsx)(n.p,{children:"\u6574\u4E2A List \u793A\u4F8B\u5982\u4E0B\uFF1A"}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-text",meta:"",children:[(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"["})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'    [op1, "activation", op1_type, L1, qint8, flops1],'})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'    [op2, "activation", op2_type, L1, qint8, flops2],'})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'    [op3, "activation", op3_type, L1, qint8, flops3],'})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:'    [op1, "weight", op1_type, L1, qint8, flops4],'})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    ..."})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"]"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,l.jsx)(n.p,{children:"\u60A8\u53EF\u4EE5\u5C06\u91CF\u5316\u654F\u611F\u5EA6\u6392\u540D\u524D n \u7684 op \u914D\u7F6E\u9AD8\u7CBE\u5EA6\uFF08\u5982 int16\uFF09\u6765\u5C1D\u8BD5\u63D0\u5347\u91CF\u5316\u6A21\u578B\u7CBE\u5EA6\u3002"}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-text",meta:"",children:[(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"op_name    sensitive_type    op_type                                                           L1  quant_dtype    flops"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"---------  ----------------  -------------------------------------------------------  -----------  -------------  -------------"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"conv       weight            <class 'horizon_plugin_pytorch.nn.qat.conv2d.Conv2d'>    0.000553844  qint8          9216(100.00%)"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"conv       activation        <class 'horizon_plugin_pytorch.nn.qat.conv2d.Conv2d'>    0.000472854  qint8          9216(100.00%)"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"quant      activation        <class 'horizon_plugin_pytorch.nn.qat.stubs.QuantStub'>  0.000249175  qint8          0(0%)"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,l.jsxs)(n.h4,{id:"clean",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#clean",children:"#"}),"clean"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"clean"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:"\u6E05\u9664\u4E2D\u95F4\u7ED3\u679C\u3002\u4EC5\u4FDD\u7559\u6BD4\u8F83\u7ED3\u679C\u7B49\u6587\u4EF6\u3002"}),"\n",(0,l.jsxs)(n.h3,{id:"model_profiler",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#model_profiler",children:"#"}),"ModelProfiler \u7C7B"]}),"\n",(0,l.jsx)(n.p,{children:"\u7EDF\u8BA1\u6A21\u578B forward \u8FC7\u7A0B\u4E2D\uFF0C\u6BCF\u4E00\u5C42\u7B97\u5B50\u7684\u8F93\u5165\u8F93\u51FA\u7B49\u4FE1\u606F\u3002"}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"# from horizon_plugin_profiler import ModelProfiler"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ModelProfiler"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"object"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"__init__"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"model"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" torch"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"nn"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Module"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"out_dir"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    )"})}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"model: \u9700\u8981\u7EDF\u8BA1\u7684\u6A21\u578B\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"out_dir: \u76F8\u5173\u6587\u4EF6\u4FDD\u5B58\u7684\u8DEF\u5F84\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.div,{className:"rspress-directive info",children:[(0,l.jsx)(n.div,{className:"rspress-directive-title",children:"\u6CE8\u89E3"}),(0,l.jsx)(n.div,{className:"rspress-directive-content",children:(0,l.jsx)(n.p,{children:"\u8BE5\u7C7B\u4EC5\u652F\u6301\u901A\u8FC7 with \u8BED\u53E5\u7684\u65B9\u5F0F\u4F7F\u7528\u3002"})})]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"with"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"ModelProfiler"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(net, "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"./profiler_dir"'}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" p"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"net"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(data)"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"p"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"get_info_manager"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"table"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"p"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"get_info_manager"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensorboard"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:"\u8BE5\u7C7B\u4E2D\u5176\u4E2D\u5404\u4E2A method \u5982\u4E0B\uFF1A"}),"\n",(0,l.jsxs)(n.h4,{id:"get_info_manager",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#get_info_manager",children:"#"}),"get_info_manager"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"get_info_manager"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:"\u83B7\u5F97\u7BA1\u7406\u6BCF\u4E2A op \u4FE1\u606F\u7684\u7ED3\u6784\u4F53\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u8FD4\u56DE\u503C"})}),"\n",(0,l.jsxs)(n.p,{children:["\u7BA1\u7406\u5B58\u50A8\u7684\u6BCF\u4E2A op \u4FE1\u606F\u7684\u7ED3\u6784\u4F53 ",(0,l.jsx)(n.code,{children:"OpRunningInfoManager"}),"\u3002\u5176\u4E2D\u4E24\u4E2A\u91CD\u8981\u7684\u63A5\u53E3\u5982\u4E0B\uFF1A"]}),"\n",(0,l.jsxs)(n.h5,{id:"table",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#table",children:"#"}),"table"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"OpRunningInfoManager"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:":"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"table"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"out_dir"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"prefixes"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Tuple"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ..."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"types"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Tuple"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Type"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ..."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"with_stack"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"bool"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"False"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    )"})}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:"\u5728\u4E00\u4E2A\u8868\u683C\u4E2D\u5C55\u793A\u5355\u4E2A\u6A21\u578B\u7EDF\u8BA1\u91CF\u3002\u5B58\u50A8\u5230 statistic.txt \u6587\u4EF6\u4E2D\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"out_dir\uFF1Astatistic.txt \u6587\u4EF6\u7684\u5B58\u50A8\u8DEF\u5F84\uFF0C\u9ED8\u8BA4 None\uFF0C\u5B58\u50A8\u5230 self.out_dir\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"prefixes\uFF1A\u9700\u8981\u7EDF\u8BA1\u7684\u6A21\u578B\u4E2D op \u7684 prefixes\u3002\u9ED8\u8BA4\u7EDF\u8BA1\u6240\u6709 op\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"types\uFF1A\u9700\u8981\u7EDF\u8BA1\u7684\u6A21\u578B\u4E2D op \u7684 type\u3002\u9ED8\u8BA4\u7EDF\u8BA1\u6240\u6709 op\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"with_stack: \u662F\u5426\u663E\u793A\u6BCF\u4E2A op \u5728\u4EE3\u7801\u4E2D\u5BF9\u5E94\u7684\u4F4D\u7F6E\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u8F93\u51FA"})}),"\n",(0,l.jsx)(n.p,{children:"statistic.txt \u6587\u4EF6\uFF0C\u4ECE\u5DE6\u5230\u53F3\u6BCF\u4E00\u5217\u5206\u522B\u4E3A\uFF1A"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Index\uFF1Aop index\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Op Name\uFF1Aop type\uFF0Cmodule \u7C7B\u540D\u6216\u8005 function \u540D\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Mod Name\uFF1A\u82E5\u662F module \u7C7B\uFF0C\u5219\u663E\u793A\u8BE5 module \u5728\u6A21\u578B\u4E2D\u7684 prefix name\uFF1B\u82E5\u662F function \u7C7B\u578B\uFF0C\u5219\u663E\u793A\u8BE5 function \u6240\u5728\u7684 module prefix name\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Attr\uFF1Ainput/output/weight/bias\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Dtype\uFF1Atensor \u7684\u6570\u636E\u7C7B\u578B\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Scale\uFF1Atensor \u7684 scale\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Min\uFF1A\u5F53\u524D tensor \u7684\u6700\u5C0F\u503C\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Max\uFF1A\u5F53\u524D tensor \u7684\u6700\u5927\u503C\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Mean\uFF1A\u5F53\u524D tensor \u7684\u5E73\u5747\u503C\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Var\uFF1A\u5F53\u524D tensor \u4E2D\u6570\u503C\u7684\u65B9\u5DEE\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Shape\uFF1Atensor shape\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-text",meta:"",children:[(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"+---------+--------------------------------------------------------------------+------------+--------+---------------+-----------+------------+-----------+------------+-----------+----------------------------+"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| Index   | Op Name                                                            | Mod Name   | Attr   | Dtype         | Scale     | Min        | Max       | Mean       | Var       | Shape                      |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"|---------+--------------------------------------------------------------------+------------+--------+---------------+-----------+------------+-----------+------------+-----------+----------------------------|"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| 0       | horizon_plugin_pytorch.nn.qat.stubs.QuantStub                      | quant      | input  | torch.float32 |           | 0.0003164  | 0.9990171 | 0.5015678  | 0.0846284 | torch.Size([1, 3, 32, 32]) |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| 0       | horizon_plugin_pytorch.nn.qat.stubs.QuantStub                      | quant      | output | qint8         | 0.0078354 | 0.0000000  | 0.9950994 | 0.5014852  | 0.0846521 | torch.Size([1, 3, 32, 32]) |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| 1       | horizon_plugin_pytorch.nn.qat.conv2d.Conv2d                        | conv       | input  | qint8         | 0.0078354 | 0.0000000  | 0.9950994 | 0.5014852  | 0.0846521 | torch.Size([1, 3, 32, 32]) |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| 1       | horizon_plugin_pytorch.nn.qat.conv2d.Conv2d                        | conv       | weight | torch.float32 |           | -0.5315086 | 0.5750652 | 0.0269936  | 0.1615299 | torch.Size([3, 3, 1, 1])   |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| 1       | horizon_plugin_pytorch.nn.qat.conv2d.Conv2d                        | conv       | bias   | torch.float32 |           | -0.4963555 | 0.4448483 | -0.0851902 | 0.2320642 | torch.Size([3])            |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| 1       | horizon_plugin_pytorch.nn.qat.conv2d.Conv2d                        | conv       | output | qint8         | 0.0060428 | -0.7674332 | 0.4652941 | -0.0412943 | 0.0422743 | torch.Size([1, 3, 32, 32]) |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| 2       | horizon_plugin_pytorch.nn.qat.relu.ReLU                            | relu       | input  | qint8         | 0.0060428 | -0.7674332 | 0.4652941 | -0.0412943 | 0.0422743 | torch.Size([1, 3, 32, 32]) |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| 2       | horizon_plugin_pytorch.nn.qat.relu.ReLU                            | relu       | output | qint8         | 0.0060428 | 0.0000000  | 0.4652941 | 0.0639115  | 0.0089839 | torch.Size([1, 3, 32, 32]) |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| 3       | horizon_plugin_pytorch.nn.interpolate.autocasted_interpolate_outer |            | input  | qint8         | 0.0060428 | 0.0000000  | 0.4652941 | 0.0639115  | 0.0089839 | torch.Size([1, 3, 32, 32]) |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| 3       | horizon_plugin_pytorch.nn.interpolate.autocasted_interpolate_outer |            | output | qint8         | 0.0060428 | 0.0000000  | 0.3504813 | 0.0639483  | 0.0043366 | torch.Size([1, 3, 41, 41]) |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| 4       | horizon_plugin_pytorch.nn.qat.stubs.DeQuantStub                    | dequant    | input  | qint8         | 0.0060428 | 0.0000000  | 0.3504813 | 0.0639483  | 0.0043366 | torch.Size([1, 3, 41, 41]) |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"| 4       | horizon_plugin_pytorch.nn.qat.stubs.DeQuantStub                    | dequant    | output | torch.float32 |           | 0.0000000  | 0.3504813 | 0.0639483  | 0.0043366 | torch.Size([1, 3, 41, 41]) |"})}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"+---------+--------------------------------------------------------------------+------------+--------+---------------+-----------+------------+-----------+------------+-----------+----------------------------+"})}),"\n",(0,l.jsx)(n.span,{className:"line",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"}})})]})})}),"\n",(0,l.jsxs)(n.h5,{id:"tensorboard",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#tensorboard",children:"#"}),"tensorboard"]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"OpRunningInfoManager"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:":"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensorboard"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"out_dir"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"prefixes"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Tuple"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"str"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ..."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"types"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Tuple"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"Type"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ..."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"]"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"None"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-parameter)"},children:"force_per_channel"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"bool"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"False"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number",children:(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    ):"})}),"\n"]})})}),"\n",(0,l.jsx)(n.p,{children:"\u5728 tensorboard \u4E2D\u663E\u793A\u6BCF\u4E00\u5C42\u8F93\u5165\u8F93\u51FA\u76F4\u65B9\u56FE\u3002"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u53C2\u6570"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"out_dir\uFF1Atensorboard \u76F8\u5173\u6587\u4EF6\u4FDD\u76EE\u5F55\u3002\u9ED8\u8BA4\u4FDD\u5B58\u5230 self.out_dir/tensorboard \u76EE\u5F55\u4E0B\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"prefixes\uFF1A\u9700\u8981\u7EDF\u8BA1\u7684\u6A21\u578B\u4E2D op \u7684 prefixes\u3002\u9ED8\u8BA4\u7EDF\u8BA1\u6240\u6709\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"types\uFF1A\u9700\u8981\u7EDF\u8BA1\u7684\u6A21\u578B\u4E2D op \u7684 type\u3002\u9ED8\u8BA4\u7EDF\u8BA1\u6240\u6709\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"force_per_channel\uFF1A\u662F\u5426\u4EE5 per_channel \u91CF\u5316\u7684\u65B9\u5F0F\u5C55\u793A\u76F4\u65B9\u56FE\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u8F93\u51FA"})}),"\n",(0,l.jsx)(n.p,{children:"tensorboard \u6587\u4EF6\uFF0C\u6253\u5F00\u540E\u622A\u56FE\u5982\u4E0B\uFF1A"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"tensorboard",src:a})}),"\n",(0,l.jsxs)(n.h3,{id:"hbir_model_profiler",children:[(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#hbir_model_profiler",children:"#"}),"HbirModelProfiler \u7C7B"]}),"\n",(0,l.jsxs)(n.p,{children:["\u8BE5\u7C7B\u7684\u529F\u80FD\u548C\u4F7F\u7528\u65B9\u5F0F\u4E0E ModelProfiler \u7C7B\u5B8C\u5168\u4E00\u81F4\u3002\u8BF7\u53C2\u8003 ",(0,l.jsx)(n.a,{href:"#model_profiler",children:"ModelProfiler \u7C7B"})," \u8FDB\u884C\u4F7F\u7528\u3002"]}),"\n",(0,l.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,l.jsx)(n.div,{className:"rspress-directive-title",children:"\u6CE8\u610F"}),(0,l.jsx)(n.div,{className:"rspress-directive-content",children:(0,l.jsx)(n.p,{children:"\u7531\u4E8E hbir \u6A21\u578B\u7684\u7279\u6B8A\u683C\u5F0F\uFF0Cqat hbir \u6A21\u578B\u5728 forward \u65F6\u9700\u6DFB\u52A0\u7D22\u5F15 0\u3002"})})]}),"\n",(0,l.jsx)(n.pre,{className:"code",children:(0,l.jsx)(n.pre,{className:"shiki css-variables has-line-number",style:{backgroundColor:"var(--shiki-color-background)"},tabIndex:"0",children:(0,l.jsxs)(n.code,{className:"language-python",meta:"",children:[(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"with"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"HbirModelProfiler"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(qat_hbir, "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"./hbir_dir"'}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"as"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" p"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    qat_hbir"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"["}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"](data)"})]}),"\n",(0,l.jsx)(n.span,{className:"line line-number"}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"p"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"get_info_manager"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"table"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n",(0,l.jsxs)(n.span,{className:"line line-number",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"p"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"get_info_manager"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()."}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"tensorboard"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"()"})]}),"\n"]})})})]})}function h(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),s.components);return n?(0,l.jsx)(n,Object.assign({},s,{children:(0,l.jsx)(t,s)})):t(s)}n.default=h,h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["3.0.22%2Fzh%2Fguide%2Fplugin%2Fuser_guide%2Fquant_analysis.mdx"]={toc:[{id:"\u5FEB\u901F\u4E0A\u624B",text:"\u5FEB\u901F\u4E0A\u624B",depth:2},{id:"api-reference",text:"API Reference",depth:2},{id:"structure_checker",text:"\u6A21\u578B\u7ED3\u6784\u68C0\u67E5",depth:3},{id:"quant_analysis",text:"QuantAnalysis \u7C7B",depth:3},{id:"auto_find_bad_case",text:"auto_find_bad_case",depth:4},{id:"set_bad_case",text:"set_bad_case",depth:4},{id:"load_bad_case",text:"load_bad_case",depth:4},{id:"save_bad_case",text:"save_bad_case",depth:4},{id:"set_model_profiler_dir",text:"set_model_profiler_dir",depth:4},{id:"run",text:"run",depth:4},{id:"compare_per_layer",text:"compare_per_layer",depth:4},{id:"sensitivity",text:"sensitivity",depth:4},{id:"clean",text:"clean",depth:4},{id:"model_profiler",text:"ModelProfiler \u7C7B",depth:3},{id:"get_info_manager",text:"get_info_manager",depth:4},{id:"hbir_model_profiler",text:"HbirModelProfiler \u7C7B",depth:3}],title:"\u7CBE\u5EA6\u8C03\u4F18\u5DE5\u5177\u4F7F\u7528\u6307\u5357",frontmatter:{}}},95895:function(s,n,e){e(39710);var l=e(85893),r=e(67294),i=e(45687);e(20388);let o={"zh-CN":s=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${s.minutes>=1?`${Math.ceil(s.minutes)} \u{5206}\u{949F}`:"\u5C0F\u4E8E 1 \u5206\u949F"}`,"en-US":s=>`Estimated reading time: ${s.minutes>=1?`${Math.ceil(s.minutes)} minutes`:"less than 1 minute"}`};function a(s,n,e){let l=Object.keys(o).includes(n)?n:e;return o[l](s)}n.Z=s=>{let{defaultLocale:n="en-US"}=s,e=(0,i.Vi)().page.readingTimeData,o=(0,i.Jr)(),c=(0,i.e7)(),[t,h]=(0,r.useState)(a(e,o,n));return(0,r.useEffect)(()=>{h(a(e,o,n))},[o,e]),(0,l.jsx)("span",{"data-dark":String(c),className:"rp-reading-time",children:t})}}}]);