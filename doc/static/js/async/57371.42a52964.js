"use strict";(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["57371"],{54088:function(e,n,i){e.exports=i.p+"static/image/engine.59eadeff.png"},51190:function(e,n,i){e.exports=i.p+"static/image/loop.30012061.png"},97905:function(e,n,i){i.r(n);var c=i(85893),r=i(50065),s=i(95895),d=i(51190),l=i(54088);function a(e){let n=Object.assign({h1:"h1",a:"a",p:"p",strong:"strong",code:"code",h2:"h2",ul:"ul",li:"li"},(0,r.ah)(),e.components);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.h1,{id:"\u6267\u884C\u5F15\u64CE",children:[(0,c.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u6267\u884C\u5F15\u64CE",children:"#"}),"\u6267\u884C\u5F15\u64CE"]}),"\n",(0,c.jsx)(s.Z,{}),"\n",(0,c.jsxs)(n.p,{children:["\u5728\u4E0A\u4E00\u5C0F\u8282\u6846\u67B6\u7684\u4ECB\u7ECD\u4E2D\uFF0C\u53EF\u4EE5\u53D1\u73B0\u6240\u6709\u7684 ",(0,c.jsx)(n.strong,{children:"Data"}),"\uFF0C",(0,c.jsx)(n.strong,{children:"Model"}),"\uFF0C",(0,c.jsx)(n.strong,{children:"Callback"})," \u7B49\u5B50\u6A21\u5757\u6784\u5EFA\u5B8C\u6210\u4E4B\u540E\uFF0C\u6700\u7EC8\u90FD\u4F1A\u7EDF\u4E00\u653E\u5230",(0,c.jsx)(n.strong,{children:"Engine"}),"\u4E2D\u6765\u5B8C\u6210\u6267\u884C\u3002\u56E0\u6B64Engine\u662F\u6574\u4E2AHAT\u7684\u6267\u884C\u5F15\u64CE\uFF0C\u5176\u91CD\u8981\u6027\u4E0D\u8A00\u800C\u55BB\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u5728HAT\u4E2D\uFF0CEngine\u5B9A\u4E49\u4E86\u8BAD\u7EC3\u548C\u9884\u6D4B\u7684\u6574\u4E2A",(0,c.jsx)(n.code,{children:"Pipeline"}),"\u3002\u5BF9\u4E8E\u4EFB\u4F55\u4E00\u4E2A\u6DF1\u5EA6\u5B66\u4E60\u7684\u9879\u76EE\uFF0C\u5BF9\u7ED9\u5B9A\u7684\u6A21\u578B\u5B8C\u6210\u8BAD\u7EC3\u548C\u9884\u6D4B\u7684\u4EFB\u52A1\u662F\u5FC5\u987B\u8981\u5B8C\u6210\u7684\u4E8B\u60C5\u3002\u56E0\u6B64\u672C\u5C0F\u8282\u4E3B\u8981\u4ECB\u7ECDHAT\u4E2D\u7684Engine\u6A21\u5757\u662F\u5982\u4F55\u5B9E\u73B0\u7684\u3002"]}),"\n",(0,c.jsxs)(n.h2,{id:"engine\u7684\u6267\u884C\u6D41\u7A0B",children:[(0,c.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#engine\u7684\u6267\u884C\u6D41\u7A0B",children:"#"}),"Engine\u7684\u6267\u884C\u6D41\u7A0B"]}),"\n",(0,c.jsx)("img",{src:d,alt:"Engine Workflow",height:"700",width:"700"}),"\n",(0,c.jsxs)(n.p,{children:["\u6574\u4E2AHAT\u7684Engine\u4E2D\uFF0C\u6700\u57FA\u7840\u7684",(0,c.jsx)(n.code,{children:"PipeBase"}),"\u5B9A\u4E49\u4E86\u6240\u6709\u7684",(0,c.jsx)(n.code,{children:"Callbacks"}),"\u53EF\u64CD\u4F5C\u7684\u8FD0\u884C\u9636\u6BB5\uFF0C\u800C",(0,c.jsx)(n.code,{children:"LoopBase"}),"\u5B9A\u4E49\u4E86\u6240\u6709Engine\u7684\u57FA\u7840\u6267\u884C\u6D41\u7A0B\u3002\u5982\u4E0A\u56FE\u6240\u793A\uFF0C\u6574\u4E2AEngine\u7684\u6267\u884C\u6D41\u7A0B\u4E5F\u5C31\u662F\u7531\u4E30\u5BCC\u7684",(0,c.jsx)(n.code,{children:"Callbacks"}),"\u548C\u4E0E\u6A21\u578B\u76F8\u5173\u7684",(0,c.jsx)(n.code,{children:"Processor"}),"\u5904\u7406\u4E24\u90E8\u5206\u7EC4\u6210\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u6240\u6709",(0,c.jsx)(n.code,{children:"Callbacks"}),"\u53EF\u64CD\u4F5C\u7684\u8FD0\u884C\u9636\u6BB5\uFF0C\u603B\u5171\u53EF\u4EE5\u5206\u4E3A",(0,c.jsx)(n.code,{children:"on_loop_begin"}),"\uFF0C",(0,c.jsx)(n.code,{children:"on_epoch_begin"}),"\uFF0C",(0,c.jsx)(n.code,{children:"on_step_begin"}),"\uFF0C",(0,c.jsx)(n.code,{children:"on_batch_begin"}),"\uFF0C",(0,c.jsx)(n.code,{children:"on_batch_end"}),"\uFF0C",(0,c.jsx)(n.code,{children:"on_step_end"}),"\uFF0C",(0,c.jsx)(n.code,{children:"on_epoch_end"}),"\uFF0C",(0,c.jsx)(n.code,{children:"on_loop_end"}),"\u516B\u4E2A\u9636\u6BB5\u3002\u516B\u4E2A\u9636\u6BB5\u7684\u6267\u884C\u987A\u5E8F\u5982\u4E0A\u56FE\u6240\u793A\uFF0C\u60A8\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u9700\u8981\uFF0C\u5728\u4E0D\u540C\u7684\u9636\u6BB5\u4F7F\u7528\u4E0D\u540C\u7684Callback\uFF0C\u5F53\u7136\u540C\u4E00\u4E2ACallback\u4E5F\u53EF\u4EE5\u7528\u5728\u4E0D\u540C\u7684\u9636\u6BB5\u3002\u6BD4\u5982\u5E38\u89C1\u7684",(0,c.jsx)(n.code,{children:"LrUpdater"}),"\u53EF\u4EE5\u5728",(0,c.jsx)(n.code,{children:"on_epoch_begin"}),"\u548C",(0,c.jsx)(n.code,{children:"on_step_begin"}),"\u8FD9\u4E24\u4E2A\u9636\u6BB5\u4F7F\u7528\uFF0C\u5176\u4ED6\u90E8\u5206Callback\u7684\u4F5C\u7528\u8303\u56F4\u4EA6\u53EF\u5982\u56FE\u6240\u793A\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"BatchProcessor"}),"\u5219\u8D1F\u8D23\u5F53\u524D",(0,c.jsx)(n.code,{children:"Batch"}),"\u4E2D\u6570\u636E\u548C\u6A21\u578B\u7684\u8FD0\u884C\u65B9\u5F0F\uFF0C\u5305\u542B\u6A21\u578B\u5E38\u89C1\u7684\u57FA\u672C\u64CD\u4F5C\uFF0C\u5982",(0,c.jsx)(n.code,{children:"forward"}),"\u548C",(0,c.jsx)(n.code,{children:"backward"}),"\u7B49\u3002\u9664\u6B64\u4E4B\u5916\uFF0C\u8FD8\u6709\u90E8\u5206",(0,c.jsx)(n.code,{children:"grad"}),"\u7684\u66F4\u65B0\u64CD\u4F5C\u4E5F\u4F1A\u88AB\u5B9A\u4E49\u5728\u8FD9\u91CC\u3002\u9700\u8981\u8BF4\u660E\u7684\u662F\uFF0C\u5728\u4E00\u4E9B\u590D\u6742\u7684\u4EFB\u52A1\u8BAD\u7EC3\u8FC7\u7A0B\u4E2D\uFF0CBatchProcessor\u4E5F\u8981\u6C42\u80FD\u505A\u5230\u66F4\u591A\u8F6E\u6B21\u7684\u8FED\u4EE3\u548C\u66F4\u52A0\u4E30\u5BCC\u7684",(0,c.jsx)(n.code,{children:"grad"}),"\u64CD\u4F5C\u3002"]}),"\n",(0,c.jsxs)(n.h2,{id:"engine\u7ED3\u6784",children:[(0,c.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#engine\u7ED3\u6784",children:"#"}),"Engine\u7ED3\u6784"]}),"\n",(0,c.jsx)("img",{src:l,alt:"engine",width:"800"}),"\n",(0,c.jsxs)(n.p,{children:["\u4EE5",(0,c.jsx)(n.code,{children:"LoopBase"}),"\u4E3A\u57FA\u7840\uFF0C\u53EF\u4EE5\u6D3E\u751F\u51FA\u4E30\u5BCC\u7684\u6267\u884C\u5F15\u64CE\uFF0C\u5982\u4E0A\u56FE\u7684Engine\u5173\u7CFB\u56FE\u6240\u793A\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u6309\u7167\u529F\u80FD\u5212\u5206\uFF0C",(0,c.jsx)(n.code,{children:"LoopBase"}),"\u53EF\u4EE5\u6D3E\u751F\u51FA\u4EE5\u8BAD\u7EC3\u4E3A\u4E3B\u7684",(0,c.jsx)(n.code,{children:"Trainer"}),"\u548C\u4EE5\u9884\u6D4B\u4E3A\u4E3B\u7684",(0,c.jsx)(n.code,{children:"Predictor"}),"\u3002"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Trainer\uFF1A\u8D1F\u8D23\u6240\u6709\u548C\u8BAD\u7EC3\u76F8\u5173\u7684\u6D41\u7A0B\uFF0C\u4E00\u822C\u7684\u6DF1\u5EA6\u5B66\u4E60\u76F8\u5173\u7684\u8BAD\u7EC3\u90FD\u9700\u8981\u7528\u5230\u3002"}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Predictor\uFF1A\u8D1F\u8D23\u548C\u9884\u6D4B\u76F8\u5173\u7684\u6D41\u7A0B\uFF0C\u5E38\u7528\u7684\u4F7F\u7528\u573A\u666F\u5982",(0,c.jsx)(n.code,{children:"Validation"}),"\u7B49\u3002"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["\u6309\u7167\u6267\u884C\u65B9\u5F0F\u7684\u4E0D\u540C\uFF0C\u8BAD\u7EC3\u65B9\u5F0F\u53EF\u4EE5\u6D3E\u751F\u51FA\u4E0D\u540C\u7684",(0,c.jsx)(n.code,{children:"Trainer"}),"\uFF0C\u5982\u4EE5",(0,c.jsx)(n.code,{children:"torch.nn.parallel.DistributedDataParallel"}),"\u4E3A\u57FA\u7840\u7684",(0,c.jsx)(n.code,{children:"DistibutedDataParallelTrainer"}),"\uFF0C\u4EE5",(0,c.jsx)(n.code,{children:"torch.nn.DataParallel"}),"\u4E3A\u57FA\u7840\u7684",(0,c.jsx)(n.code,{children:"DataParallelTrainer"}),"\u7B49\u7B49\u3002\u4E0D\u540C\u7684\u6267\u884C\u65B9\u5F0F\u4E5F\u9700\u8981\u4E0D\u540C\u7684\u542F\u52A8\u65B9\u5F0F\uFF0C\u5177\u4F53\u53EF\u4EE5\u53C2\u8003\u4E0D\u540C",(0,c.jsx)(n.code,{children:"Trainer"}),"\u4E2D\u7684",(0,c.jsx)(n.code,{children:"launcher"}),"\u3002"]})]})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,c.jsx)(n,Object.assign({},e,{children:(0,c.jsx)(a,e)})):a(e)}n.default=h,h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["3.0.22%2Fzh%2Fguide%2Fadvanced_content%2Fhat%2Fframework%2Fengine.mdx"]={toc:[{id:"engine\u7684\u6267\u884C\u6D41\u7A0B",text:"Engine\u7684\u6267\u884C\u6D41\u7A0B",depth:2},{id:"engine\u7ED3\u6784",text:"Engine\u7ED3\u6784",depth:2}],title:"\u6267\u884C\u5F15\u64CE",frontmatter:{}}},95895:function(e,n,i){i(39710);var c=i(85893),r=i(67294),s=i(45687);i(20388);let d={"zh-CN":e=>`\u{9884}\u{8BA1}\u{9605}\u{8BFB}\u{65F6}\u{95F4}: ${e.minutes>=1?`${Math.ceil(e.minutes)} \u{5206}\u{949F}`:"\u5C0F\u4E8E 1 \u5206\u949F"}`,"en-US":e=>`Estimated reading time: ${e.minutes>=1?`${Math.ceil(e.minutes)} minutes`:"less than 1 minute"}`};function l(e,n,i){let c=Object.keys(d).includes(n)?n:i;return d[c](e)}n.Z=e=>{let{defaultLocale:n="en-US"}=e,i=(0,s.Vi)().page.readingTimeData,d=(0,s.Jr)(),a=(0,s.e7)(),[h,t]=(0,r.useState)(l(i,d,n));return(0,r.useEffect)(()=>{t(l(i,d,n))},[d,i]),(0,c.jsx)("span",{"data-dark":String(a),className:"rp-reading-time",children:h})}}}]);